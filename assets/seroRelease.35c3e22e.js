import{c as a,u as e}from"./contract.f4385a23.js";import{I as t,r as l,f as u,z as v,l as s,k as i,a8 as c}from"./index.134f5e61.js";import{i as o}from"./index.e595597c.js";import{a2 as n}from"./contract.a6c2e367.js";const r=t("seroRelease",()=>{const t=a(),r=e(),m=l(!1),f=l(!1),d=l(!1),R=l(!1),g=l(0),p=l([]),U=l(""),w=l({totalR:"0",totalU:"0",v1R:"0",v1U:"0",v2R:"0",v2U:"0",v3R:"0",v3U:"0"}),h=l({totalR:"0",totalU:"0",v1R:"0",v1U:"0",v2R:"0",v2U:"0",v3R:"0",v3U:"0"}),x=u(()=>r.userInfo);async function D(){const a=await c.get(`https://resource.githnet.com/api/v3/getSignDataS?id=${x.value.id}`);if(0===a.data.code){const e=a.data.data.data,{v1:t,v2:l,v3:u,ID:v}=e;if(p.value=[v,t,l,u],U.value=a.data.data.signature,"0"===t&&"0"===l&&"0"===u)f.value=!1,d.value=!1,R.value=!1,m.value=!1;else{const a=await n.call("getAccount",[v]);"0"!==a.totalR?(h.value=a,f.value=!0,m.value=!1,d.value=!0,R.value=!1):(m.value=!0,f.value=!0,R.value=!0),j()}}}async function j(){const a=await n.call("claim",[p.value,U.value]);w.value=a.resp,a.expire&&(m.value=!1,R.value=!1)}u(()=>t.account);const y=o({time:0,onFinish:()=>{setTimeout(()=>{},6e4)}}),A=v({cur:y.current});return s(()=>{g.value=1773467921e3-(new Date).getTime(),y.reset(g.value),y.start(),g.value<=0&&(R.value=!1)}),i(x,a=>{"0"!==a.id?D():(f.value=!1,m.value=!1,d.value=!1,R.value=!0)},{immediate:!0}),{show:f,showBtn:m,isClaim:d,isBtcActive:R,diff:g,current:A,claimaData:w,userClaimaData:h,getAccountSero:D,getClaimable:j,claim:async function(){R.value&&(await n.execute("claim",[p.value,U.value]),D())}}});export{r as u};
