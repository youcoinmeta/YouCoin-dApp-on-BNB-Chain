import{f as e,M as t,I as a,r as o,l as n,k as l,aq as s,K as i,Y as r,d as u,at as p,au as d,av as c,aw as v,ax as f,N as m,v as x,x as y,o as b,c as g,z as h,F as w,n as I,u as S,S as k,b as $,i as z,w as C,a6 as E,J as F,g as j,ae as P,j as M,al as V,t as _,e as B,a1 as N}from"./index.46f1a6b1.js";import{l as A,f as R,g as O,b as H,d as K,a as T,_ as L,w as W}from"./plugin-vue_export-helper.d1404625.js";import{i as q,V as D,E as G}from"./index.afc52389.js";import{p as J,o as U,r as Y}from"./index.ad612a16.js";import{u as Z,m as Q,a as X,b as ee}from"./index.f75397a5.js";import{b as te,i as ae}from"./el-popper.7cffbf87.js";class oe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function ne(e,t){throw new oe(`[${e}] ${t}`)}function le(e,t){}const se="update:modelValue",ie="change",re="input",ue=["class","style"],pe=/^on[A-Z]/,de=()=>({form:a(R,void 0),formItem:a(O,void 0)}),ce=(t,{formItemContext:a,disableIdGeneration:r,disableIdManagement:u})=>{r||(r=o(!1)),u||(u=o(!1));const p=o();let d;const c=e((()=>{var e;return!!(!t.label&&a&&a.inputIds&&(null==(e=a.inputIds)?void 0:e.length)<=1)}));return n((()=>{d=l([s(t,"id"),r],(([e,t])=>{const o=null!=e?e:t?void 0:te().value;o!==p.value&&((null==a?void 0:a.removeInputId)&&(p.value&&a.removeInputId(p.value),(null==u?void 0:u.value)||t||!o||a.addInputId(o)),p.value=o)}),{immediate:!0})})),i((()=>{d&&d(),(null==a?void 0:a.removeInputId)&&p.value&&a.removeInputId(p.value)})),{isLabeledByFormItem:c,inputId:p}};let ve;const fe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function me(e,t=1,a){var o;ve||(ve=document.createElement("textarea"),document.body.appendChild(ve));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:fe.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);ve.setAttribute("style",`${i};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ve.value=e.value||e.placeholder||"";let r=ve.scrollHeight;const u={};"border-box"===s?r+=l:"content-box"===s&&(r-=n),ve.value="";const p=ve.scrollHeight-n;if(J(t)){let e=p*t;"border-box"===s&&(e=e+n+l),r=Math.max(e,r),u.minHeight=`${e}px`}if(J(a)){let e=p*a;"border-box"===s&&(e=e+n+l),r=Math.min(e,r)}return u.height=`${r}px`,null==(o=ve.parentNode)||o.removeChild(ve),ve=void 0,u}const xe=H({id:{type:String,default:void 0},size:Z,disabled:Boolean,modelValue:{type:K([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:K([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:q},prefixIcon:{type:q},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:K([Object,Array,String]),default:()=>Q({})}}),ye={[se]:e=>r(e),input:e=>r(e),change:e=>r(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},be=["role"],ge=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],he=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],we=u({name:"ElInput",inheritAttrs:!1});const Ie=W(L(u({...we,props:xe,emits:ye,setup(a,{expose:i,emit:r}){const u=a,R=p(),O=d(),H=e((()=>{const e={};return"combobox"===u.containerRole&&(e["aria-haspopup"]=R["aria-haspopup"],e["aria-owns"]=R["aria-owns"],e["aria-expanded"]=R["aria-expanded"]),e})),K=((a={})=>{const{excludeListeners:o=!1,excludeKeys:n}=a,l=e((()=>((null==n?void 0:n.value)||[]).concat(ue))),s=t();return e(s?()=>{var e;return A(Object.entries(null==(e=s.proxy)?void 0:e.$attrs).filter((([e])=>!(l.value.includes(e)||o&&pe.test(e)))))}:()=>({}))})({excludeKeys:e((()=>Object.keys(H.value)))}),{form:L,formItem:W}=de(),{inputId:q}=ce(u,{formItemContext:W}),J=X(),Z=ee(),Q=U("input"),te=U("textarea"),oe=c(),ne=c(),le=o(!1),ie=o(!1),re=o(!1),ve=o(!1),fe=o(),xe=c(u.inputStyle),ye=e((()=>oe.value||ne.value)),we=e((()=>{var e;return null!=(e=null==L?void 0:L.statusIcon)&&e})),Ie=e((()=>(null==W?void 0:W.validateState)||"")),Se=e((()=>Ie.value&&D[Ie.value])),ke=e((()=>ve.value?v:f)),$e=e((()=>[R.style,u.inputStyle])),ze=e((()=>[u.inputStyle,xe.value,{resize:u.resize}])),Ce=e((()=>ae(u.modelValue)?"":String(u.modelValue))),Ee=e((()=>u.clearable&&!Z.value&&!u.readonly&&!!Ce.value&&(le.value||ie.value))),Fe=e((()=>u.showPassword&&!Z.value&&!u.readonly&&!!Ce.value&&(!!Ce.value||le.value))),je=e((()=>u.showWordLimit&&!!K.value.maxlength&&("text"===u.type||"textarea"===u.type)&&!Z.value&&!u.readonly&&!u.showPassword)),Pe=e((()=>Array.from(Ce.value).length)),Me=e((()=>!!je.value&&Pe.value>Number(K.value.maxlength))),Ve=e((()=>!!O.suffix||!!u.suffixIcon||Ee.value||u.showPassword||je.value||!!Ie.value&&we.value)),[_e,Be]=function(e){const t=o();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(oe);T(ne,(e=>{if(!je.value||"both"!==u.resize)return;const t=e[0],{width:a}=t.contentRect;fe.value={right:`calc(100% - ${a+15+6}px)`}}));const Ne=()=>{const{type:e,autosize:t}=u;if(Y&&"textarea"===e)if(t){const e=N(t)?t.minRows:void 0,a=N(t)?t.maxRows:void 0;xe.value={...me(ne.value,e,a)}}else xe.value={minHeight:me(ne.value).minHeight}},Ae=()=>{const e=ye.value;e&&e.value!==Ce.value&&(e.value=Ce.value)},Re=async e=>{_e();let{value:t}=e.target;u.formatter&&(t=u.parser?u.parser(t):t,t=u.formatter(t)),re.value||(t!==Ce.value?(r(se,t),r("input",t),await m(),Ae(),Be()):Ae())},Oe=e=>{r("change",e.target.value)},He=e=>{r("compositionstart",e),re.value=!0},Ke=e=>{var t;r("compositionupdate",e);const a=null==(t=e.target)?void 0:t.value,o=a[a.length-1]||"";re.value=!(e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e))(o)},Te=e=>{r("compositionend",e),re.value&&(re.value=!1,Re(e))},Le=()=>{ve.value=!ve.value,We()},We=async()=>{var e;await m(),null==(e=ye.value)||e.focus()},qe=e=>{le.value=!0,r("focus",e)},De=e=>{var t;le.value=!1,r("blur",e),u.validateEvent&&(null==(t=null==W?void 0:W.validate)||t.call(W,"blur").catch((e=>{})))},Ge=e=>{ie.value=!1,r("mouseleave",e)},Je=e=>{ie.value=!0,r("mouseenter",e)},Ue=e=>{r("keydown",e)},Ye=()=>{r(se,""),r("change",""),r("clear"),r("input","")};return l((()=>u.modelValue),(()=>{var e;m((()=>Ne())),u.validateEvent&&(null==(e=null==W?void 0:W.validate)||e.call(W,"change").catch((e=>{})))})),l(Ce,(()=>Ae())),l((()=>u.type),(async()=>{await m(),Ae(),Ne()})),n((()=>{!u.formatter&&u.parser,Ae(),m(Ne)})),i({input:oe,textarea:ne,ref:ye,textareaStyle:ze,autosize:s(u,"autosize"),focus:We,blur:()=>{var e;return null==(e=ye.value)?void 0:e.blur()},select:()=>{var e;null==(e=ye.value)||e.select()},clear:Ye,resizeTextarea:Ne}),(e,t)=>x((b(),g("div",F(S(H),{class:["textarea"===e.type?S(te).b():S(Q).b(),S(Q).m(S(J)),S(Q).is("disabled",S(Z)),S(Q).is("exceed",S(Me)),{[S(Q).b("group")]:e.$slots.prepend||e.$slots.append,[S(Q).bm("group","append")]:e.$slots.append,[S(Q).bm("group","prepend")]:e.$slots.prepend,[S(Q).m("prefix")]:e.$slots.prefix||e.prefixIcon,[S(Q).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[S(Q).bm("suffix","password-clear")]:S(Ee)&&S(Fe)},e.$attrs.class],style:S($e),role:e.containerRole,onMouseenter:Je,onMouseleave:Ge}),[h(" input "),"textarea"!==e.type?(b(),g(w,{key:0},[h(" prepend slot "),e.$slots.prepend?(b(),g("div",{key:0,class:I(S(Q).be("group","prepend"))},[k(e.$slots,"prepend")],2)):h("v-if",!0),$("div",{class:I([S(Q).e("wrapper"),S(Q).is("focus",le.value)])},[h(" prefix slot "),e.$slots.prefix||e.prefixIcon?(b(),g("span",{key:0,class:I(S(Q).e("prefix"))},[$("span",{class:I(S(Q).e("prefix-inner"))},[k(e.$slots,"prefix"),e.prefixIcon?(b(),z(S(G),{key:0,class:I(S(Q).e("icon"))},{default:C((()=>[(b(),z(E(e.prefixIcon)))])),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),$("input",F({id:S(q),ref_key:"input",ref:oe,class:S(Q).e("inner")},S(K),{type:e.showPassword?ve.value?"text":"password":e.type,disabled:S(Z),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:u.form,onCompositionstart:He,onCompositionupdate:Ke,onCompositionend:Te,onInput:Re,onFocus:qe,onBlur:De,onChange:Oe,onKeydown:Ue}),null,16,ge),h(" suffix slot "),S(Ve)?(b(),g("span",{key:1,class:I(S(Q).e("suffix"))},[$("span",{class:I(S(Q).e("suffix-inner"))},[S(Ee)&&S(Fe)&&S(je)?h("v-if",!0):(b(),g(w,{key:0},[k(e.$slots,"suffix"),e.suffixIcon?(b(),z(S(G),{key:0,class:I(S(Q).e("icon"))},{default:C((()=>[(b(),z(E(e.suffixIcon)))])),_:1},8,["class"])):h("v-if",!0)],64)),S(Ee)?(b(),z(S(G),{key:1,class:I([S(Q).e("icon"),S(Q).e("clear")]),onMousedown:M(S(V),["prevent"]),onClick:Ye},{default:C((()=>[j(S(P))])),_:1},8,["class","onMousedown"])):h("v-if",!0),S(Fe)?(b(),z(S(G),{key:2,class:I([S(Q).e("icon"),S(Q).e("password")]),onClick:Le},{default:C((()=>[(b(),z(E(S(ke))))])),_:1},8,["class"])):h("v-if",!0),S(je)?(b(),g("span",{key:3,class:I(S(Q).e("count"))},[$("span",{class:I(S(Q).e("count-inner"))},_(S(Pe))+" / "+_(S(K).maxlength),3)],2)):h("v-if",!0),S(Ie)&&S(Se)&&S(we)?(b(),z(S(G),{key:4,class:I([S(Q).e("icon"),S(Q).e("validateIcon"),S(Q).is("loading","validating"===S(Ie))])},{default:C((()=>[(b(),z(E(S(Se))))])),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),e.$slots.append?(b(),g("div",{key:1,class:I(S(Q).be("group","append"))},[k(e.$slots,"append")],2)):h("v-if",!0)],64)):(b(),g(w,{key:1},[h(" textarea "),$("textarea",F({id:S(q),ref_key:"textarea",ref:ne,class:S(te).e("inner")},S(K),{tabindex:e.tabindex,disabled:S(Z),readonly:e.readonly,autocomplete:e.autocomplete,style:S(ze),"aria-label":e.label,placeholder:e.placeholder,form:u.form,onCompositionstart:He,onCompositionupdate:Ke,onCompositionend:Te,onInput:Re,onFocus:qe,onBlur:De,onChange:Oe,onKeydown:Ue}),null,16,he),S(je)?(b(),g("span",{key:0,style:B(fe.value),class:I(S(Q).e("count"))},_(S(Pe))+" / "+_(S(K).maxlength),7)):h("v-if",!0)],64))],16,be)),[[y,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{ie as C,Ie as E,re as I,se as U,ce as a,le as d,ne as t,de as u};
