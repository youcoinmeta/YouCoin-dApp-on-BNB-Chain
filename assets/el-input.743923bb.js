import{c as e,L as t,H as a,r as o,i as n,h as l,at as s,Z as i,O as r,d as u,av as d,aw as p,ax as c,ay as v,az as f,M as m,n as y,v as x,o as b,a as g,y as h,F as w,x as I,u as S,a3 as k,e as $,g as z,w as C,a6 as E,I as F,b as P,ae as j,q as M,ao as V,t as B,a4 as _,S as N}from"./index.97766ee1.js";import{p as A,j as H,k as O,b as R,d as K,i as L,V as T,a as W,E as G,_ as Z,w as q}from"./index.264cccf6.js";import{H as D,G as U,K as J}from"./index.6204fe79.js";import{u as Q,m as X,a as Y,b as ee}from"./index.c34cdca4.js";import{u as te,i as ae}from"./el-popper.02527126.js";class oe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function ne(e,t){throw new oe(`[${e}] ${t}`)}function le(e,t){}const se="update:modelValue",ie="change",re="input",ue=["class","style"],de=/^on[A-Z]/,pe=()=>({form:a(H,void 0),formItem:a(O,void 0)}),ce=(t,{formItemContext:a,disableIdGeneration:r,disableIdManagement:u})=>{r||(r=o(!1)),u||(u=o(!1));const d=o();let p;const c=e((()=>{var e;return!!(!t.label&&a&&a.inputIds&&(null==(e=a.inputIds)?void 0:e.length)<=1)}));return n((()=>{p=l([s(t,"id"),r],(([e,t])=>{const o=null!=e?e:t?void 0:te().value;o!==d.value&&((null==a?void 0:a.removeInputId)&&(d.value&&a.removeInputId(d.value),(null==u?void 0:u.value)||t||!o||a.addInputId(o)),d.value=o)}),{immediate:!0})})),i((()=>{p&&p(),(null==a?void 0:a.removeInputId)&&d.value&&a.removeInputId(d.value)})),{isLabeledByFormItem:c,inputId:d}};let ve;const fe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function me(e,t=1,a){var o;ve||(ve=document.createElement("textarea"),document.body.appendChild(ve));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:fe.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);ve.setAttribute("style",`${i};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ve.value=e.value||e.placeholder||"";let r=ve.scrollHeight;const u={};"border-box"===s?r+=l:"content-box"===s&&(r-=n),ve.value="";const d=ve.scrollHeight-n;if(D(t)){let e=d*t;"border-box"===s&&(e=e+n+l),r=Math.max(e,r),u.minHeight=`${e}px`}if(D(a)){let e=d*a;"border-box"===s&&(e=e+n+l),r=Math.min(e,r)}return u.height=`${r}px`,null==(o=ve.parentNode)||o.removeChild(ve),ve=void 0,u}const ye=R({id:{type:String,default:void 0},size:Q,disabled:Boolean,modelValue:{type:K([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:K([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:L},prefixIcon:{type:L},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:K([Object,Array,String]),default:()=>X({})}}),xe={[se]:e=>r(e),input:e=>r(e),change:e=>r(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},be=["role"],ge=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],he=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],we=u({name:"ElInput",inheritAttrs:!1});const Ie=q(Z(u({...we,props:ye,emits:xe,setup(a,{expose:i,emit:r}){const u=a,H=d(),O=p(),R=e((()=>{const e={};return"combobox"===u.containerRole&&(e["aria-haspopup"]=H["aria-haspopup"],e["aria-owns"]=H["aria-owns"],e["aria-expanded"]=H["aria-expanded"]),e})),K=((a={})=>{const{excludeListeners:o=!1,excludeKeys:n}=a,l=e((()=>((null==n?void 0:n.value)||[]).concat(ue))),s=t();return e(s?()=>{var e;return A(Object.entries(null==(e=s.proxy)?void 0:e.$attrs).filter((([e])=>!(l.value.includes(e)||o&&de.test(e)))))}:()=>({}))})({excludeKeys:e((()=>Object.keys(R.value)))}),{form:L,formItem:Z}=pe(),{inputId:q}=ce(u,{formItemContext:Z}),D=Y(),Q=ee(),X=U("input"),te=U("textarea"),oe=c(),ne=c(),le=o(!1),ie=o(!1),re=o(!1),ve=o(!1),fe=o(),ye=c(u.inputStyle),xe=e((()=>oe.value||ne.value)),we=e((()=>{var e;return null!=(e=null==L?void 0:L.statusIcon)&&e})),Ie=e((()=>(null==Z?void 0:Z.validateState)||"")),Se=e((()=>Ie.value&&T[Ie.value])),ke=e((()=>ve.value?v:f)),$e=e((()=>[H.style,u.inputStyle])),ze=e((()=>[u.inputStyle,ye.value,{resize:u.resize}])),Ce=e((()=>ae(u.modelValue)?"":String(u.modelValue))),Ee=e((()=>u.clearable&&!Q.value&&!u.readonly&&!!Ce.value&&(le.value||ie.value))),Fe=e((()=>u.showPassword&&!Q.value&&!u.readonly&&!!Ce.value&&(!!Ce.value||le.value))),Pe=e((()=>u.showWordLimit&&!!K.value.maxlength&&("text"===u.type||"textarea"===u.type)&&!Q.value&&!u.readonly&&!u.showPassword)),je=e((()=>Array.from(Ce.value).length)),Me=e((()=>!!Pe.value&&je.value>Number(K.value.maxlength))),Ve=e((()=>!!O.suffix||!!u.suffixIcon||Ee.value||u.showPassword||Pe.value||!!Ie.value&&we.value)),[Be,_e]=function(e){const t=o();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(oe);W(ne,(e=>{if(!Pe.value||"both"!==u.resize)return;const t=e[0],{width:a}=t.contentRect;fe.value={right:`calc(100% - ${a+15+6}px)`}}));const Ne=()=>{const{type:e,autosize:t}=u;if(J&&"textarea"===e)if(t){const e=N(t)?t.minRows:void 0,a=N(t)?t.maxRows:void 0;ye.value={...me(ne.value,e,a)}}else ye.value={minHeight:me(ne.value).minHeight}},Ae=()=>{const e=xe.value;e&&e.value!==Ce.value&&(e.value=Ce.value)},He=async e=>{Be();let{value:t}=e.target;u.formatter&&(t=u.parser?u.parser(t):t,t=u.formatter(t)),re.value||(t!==Ce.value?(r(se,t),r("input",t),await m(),Ae(),_e()):Ae())},Oe=e=>{r("change",e.target.value)},Re=e=>{r("compositionstart",e),re.value=!0},Ke=e=>{var t;r("compositionupdate",e);const a=null==(t=e.target)?void 0:t.value,o=a[a.length-1]||"";re.value=!(e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e))(o)},Le=e=>{r("compositionend",e),re.value&&(re.value=!1,He(e))},Te=()=>{ve.value=!ve.value,We()},We=async()=>{var e;await m(),null==(e=xe.value)||e.focus()},Ge=e=>{le.value=!0,r("focus",e)},Ze=e=>{var t;le.value=!1,r("blur",e),u.validateEvent&&(null==(t=null==Z?void 0:Z.validate)||t.call(Z,"blur").catch((e=>{})))},qe=e=>{ie.value=!1,r("mouseleave",e)},De=e=>{ie.value=!0,r("mouseenter",e)},Ue=e=>{r("keydown",e)},Je=()=>{r(se,""),r("change",""),r("clear"),r("input","")};return l((()=>u.modelValue),(()=>{var e;m((()=>Ne())),u.validateEvent&&(null==(e=null==Z?void 0:Z.validate)||e.call(Z,"change").catch((e=>{})))})),l(Ce,(()=>Ae())),l((()=>u.type),(async()=>{await m(),Ae(),Ne()})),n((()=>{!u.formatter&&u.parser,Ae(),m(Ne)})),i({input:oe,textarea:ne,ref:xe,textareaStyle:ze,autosize:s(u,"autosize"),focus:We,blur:()=>{var e;return null==(e=xe.value)?void 0:e.blur()},select:()=>{var e;null==(e=xe.value)||e.select()},clear:Je,resizeTextarea:Ne}),(e,t)=>y((b(),g("div",F(S(R),{class:["textarea"===e.type?S(te).b():S(X).b(),S(X).m(S(D)),S(X).is("disabled",S(Q)),S(X).is("exceed",S(Me)),{[S(X).b("group")]:e.$slots.prepend||e.$slots.append,[S(X).bm("group","append")]:e.$slots.append,[S(X).bm("group","prepend")]:e.$slots.prepend,[S(X).m("prefix")]:e.$slots.prefix||e.prefixIcon,[S(X).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[S(X).bm("suffix","password-clear")]:S(Ee)&&S(Fe)},e.$attrs.class],style:S($e),role:e.containerRole,onMouseenter:De,onMouseleave:qe}),[h(" input "),"textarea"!==e.type?(b(),g(w,{key:0},[h(" prepend slot "),e.$slots.prepend?(b(),g("div",{key:0,class:I(S(X).be("group","prepend"))},[k(e.$slots,"prepend")],2)):h("v-if",!0),$("div",{class:I([S(X).e("wrapper"),S(X).is("focus",le.value)])},[h(" prefix slot "),e.$slots.prefix||e.prefixIcon?(b(),g("span",{key:0,class:I(S(X).e("prefix"))},[$("span",{class:I(S(X).e("prefix-inner"))},[k(e.$slots,"prefix"),e.prefixIcon?(b(),z(S(G),{key:0,class:I(S(X).e("icon"))},{default:C((()=>[(b(),z(E(e.prefixIcon)))])),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),$("input",F({id:S(q),ref_key:"input",ref:oe,class:S(X).e("inner")},S(K),{type:e.showPassword?ve.value?"text":"password":e.type,disabled:S(Q),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:u.form,onCompositionstart:Re,onCompositionupdate:Ke,onCompositionend:Le,onInput:He,onFocus:Ge,onBlur:Ze,onChange:Oe,onKeydown:Ue}),null,16,ge),h(" suffix slot "),S(Ve)?(b(),g("span",{key:1,class:I(S(X).e("suffix"))},[$("span",{class:I(S(X).e("suffix-inner"))},[S(Ee)&&S(Fe)&&S(Pe)?h("v-if",!0):(b(),g(w,{key:0},[k(e.$slots,"suffix"),e.suffixIcon?(b(),z(S(G),{key:0,class:I(S(X).e("icon"))},{default:C((()=>[(b(),z(E(e.suffixIcon)))])),_:1},8,["class"])):h("v-if",!0)],64)),S(Ee)?(b(),z(S(G),{key:1,class:I([S(X).e("icon"),S(X).e("clear")]),onMousedown:M(S(V),["prevent"]),onClick:Je},{default:C((()=>[P(S(j))])),_:1},8,["class","onMousedown"])):h("v-if",!0),S(Fe)?(b(),z(S(G),{key:2,class:I([S(X).e("icon"),S(X).e("password")]),onClick:Te},{default:C((()=>[(b(),z(E(S(ke))))])),_:1},8,["class"])):h("v-if",!0),S(Pe)?(b(),g("span",{key:3,class:I(S(X).e("count"))},[$("span",{class:I(S(X).e("count-inner"))},B(S(je))+" / "+B(S(K).maxlength),3)],2)):h("v-if",!0),S(Ie)&&S(Se)&&S(we)?(b(),z(S(G),{key:4,class:I([S(X).e("icon"),S(X).e("validateIcon"),S(X).is("loading","validating"===S(Ie))])},{default:C((()=>[(b(),z(E(S(Se))))])),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),e.$slots.append?(b(),g("div",{key:1,class:I(S(X).be("group","append"))},[k(e.$slots,"append")],2)):h("v-if",!0)],64)):(b(),g(w,{key:1},[h(" textarea "),$("textarea",F({id:S(q),ref_key:"textarea",ref:ne,class:S(te).e("inner")},S(K),{tabindex:e.tabindex,disabled:S(Q),readonly:e.readonly,autocomplete:e.autocomplete,style:S(ze),"aria-label":e.label,placeholder:e.placeholder,form:u.form,onCompositionstart:Re,onCompositionupdate:Ke,onCompositionend:Le,onInput:He,onFocus:Ge,onBlur:Ze,onChange:Oe,onKeydown:Ue}),null,16,he),S(Pe)?(b(),g("span",{key:0,style:_(fe.value),class:I(S(X).e("count"))},B(S(je))+" / "+B(S(K).maxlength),7)):h("v-if",!0)],64))],16,be)),[[x,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{ie as C,Ie as E,re as I,se as U,ce as a,le as d,ne as t,pe as u};
