import{c as e,j as a,b as t,k as r,l,p as o}from"./index.d6a79570.js";import{h as n,z as i,g as s,D as u,a6 as d,a7 as m,a8 as c,a5 as v,w as b}from"./index.6399d1e7.js";import{d as g,r as h,c as p,b as f}from"./index.a4b4b41e.js";const[y,V]=n("slider");const x=b(g({name:y,props:{min:i(0),max:i(100),step:i(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:s,buttonSize:s,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}},emits:["change","dragEnd","dragStart","update:modelValue"],setup(n,{emit:i,slots:s}){let b,g,y;const x=h(),w=h(),N=h(),S=e(),C=p((()=>Number(n.max)-Number(n.min))),k=p((()=>{const e=n.vertical?"width":"height";return{background:n.inactiveColor,[e]:u(n.barHeight)}})),B=e=>n.range&&Array.isArray(e),j=()=>{const{modelValue:e,min:a}=n;return B(e)?100*(e[1]-e[0])/C.value+"%":100*(e-Number(a))/C.value+"%"},z=p((()=>{const e={[n.vertical?"height":"width"]:j(),background:n.activeColor};N.value&&(e.transition="none");return e[n.vertical?n.reverse?"bottom":"top":n.reverse?"right":"left"]=(()=>{const{modelValue:e,min:a}=n;return B(e)?100*(e[0]-Number(a))/C.value+"%":"0%"})(),e})),A=e=>{const a=+n.min,t=+n.max,r=+n.step;e=v(e,a,t);const l=Math.round((e-a)/r)*r;return m(a,l)},T=(e,a)=>{e=B(e)?(e=>{var a,t;const r=null!=(a=e[0])?a:Number(n.min),l=null!=(t=e[1])?t:Number(n.max);return r>l?[l,r]:[r,l]})(e).map(A):A(e),d(e,n.modelValue)||i("update:modelValue",e),a&&!d(e,y)&&i("change",e)},X=e=>{if(e.stopPropagation(),n.disabled||n.readonly)return;const{min:a,reverse:t,vertical:l,modelValue:o}=n,i=r(x),s=l?i.height:i.width,u=Number(a)+(l?t?i.bottom-e.clientY:e.clientY-i.top:t?i.right-e.clientX:e.clientX-i.left)/s*C.value;if(B(o)){const[e,a]=o;T(u<=(e+a)/2?[u,a]:[e,u],!0)}else T(u,!0)},Y=e=>{n.disabled||n.readonly||("dragging"===N.value&&(T(g,!0),i("dragEnd",e)),N.value="")},E=e=>{if("number"==typeof e){return V("button-wrapper",["left","right"][e])}return V("button-wrapper",n.reverse?"left":"right")},H=(e,a)=>{if("number"==typeof a){const t=s[0===a?"left-button":"right-button"];if(t)return t({value:e})}return s.button?s.button({value:e}):f("div",{class:V("button"),style:c(n.buttonSize)},null)},P=e=>{const a="number"==typeof e?n.modelValue[e]:n.modelValue;return f("div",{ref:w,role:"slider",class:E(e),tabindex:n.disabled?void 0:0,"aria-valuemin":n.min,"aria-valuenow":a,"aria-valuemax":n.max,"aria-disabled":n.disabled||void 0,"aria-readonly":n.readonly||void 0,"aria-orientation":n.vertical?"vertical":"horizontal",onTouchstartPassive:a=>{"number"==typeof e&&(b=e),(e=>{n.disabled||n.readonly||(S.start(e),g=n.modelValue,y=B(g)?g.map(A):A(g),N.value="start")})(a)},onTouchend:Y,onTouchcancel:Y,onClick:l},[H(a,e)])};return T(n.modelValue),a((()=>n.modelValue)),t("touchmove",(e=>{if(n.disabled||n.readonly)return;"start"===N.value&&i("dragStart",e),o(e,!0),S.move(e),N.value="dragging";const a=r(x);let t=(n.vertical?S.deltaY.value:S.deltaX.value)/(n.vertical?a.height:a.width)*C.value;if(n.reverse&&(t=-t),B(y)){const e=n.reverse?1-b:b;g[e]=y[e]+t}else g=y+t;T(g)}),{target:w}),()=>f("div",{ref:x,style:k.value,class:V({vertical:n.vertical,disabled:n.disabled}),onClick:X},[f("div",{class:V("bar"),style:z.value},[n.range?[P(0),P(1)]:P()])])}}));export{x as S};
