import{I as e,K as n,f as t,r as o,B as a,D as s,L as l,k as r,u as i,M as c,G as u,l as d,N as v,C as p,O as f,E as h,d as m,g as y,T as w,v as b,x as g,P as x,F as k,J as O}from"./index.72d226ca.js";import{i as C,a as I,n as S,e as T,b as z,t as B,u as L,c as E,g as A,d as P,w as Y,m as j,f as R,I as X}from"./index.4380caec.js";var D="undefined"!=typeof window;function H(e){return D?requestAnimationFrame(e):-1}function N(e){H((()=>H(e)))}var V=(e,n)=>({top:0,left:0,right:e,bottom:n,width:e,height:n}),F=e=>{const n=i(e);if(n===window){const e=n.innerWidth,t=n.innerHeight;return V(e,t)}return(null==n?void 0:n.getBoundingClientRect)?n.getBoundingClientRect():V(0,0)};function M(a){const s=e(a,null);if(s){const e=c(),{link:o,unlink:a,internalChildren:l}=s;o(e),n((()=>a(e)));return{parent:s,index:t((()=>l.indexOf(e)))}}return{parent:null,index:o(-1)}}var W,$,K=(e,n)=>{const t=e.indexOf(n);return-1===t?e.findIndex((e=>void 0!==n.key&&null!==n.key&&e.type===n.type&&e.key===n.key)):t};function q(e,n,t){const o=function(e){const n=[],t=e=>{Array.isArray(e)&&e.forEach((e=>{var o;f(e)&&(n.push(e),(null==(o=e.component)?void 0:o.subTree)&&(n.push(e.component.subTree),t(e.component.subTree.children)),e.children&&t(e.children))}))};return t(e),n}(e.subTree.children);t.sort(((e,n)=>K(o,e.vnode)-K(o,n.vnode)));const a=t.map((e=>e.proxy));n.sort(((e,n)=>a.indexOf(e)-a.indexOf(n)))}function G(e){const n=a([]),t=a([]),o=c();return{children:n,linkChildren:a=>{u(e,Object.assign({link:e=>{e.proxy&&(t.push(e),n.push(e.proxy),q(o,n,t))},unlink:e=>{const o=t.indexOf(e);n.splice(o,1),t.splice(o,1)},children:n,internalChildren:t},a))}}}function J(e){let n;d((()=>{e(),v((()=>{n=!0}))})),p((()=>{n&&e()}))}function Q(e,t,o={}){if(!D)return;const{target:a=window,passive:c=!1,capture:u=!1}=o;let d,v=!1;const p=n=>{if(v)return;const o=i(n);o&&!d&&(o.addEventListener(e,t,{capture:u,passive:c}),d=!0)},f=n=>{if(v)return;const o=i(n);o&&d&&(o.removeEventListener(e,t,u),d=!1)};let h;return n((()=>f(a))),s((()=>f(a))),J((()=>p(a))),l(a)&&(h=r(a,((e,n)=>{f(n),p(e)}))),()=>{null==h||h(),f(a),v=!0}}var U,Z=/scroll|auto|overlay/i,_=D?window:void 0;function ee(e){return"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType}function ne(){if(!U&&(U=o("visible"),D)){const e=()=>{U.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return U}var te=Symbol("van-field");function oe(n){const t=e(te,null);t&&!t.customValue.value&&(t.customValue.value=n,r(n,(()=>{t.resetValidation(),t.validateWithTrigger("onChange")})))}function ae(e,n){"scrollTop"in e?e.scrollTop=n:e.scrollTo(e.scrollX,n)}function se(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function le(e){ae(window,e),ae(document.body,e)}const re=C();function ie(){re&&le(se())}const ce=e=>e.stopPropagation();function ue(e,n){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),n&&ce(e)}function de(e){const n=i(e);if(!n)return!1;const t=window.getComputedStyle(n),o="none"===t.display,a=null===n.offsetParent&&"fixed"!==t.position;return o||a}const{width:ve,height:pe}=function(){if(!W&&(W=o(0),$=o(0),D)){const e=()=>{W.value=window.innerWidth,$.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:W,height:$}}(),fe="van-hairline--top-bottom",he=Symbol("van-form");const me=Symbol();function ye(n){const t=e(me,null);t&&r(t,(e=>{e&&n()}))}function we(e){const n=c();n&&T(n.proxy,e)}const be={show:Boolean,zIndex:z,overlay:B,duration:z,teleport:[String,Object],lockScroll:B,lazyRender:B,beforeClose:Function,overlayStyle:Object,overlayClass:L,transitionAppear:Boolean,closeOnClickOverlay:B};function ge(){const e=o(0),n=o(0),t=o(0),a=o(0),s=o(0),l=o(0),r=o(""),i=()=>{t.value=0,a.value=0,s.value=0,l.value=0,r.value=""};return{move:o=>{const i=o.touches[0];t.value=(i.clientX<0?0:i.clientX)-e.value,a.value=i.clientY-n.value,s.value=Math.abs(t.value),l.value=Math.abs(a.value);var c,u;(!r.value||s.value<10&&l.value<10)&&(r.value=(c=s.value,u=l.value,c>u?"horizontal":u>c?"vertical":""))},start:t=>{i(),e.value=t.touches[0].clientX,n.value=t.touches[0].clientY},reset:i,startX:e,startY:n,deltaX:t,deltaY:a,offsetX:s,offsetY:l,direction:r,isVertical:()=>"vertical"===r.value,isHorizontal:()=>"horizontal"===r.value}}let xe=0;const ke="van-overflow-hidden";function Oe(e,n){const t=ge(),o=n=>{t.move(n);const o=t.deltaY.value>0?"10":"01",a=function(e,n=_){let t=e;for(;t&&t!==n&&ee(t);){const{overflowY:e}=window.getComputedStyle(t);if(Z.test(e))return t;t=t.parentNode}return n}(n.target,e.value),{scrollHeight:s,offsetHeight:l,scrollTop:r}=a;let i="11";0===r?i=l>=s?"00":"01":r+l>=s&&(i="10"),"11"===i||!t.isVertical()||parseInt(i,2)&parseInt(o,2)||ue(n,!0)},a=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",o,{passive:!1}),xe||document.body.classList.add(ke),xe++},l=()=>{xe&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",o),xe--,xe||document.body.classList.remove(ke))},i=()=>n()&&l();J((()=>n()&&a())),s(i),h(i),r(n,(e=>{e?a():l()}))}function Ce(e){const n=o(!1);return r(e,(e=>{e&&(n.value=e)}),{immediate:!0}),e=>()=>n.value?e():null}const[Ie,Se]=E("overlay");const Te=Y(m({name:Ie,props:{show:Boolean,zIndex:z,duration:z,className:L,lockScroll:B,lazyRender:B,customStyle:Object},setup(e,{slots:n}){const t=o(),a=Ce((()=>e.show||!e.lazyRender))((()=>{var o;const a=T(A(e.zIndex),e.customStyle);return P(e.duration)&&(a.animationDuration=`${e.duration}s`),b(y("div",{ref:t,style:a,class:[Se(),e.className]},[null==(o=n.default)?void 0:o.call(n)]),[[g,e.show]])}));return Q("touchmove",(n=>{e.lockScroll&&ue(n,!0)}),{target:t}),()=>y(w,{name:"van-fade",appear:!0},{default:a})}})),ze=T({},be,{round:Boolean,position:j("center"),closeIcon:j("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:j("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Be,Le]=E("popup");const Ee=Y(m({name:Be,inheritAttrs:!1,props:ze,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:a,slots:l}){let i,c;const f=o(),h=o(),m=Ce((()=>e.show||!e.lazyRender)),C=t((()=>{const n={zIndex:f.value};if(P(e.duration)){n["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`}return n})),T=()=>{i||(i=!0,f.value=void 0!==e.zIndex?+e.zIndex:R(),n("open"))},z=()=>{i&&function(e,{args:n=[],done:t,canceled:o}){if(e){const a=e.apply(null,n);I(a)?a.then((e=>{e?t():o&&o()})).catch(S):a?t():o&&o()}else t()}(e.beforeClose,{done(){i=!1,n("close"),n("update:show",!1)}})},B=t=>{n("clickOverlay",t),e.closeOnClickOverlay&&z()},L=()=>{if(e.overlay)return y(Te,{show:e.show,class:e.overlayClass,zIndex:f.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:B},{default:l["overlay-content"]})},E=e=>{n("clickCloseIcon",e),z()},A=()=>{if(e.closeable)return y(X,{role:"button",tabindex:0,name:e.closeIcon,class:[Le("close-icon",e.closeIconPosition),"van-haptics-feedback"],classPrefix:e.iconPrefix,onClick:E},null)},Y=()=>n("opened"),j=()=>n("closed"),D=e=>n("keydown",e),H=m((()=>{var n;const{round:t,position:o,safeAreaInsetTop:s,safeAreaInsetBottom:r}=e;return b(y("div",O({ref:h,style:C.value,role:"dialog",tabindex:0,class:[Le({round:t,[o]:o}),{"van-safe-area-top":s,"van-safe-area-bottom":r}],onKeydown:D},a),[null==(n=l.default)?void 0:n.call(l),A()]),[[g,e.show]])})),N=()=>{const{position:n,transition:t,transitionAppear:o}=e;return y(w,{name:t||("center"===n?"van-fade":`van-popup-slide-${n}`),appear:o,onAfterEnter:Y,onAfterLeave:j},{default:H})};return r((()=>e.show),(e=>{e&&!i&&(T(),0===a.tabindex&&v((()=>{var e;null==(e=h.value)||e.focus()}))),!e&&i&&(i=!1,n("close"))})),we({popupRef:h}),Oe(h,(()=>e.show&&e.lockScroll)),Q("popstate",(()=>{e.closeOnPopstate&&(z(),c=!1)})),d((()=>{e.show&&T()})),p((()=>{c&&(n("update:show",!0),c=!1)})),s((()=>{e.show&&e.teleport&&(z(),c=!0)})),u(me,(()=>e.show)),()=>e.teleport?y(x,{to:e.teleport},{default:()=>[L(),N()]}):y(k,null,[L(),N()])}}));export{fe as B,te as C,he as F,Ee as P,we as a,Q as b,ge as c,G as d,pe as e,ne as f,se as g,N as h,de as i,oe as j,F as k,ce as l,Ce as m,H as n,ye as o,ue as p,ie as r,le as s,M as u,ve as w};
