import{d as e,m as a,y as r}from"./index.5403ce05.js";import{a as t,c as l,p as n}from"./index.546d84c6.js";import{c as o,q as i,n as s,d,z as u,A as c,y as m,x as v,w as g}from"./index.1a2a6857.js";import{d as b,r as h,f as p,g as f}from"./index.0c2b9d6b.js";const[y,x]=o("slider");const V=g(b({name:y,props:{min:i(0),max:i(100),step:i(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:s,buttonSize:s,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}},emits:["change","dragEnd","dragStart","update:modelValue"],setup(o,{emit:i,slots:s}){let g,b,y;const V=h(),w=[h(),h()],N=h(),S=t(),A=p(()=>Number(o.max)-Number(o.min)),C=p(()=>{const e=o.vertical?"width":"height";return{background:o.inactiveColor,[e]:d(o.barHeight)}}),B=e=>o.range&&Array.isArray(e),j=()=>{const{modelValue:e,min:a}=o;return B(e)?100*(e[1]-e[0])/A.value+"%":100*(e-Number(a))/A.value+"%"},k=p(()=>{const e=o.vertical?"height":"width",a={[e]:j(),background:o.activeColor};N.value&&(a.transition="none");return a[o.vertical?o.reverse?"bottom":"top":o.reverse?"right":"left"]=(()=>{const{modelValue:e,min:a}=o;return B(e)?100*(e[0]-Number(a))/A.value+"%":"0%"})(),a}),z=e=>{const a=+o.min,r=+o.max,t=+o.step;e=v(e,a,r);const l=Math.round((e-a)/t)*t;return c(a,l)},E=()=>{const e=o.modelValue;y=B(e)?e.map(z):z(e)},T=(e,a)=>{e=B(e)?(e=>{var a,r;const t=null!=(a=e[0])?a:Number(o.min),l=null!=(r=e[1])?r:Number(o.max);return t>l?[l,t]:[t,l]})(e).map(z):z(e),u(e,o.modelValue)||i("update:modelValue",e),a&&!u(e,y)&&i("change",e)},X=e=>{if(e.stopPropagation(),o.disabled||o.readonly)return;E();const{min:a,reverse:t,vertical:l,modelValue:n}=o,i=r(V),s=l?i.height:i.width,d=Number(a)+(l?t?i.bottom-e.clientY:e.clientY-i.top:t?i.right-e.clientX:e.clientX-i.left)/s*A.value;if(B(n)){const[e,a]=n;T(d<=(e+a)/2?[d,a]:[e,d],!0)}else T(d,!0)},Y=e=>{if(o.disabled||o.readonly)return;"start"===N.value&&i("dragStart",e),n(e,!0),S.move(e),N.value="dragging";const a=r(V);let t=(o.vertical?S.deltaY.value:S.deltaX.value)/(o.vertical?a.height:a.width)*A.value;if(o.reverse&&(t=-t),B(y)){const e=o.reverse?1-g:g;b[e]=y[e]+t}else b=y+t;T(b)},H=e=>{o.disabled||o.readonly||("dragging"===N.value&&(T(b,!0),i("dragEnd",e)),N.value="")},P=e=>{if("number"==typeof e){return x("button-wrapper",["left","right"][e])}return x("button-wrapper",o.reverse?"left":"right")},q=(e,a)=>{const r="dragging"===N.value;if("number"==typeof a){const t=s[0===a?"left-button":"right-button"];let l;if(r&&Array.isArray(b)&&(l=b[0]>b[1]?1^g:g),t)return t({value:e,dragging:r,dragIndex:l})}return s.button?s.button({value:e,dragging:r}):f("div",{class:x("button"),style:m(o.buttonSize)},null)},I=e=>{const a="number"==typeof e?o.modelValue[e]:o.modelValue;return f("div",{ref:w[null!=e?e:0],role:"slider",class:P(e),tabindex:o.disabled?void 0:0,"aria-valuemin":o.min,"aria-valuenow":a,"aria-valuemax":o.max,"aria-disabled":o.disabled||void 0,"aria-readonly":o.readonly||void 0,"aria-orientation":o.vertical?"vertical":"horizontal",onTouchstartPassive:a=>{"number"==typeof e&&(g=e),(e=>{o.disabled||o.readonly||(S.start(e),b=o.modelValue,E(),N.value="start")})(a)},onTouchend:H,onTouchcancel:H,onClick:l},[q(a,e)])};return T(o.modelValue),e(()=>o.modelValue),w.forEach(e=>{a("touchmove",Y,{target:e})}),()=>f("div",{ref:V,style:C.value,class:x({vertical:o.vertical,disabled:o.disabled}),onClick:X},[f("div",{class:x("bar"),style:k.value},[o.range?[I(0),I(1)]:I()])])}}));export{V as S};
