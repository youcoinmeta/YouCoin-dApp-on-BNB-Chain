import{c as e,t,b as l,l as a,w as o,I as n}from"./index.e3573b62.js";import{P as s}from"./index.313e2529.js";import{u as i,e as c,k as u,d as r}from"./contract.33812521.js";import"./el-popper.a4d047ae.js";import{E as d}from"./el-input.bf21035d.js";import{d as v,f as p,g as m,r as f,W as b,l as g,B as I,o as w,i as V,w as y,b as x,t as h,u as A,a as k,v as $,x as S,c as P,y as _,F as D,z as C,n as N,p as T,h as j,_ as U,e as Y,I as B,X as F,P as M,j as H,G as L,av as O,O as R,A as E}from"./index.b9b8891c.js";import{D as G,_ as W}from"./DaoPopup.7e35dd44.js";import{S as z}from"./index.d61cf241.js";import{E as X}from"./el-popover.58410ac5.js";import{B as q}from"./contract.2e12ebec.js";import{i as J,c as K,D as Q}from"./index.f6f59bf0.js";import{u as Z,a as ee,b as te}from"./dao.b17a8f69.js";import{D as le}from"./contract.cfb15a02.js";import{a as ae}from"./utils.8f2af8da.js";import{u as oe}from"./useCopy.3cb7d98c.js";import"./plugin-vue_export-helper.77e5bec8.js";import"./index.184b1246.js";import"./index.667b6b34.js";import"./tip.0c88d7c1.js";const[ne,se]=e("progress");const ie=o(v({name:ne,props:{color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:t,pivotColor:String,trackColor:String,strokeWidth:l,percentage:{type:l,default:0,validator:e=>e>=0&&e<=100}},setup(e){const t=p((()=>e.inactive?void 0:e.color)),l=()=>{const{textColor:l,pivotText:a,pivotColor:o,percentage:n}=e,s=null!=a?a:`${n}%`;if(e.showPivot&&s){const a={color:l,left:+n+"%",transform:`translate(-${+n}%,-50%)`,background:o||t.value};return m("span",{style:a,class:se("pivot",{inactive:e.inactive})},[s])}};return()=>{const{trackColor:o,percentage:n,strokeWidth:s}=e,i={background:o,height:a(s)},c={width:`${n}%`,background:t.value};return m("div",{class:se(),style:i},[m("span",{class:se("portion",{inactive:e.inactive}),style:c},null),l()])}}})),ce=e=>(T("data-v-a835f277"),e=e(),j(),e),ue={class:"popover-info"},re={class:"popover-text"},de={class:"popover-text",style:{"margin-top":"4px"}},ve={class:"popover-time border"},pe=ce((()=>x("i",{class:"icon icon-dao-26"},null,-1))),me={class:"border1"},fe=ce((()=>x("i",{class:"icon icon-dao-26"},null,-1))),be={class:"input item1 input-addvote"},ge={class:"input-label"},Ie={class:"input input-addvote"},we=ce((()=>x("span",{class:"input-label"},null,-1))),Ve=ce((()=>x("div",null,null,-1))),ye={class:"title1"},xe={class:"slider"},he={class:"item item-top"},Ae=ce((()=>x("p",null,h(0),-1))),ke={class:"custom-button"},$e={class:"top"},Se=ce((()=>x("div",{class:"circle"},[x("span",{class:"circle-inner"})],-1))),Pe={class:"bottom"},_e={class:"item item-bottom"},De=ce((()=>x("p",null,"0%",-1))),Ce=ce((()=>x("span",null,h(100)+"%",-1))),Ne={class:"input-box"},Te={class:"input",style:{"margin-right":"12px"}},je={class:"input-label",style:{"margin-right":"12px"}},Ue=ce((()=>x("i",{class:"icon triangle-down"},null,-1))),Ye={class:"select-items"},Be=["onClick"],Fe={class:"input sb"},Me={class:"input-label",style:{"margin-right":"12px"}},He=ce((()=>x("i",{class:"icon triangle-down"},null,-1))),Le={key:0,class:"select-items"},Oe=["onClick"],Re={class:"text"},Ee={class:"text"},Ge={class:"text"},We={class:"text"},ze=U(v({__name:"AddProposalDialog",setup(e){const t=q.clone();t.config({ROUNDING_MODE:1});const l=i(),a=Z(),o=c(),{submitProposal:n}=ee(),s=f(null),{eth:{abi:u}}=new b,r=f("100"),v=f(""),T=f(""),j=f(""),U=f(-1),Y=f(-1),B=f(!1),F=f(!1),M=[2,3,5,7,10];g((()=>{}));const H=J({time:1e4,onFinish:()=>{setTimeout((()=>{a.getSystemInfo()}),6e4)}}),L=I({cur:H.current});H.start();const O=p((()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:t}=a.accountInfo;return Number(t)>e})),R=p((()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:o}=a.accountInfo,{stakeUCON:n}=a.accountInfo,{minStakeUcon:s}=a.daoSystemInfo,i=-1===new t(n).comparedTo(new t(s));return Number(o)>e&&(H.reset(1e3*Number(Number(o)-e)),H.start()),"0"===a.accountInfo.blockFlag&&a.isStake&&l.stakeList.length>0&&!O.value&&!i})),E=p((()=>-1!==U.value&&-1!==Y.value&&""!==T.value&&""!==j.value&&"0"!==Q.value)),Q=p((()=>{if(!r.value)return"0";const{totalVote:e}=a.accountInfo;if("100"==r.value)return e;const l=new t(e).times(new t(r.value)).div(new t(1e20)).decimalPlaces(0).toString(10);return new t(l).times(1e18).decimalPlaces(0).toString(10)})),te=p((()=>{const{totalVote:e}=a.daoSystemInfo,l=a.accountInfo.totalVote;if("0"===e)return"0";return new t(l).div(new t(1e18)).decimalPlaces(0).toString(10)})),oe=p((()=>{const{totalVote:e}=a.accountInfo;return new t(e).div(new t(1e18)).decimalPlaces(0).toString(10)})),ne=p((()=>new t(a.daoSystemInfo.commitProposalBurnUcon).times(new t("1e18")).idiv(o.uconPrice).idiv(t("1000000")).toString(10)));async function se(){if(-1===U.value||""===T.value||""===j.value||-1===Y.value||"0"===Q.value||""===v.value)return;await n("1",u.encodeParameter("string",T.value),u.encodeParameter("string",j.value),(Y.value*le).toString(),U.value.toString(),a.daoSystemInfo.commitProposalBurnUcon,"100"==r.value?a.accountInfo.totalVote:new t(v.value).times(1e18).decimalPlaces(0).toString(10)),a.getSystemInfo(),a.getList(-1,!0),T.value="",j.value="",U.value=-1,Y.value=-1,r.value="100",s.value?.handleClose()}p((()=>"0"));const ie=p((()=>a.accountInfo.totalVote));function ce(e){const l=e.target.value;if(Number(l)<0)return v.value=oe.value,void(r.value="100");const{totalVote:o}=a.accountInfo;if(1===new t(l).times(1e18).comparedTo(new t(ie.value)))return v.value=oe.value,void(r.value="100");if(v.value=l,""===l)return void(r.value="0");const n=new t(o).div(1e18).decimalPlaces(0).times(1e18),s=new t(l).times(1e18).dividedBy(n).times(100).decimalPlaces(0).toString(10);r.value=s}function ze(e){v.value=new t(e).times(new t(oe.value)).div(100).decimalPlaces(0).toString(10)}function Xe(e){r.value="100",v.value=oe.value}return(e,t)=>{const l=X,o=d,n=z,i=W;return w(),V(G,{ref_key:"el",ref:s,classText:"add",title:e.$t("AddVote.title"),disabled:!A(R),onClose:Xe},{content:y((()=>[x("div",be,[x("span",ge,h(e.$t("AddVote.text1")),1),m(o,{class:"value",placeholder:e.$t("AddVote.text2"),maxlength:"30",modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e)},null,8,["placeholder","modelValue"])]),x("div",Ie,[we,m(o,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",placeholder:e.$t("AddVote.text2"),rows:"6",modelValue:j.value,"onUpdate:modelValue":t[1]||(t[1]=e=>j.value=e),onInput:e.handleChangeContent},null,8,["placeholder","modelValue","onInput"])]),Ve,x("h4",ye,[x("span",null,h(e.$t("AddVote.text14")),1),m(o,{class:"number",type:"number",modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),placeholder:"0",onBlur:ce},null,8,["modelValue"])]),x("div",xe,[x("div",he,[x("div",null,[x("span",null,h(e.$t("Vote.text2")),1),Ae]),x("span",null,h(A(te)),1)]),m(n,{modelValue:r.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>r.value=e),ze],"bar-height":"4","active-color":"#FFCD1C"},{button:y((()=>[x("div",ke,[x("div",$e,h(v.value),1),Se,x("div",Pe,h(r.value)+"%",1)])])),_:1},8,["modelValue"]),x("div",_e,[x("div",null,[De,x("span",null,h(e.$t("Vote.text3")),1)]),Ce])]),x("div",Ne,[x("div",Te,[x("span",je,h(e.$t("AddVote.text3")),1),x("div",{class:"select",onClick:t[4]||(t[4]=e=>B.value=!B.value)},[k(h(-1===U.value?e.$t("AddVote.text5"):e.$t("AddVote.type"+(U.value+1)))+" ",1),Ue]),$(x("div",Ye,[(w(),P(D,null,_(3,((t,l)=>x("div",{class:"select-item",onClick:e=>{return t=l,U.value=t,void(B.value=!1);var t}},h(e.$t("AddVote.type"+t)),9,Be))),64))],512),[[S,B.value]])]),x("div",Fe,[x("span",Me,h(e.$t("AddVote.text4")),1),x("div",{class:"select",onClick:t[5]||(t[5]=e=>F.value=!F.value)},[k(h(-1===Y.value?e.$t("AddVote.text5"):e.$t("AddVote.day",{day:Y.value}))+" ",1),He]),F.value?(w(),P("div",Le,[(w(),P(D,null,_(M,(t=>x("div",{class:"select-item",onClick:e=>{return l=t,Y.value=l,void(F.value=!1);var l}},h(e.$t("AddVote.day",{day:t})),9,Oe))),64))])):C("",!0)])]),x("div",Re,h(e.$t("AddVote.text11",{value:A(K)(A(ne)),value2:A(K)(A(a).daoSystemInfo.finishProposalReward),rate:A(ae)(A(a).daoSystemInfo.proposalIncreaseRate)})),1),x("div",Ee,h(e.$t("AddVote.text12")),1),x("div",Ge,h(e.$t("AddVote.text13")),1),x("div",We,h(e.$t("AddVote.text15")),1),m(i,{fee:A(a).daoSystemInfo.commitProposalBurnUcon},null,8,["fee"]),x("div",{class:N(["btn-confirm",{"btn-active":A(E)}]),onClick:se},h(e.$t("Confirm")),3)])),default:y((()=>[A(O)?(w(),P("div",{key:0,class:N(["btn",{"btn-active":A(R)}])},[m(l,{"popper-class":"popover-model",placement:"top",width:"328px",trigger:"hover","propper-style":"{background: blue}"},{reference:y((()=>[x("div",ve,[pe,x("span",me,h(e.$t("Administer.add")),1)])])),default:y((()=>[x("div",ue,[x("div",re,h(e.$t("AddVote.text16")),1),x("div",de,h(e.$t("AddVote.text17",{day:L.cur.days,hour:L.cur.hours,s:L.cur.minutes})),1)])])),_:1})],2)):(w(),P("div",{key:1,class:N(["btn",{"btn-active":A(R)}])},[fe,x("span",null,h(e.$t("Administer.add")),1)],2))])),_:1},8,["title","disabled"])}}}),[["__scopeId","data-v-a835f277"]]),Xe={class:"steps"},qe=U(v({__name:"DaoStepsFail",props:{num:null,active:null,type:null},setup(e){const t=e,l=p((()=>new q(100).div(new q(t.num-1)).decimalPlaces(2).toString(10)));function a(e){return parseFloat(l.value)*e+"%"}return(t,l)=>(w(),P("div",Xe,[(w(!0),P(D,null,_(e.num-1,(t=>(w(),P("span",{class:N(["step-line",{"step-line-active":e.active>=t}])},null,2)))),256)),(w(!0),P(D,null,_(e.num,((l,o)=>(w(),P("div",{class:"step",style:Y({left:a(o)})},[x("span",{class:N(["step-circle",{"step-circle-active":e.active>=o}])},null,2),x("p",{class:N(["step-text",{text1:e.type}])},h(t.$t("Administer.statusFail"+l)),3)],4)))),256))]))}}),[["__scopeId","data-v-5cfae7d6"]]),Je={class:"steps"},Ke=U(v({__name:"DaoSteps",props:{num:null,active:null,type:null},setup(e){const t=e,l=p((()=>new q(100).div(new q(t.num-1)).decimalPlaces(2).toString(10)));function a(e){return parseFloat(l.value)*e+"%"}return(t,l)=>(w(),P("div",Je,[(w(!0),P(D,null,_(e.num-1,(t=>(w(),P("span",{class:N(["step-line",{"step-line-active":e.active>=t}])},null,2)))),256)),(w(!0),P(D,null,_(e.num,((l,o)=>(w(),P("div",{class:"step",style:Y({left:a(o)})},[x("span",{class:N(["step-circle",{"step-circle-active":e.active>=o}])},null,2),x("p",{class:N(["step-text",{text1:e.type}])},h(t.$t("Administer.status"+l)),3)],4)))),256))]))}}),[["__scopeId","data-v-ca85644d"]]),Qe=q.clone();Qe.config({ROUNDING_MODE:1});const{eth:{abi:Ze},utils:et}=new b,tt=Z();te("0x84EF0D09F9Ba4239976CC68cD6e549b5c8729dc1");const lt=c();function at(){i();const e=B("poolItem")||{},t=p((()=>e.proposalInfo)),l=p((()=>e.voteInfo)),a=p((()=>"0"!==tt.accountInfo.blockFlag)),o=p((()=>{const e=lt.account,{operatorType:l,submiter:a}=t.value;return"1"!==l&&a.toLocaleLowerCase()===e.toLocaleLowerCase()||tt.isDaoAdmin})),n=p((()=>"1"===t.value.status)),s=p((()=>{const e=Math.ceil((new Date).getTime()/1e3);return!a.value&&e<Number(t.value.deadline)})),c=p((()=>{t.value;const{agreeAmount:e,disagreeAmount:a}=l.value;return"0"!==e||"0"!==a})),u=p((()=>{const{status:e}=t.value,{agreeAmount:a,disagreeAmount:o}=l.value;return"0"===e?new Qe(a).plus(new Qe(o)).toString(10)===tt.accountInfo.totalVote&&"0"!==tt.accountInfo.totalVote:"0"!==a||"0"!==o})),r=p((()=>"0"!==t.value.status&&"0"===l.value.agreeAmount&&"0"===l.value.disagreeAmount)),d=p((()=>Ze.decodeParameter("uint256",e.proposalInfo.id))),v=p((()=>Ze.decodeParameter("string",e.proposalInfo.subject))),m=p((()=>Ze.decodeParameter("string",e.proposalInfo.content))),f=p((()=>{const{agreeAmount:t="0",disagreeAmount:l="0"}=e.voteInfo;return new Qe(t).plus(new Qe(l)).toString(10)})),b=p((()=>tt.accountInfo.totalVote)),g=p((()=>{const{totalVote:e}=tt.accountInfo;return"0"===e||"0"===f.value?"0":new Qe(f.value).div(new Qe(e)).times(100).decimalPlaces(0).toString(10)})),I=p((()=>{const{status:t}=e.proposalInfo;return t})),w=p((()=>{const{totalVote:e}=tt.accountInfo;return new Qe(e).div(new Qe(1e18)).decimalPlaces(0).toString(10)}));return{poolItem:e,proposalInfo:t,isBlock:a,isVote:s,isExec:o,isFinish:n,noVote:r,isVoted:c,isAllVoted:u,ID:d,subject:v,content:m,userTotal:f,curRate:g,status:I,totalUserVote:w,userTotalVote:b}}const ot=e=>(T("data-v-e583ffcc"),e=e(),j(),e),nt={class:"title1"},st={class:"flex total"},it={class:"title1"},ct={class:"total-item"},ut={class:"total-number disabled number"},rt={class:"title1"},dt={class:"total-item"},vt={class:"title1"},pt={class:"total-item"},mt={class:"total-number disabled number"},ft={class:"slider"},bt={class:"item item-top"},gt=ot((()=>x("p",null,h(0)+"%",-1))),It={class:"custom-button"},wt={class:"top bg"},Vt=ot((()=>x("div",{class:"circle1"},[x("span",{class:"circle1-inner"})],-1))),yt={class:"bottom button-b"},xt={class:"custom-button"},ht={class:"top bg button-t-r"},At=ot((()=>x("div",{class:"circle"},[x("span",{class:"circle-inner"})],-1))),kt={class:"bottom button-b-r"},$t={class:"custom-button"},St={class:"top"},Pt=ot((()=>x("div",{class:"circle"},[x("span",{class:"circle-inner"})],-1))),_t={class:"bottom"},Dt={class:"item item-bottom"},Ct=ot((()=>x("p",null,"0%",-1))),Nt=ot((()=>x("span",null,h(100)+"%",-1))),Tt={class:"select"},jt={class:"select-title"},Ut={class:"tabs-items"},Yt=["onClick"],Bt={class:"circle"},Ft={key:0,class:"circle-inner"},Mt={class:"text"},Ht={class:"text"},Lt=U(v({__name:"VoteDialog",props:{id:null,agree:null,disagree:null,isButton:{type:Boolean}},setup(e){const t=e,l=q.clone();l.config({ROUNDING_MODE:1});const a=Z(),{voteProposal:o,flushProcessProposal:n,finishProposal:s}=ee(),{isVote:i,ID:c,curRate:u,userTotal:r,totalUserVote:v,userTotalVote:b}=at(),I=f(),$=f(),S=f(),T=f(""),j=f(""),U=f("0"),Y=f(1),B=f([0,40]);function M(e){const t=e[0];e[1];B.value[0]=Number(S.value),B.value[1],t>Number(S.value)&&t<B.value[1]&&(B.value[1]=t),X(B.value[1])}function H(e){}p((()=>{const e=Number(T.value)-Number(U.value);return e<=0?0:e}));const L=p((()=>Number(j.value)+Number(U.value)));function O(){"0"===r.value?$.value=100:($.value=100,B.value[0]=Number(u.value),B.value[1]=100,U.value=new l(r.value).div(new l(1e18)).decimalPlaces(0).toString(10)),T.value=new l(a.accountInfo.totalVote).div(new l(1e18)).decimalPlaces(0).toString(10),j.value=new l(a.accountInfo.totalVote).div(new l(1e18)).minus(U.value).decimalPlaces(0).toString(10),S.value=u.value}g((()=>{setTimeout((()=>{O()}),1e3)}));const R=p((()=>Number(j.value)>0));function E(e){const t=e.target.value;if("0"===r.value?B.value[1]=0:$.value=0,t<0||!t)return j.value="0",B.value[1]=B.value[0],$.value=0,void(T.value=U.value);const o=new l(t).plus(U.value).times(1e18);if(1===new l(o).comparedTo(new l(b.value)))return T.value=v.value,j.value=new l(a.accountInfo.totalVote).div(new l(1e18)).minus(U.value).decimalPlaces(0).toString(10),B.value[1]=100,void($.value=100);if(Number(o)<0||-1===new l(o).comparedTo(new l(r.value)))return void(T.value=new l(r.value).div(new l(1e18)).decimalPlaces(0).toString(10));if(T.value=(Number(t)+Number(U.value)).toString(),""===t)return;const{totalVote:n}=a.accountInfo,s=new l(n).div(1e18).decimalPlaces(0).times(1e18),i=new l(T.value).times(1e18).dividedBy(s).times(100).decimalPlaces(0).toString(10);$.value=i,B.value[1]=Number(i)}function X(e){if("0"===r.value?B.value[1]=0:$.value=0,e<=Number(u.value)){$.value=u.value;const{totalVote:e}=a.accountInfo;return j.value="0",T.value=U.value,void new l(r.value).times(100).div(new l(e)).decimalPlaces(20).toString(10)}T.value=new l(e).times(new l(v.value)).div(100).decimalPlaces(0).toString(10),j.value=(Number(T.value)-Number(U.value)).toString(10),Number(T.value)<Number(U.value)&&(T.value=U.value)}function J(e){O(),B.value[1]=100}async function K(){if(!R.value)return;let e="";e=100==$.value||100==B.value[1]?new l(a.accountInfo.totalVote).minus(new l(r.value)).decimalPlaces(0).toString(10):new l(j.value).times(1e18).toString(10),await o(t.id,e,1===Y.value),I.value?.handleClose(),a.getSystemInfo(),a.getList(-1,!0)}return(t,l)=>{const o=d,n=z,s=W;return w(),V(G,{disabled:!A(i),ref_key:"el",ref:I,title:t.$t("DaoRedeem.title1")+" 1/2",classText:"stake-btn",onClose:J},{content:y((()=>[x("h4",nt,[x("span",null,h(t.$t("Vote.text1",{value:A(c)})),1)]),x("div",st,[x("div",it,[x("p",ct,h(t.$t("Vote.text14")),1),x("p",ut,h(U.value),1)]),x("div",rt,[x("p",dt,h(t.$t("Vote.text15")),1),m(o,{class:"number total-number",type:"number",modelValue:j.value,"onUpdate:modelValue":l[0]||(l[0]=e=>j.value=e),placeholder:"0",onBlur:E},null,8,["modelValue"])]),x("div",vt,[x("p",pt,h(t.$t("Vote.text16")),1),x("p",mt,h(A(L)),1)])]),x("div",ft,[x("div",bt,[x("div",null,[x("span",null,h(t.$t("Vote.text2")),1),gt]),x("span",null,h(A(v)),1)]),"0"!==A(r)?(w(),V(n,{key:0,modelValue:B.value,"onUpdate:modelValue":[l[1]||(l[1]=e=>B.value=e),M],range:"","bar-height":"4","inactive-color":"#BABBBC","active-color":"#FFCD1C",onDragEnd:H},{"left-button":y((()=>[x("div",It,[x("div",wt,h(U.value),1),Vt,x("div",yt,h(B.value[0])+"%",1)])])),"right-button":y((()=>[x("div",xt,[x("div",ht,h(T.value),1),At,x("div",kt,h(B.value[1])+"%",1)])])),_:1},8,["modelValue"])):(w(),V(n,{key:1,class:"slider1",modelValue:$.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>$.value=e),X],"bar-height":"4",max:100,"active-color":"#FFCD1C"},{button:y((()=>[x("div",$t,[x("div",St,h(T.value),1),Pt,x("div",_t,h($.value)+"%",1)])])),_:1},8,["modelValue"])),x("div",Dt,[x("div",null,[Ct,x("span",null,h(t.$t("Vote.text3")),1)]),Nt])]),x("div",Tt,[x("h4",jt,h(t.$t("Vote.text4")),1),x("div",Ut,[(w(),P(D,null,_(2,(e=>x("div",{class:"tabs-item",key:e,onClick:t=>{return l=e,void(Y.value=l);var l}},[x("div",Bt,[Y.value===e?(w(),P("span",Ft)):C("",!0)]),k(" "+h(t.$t("Vote.text"+(e+4))),1)],8,Yt))),64))])]),x("div",Mt,h(t.$t("Vote.text7")),1),x("div",Ht,h(t.$t("Vote.text8")),1),m(s,{fee:A(a).daoSystemInfo.voteProposalBurnUcon},null,8,["fee"]),x("div",{class:N(["btn-confirm",{"btn-active":A(R)}]),onClick:K},h(t.$t("Confirm")),3)])),default:y((()=>[e.isButton?(w(),P("div",{key:0,class:N(["btn",{"btn-active":A(i)}])},h(t.$t("Vote.title1")),3)):C("",!0),F(t.$slots,"button",{},void 0,!0)])),_:3},8,["disabled","title"])}}}),[["__scopeId","data-v-e583ffcc"]]),Ot={class:"label"},Rt=U(v({__name:"Daoprogress",props:{value:null,label:null,color:null,type:null},setup:e=>(t,l)=>{const a=ie;return w(),P("div",{class:"progress",style:Y({color:e.color})},[x("span",Ot,h(e.label),1),m(a,{"show-pivot":!1,color:e.color,"stroke-width":"5",class:"content",percentage:e.value},null,8,["color","percentage"]),x("div",{class:N(["ratetext",{right:1===e.type}])},[x("span",null,h(e.value)+"%",1),F(t.$slots,"content",{},void 0,!0)],2)],4)}}),[["__scopeId","data-v-5c810f1d"]]),Et=e=>(T("data-v-5a476dbb"),e=e(),j(),e),Gt={class:"items"},Wt={class:"item"},zt=Et((()=>x("i",{class:"icon"},null,-1))),Xt={key:0,class:"item"},qt=Et((()=>x("i",{class:"icon"},null,-1))),Jt=U(v({__name:"ViewVoteDetailDialog",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e,l=q.clone();l.config({ROUNDING_MODE:1});const a=Z(),o=p((()=>{const{status:e}=t.proposalInfo;return e})),n=p((()=>{const{agreeAmount:e,disagreeAmount:l}=t.voteInfo;return 0!==a.identity&&("0"!==e||"0"!==l)})),s=p((()=>{const{finishAmount:e}=t.voteInfo;return"3"===o.value||"4"===o.value?e:a.accountInfo.totalVote})),i=p((()=>{const{agreeAmount:e,disagreeAmount:a}=t.voteInfo;return new l(e).plus(new l(a)).div(1e18).decimalPlaces(0).toString(10)})),c=p((()=>a.daoSystemInfo)),u=p((()=>{const{agreeAmount:e}=t.voteInfo;return"0"===s.value?0:new l(e).div(new l(s.value)).times(new l(100)).decimalPlaces(2).toString(10)})),r=p((()=>{const{agreeAmount:e}=t.voteInfo;return new l(e).div(new l(1e18)).decimalPlaces(0).toString(10)})),d=p((()=>{const{disagreeAmount:e}=t.voteInfo;return"0"===a.accountInfo.totalVote?0:new l(e).div(new l(s.value)).times(new l(100)).decimalPlaces(2).toString(10)})),v=p((()=>{const{disagreeAmount:e}=t.voteInfo;return new l(e).div(new l(1e18)).decimalPlaces(0).toString(10)})),f=p((()=>(c.value,new l(100).minus(new l(u.value)).minus(new l(d.value)).decimalPlaces(2).toString(10)))),b=p((()=>{const{status:e}=t.proposalInfo;if("0"!==e)return"0";const{agreeAmount:o,disagreeAmount:n}=t.voteInfo,{totalVote:s}=a.accountInfo;return new l(s).minus(new l(o).plus(new l(n))).div(new l(1e18)).decimalPlaces(0).toString(10)})),I=p((()=>{const{agreeAmount:e,disagreeAmount:a,finishAmount:o}=t.voteInfo;return new l(s.value).minus(new l(e).plus(new l(a))).div(new l(1e18)).decimalPlaces(0).toString(10)}));return g((()=>{})),(t,l)=>(w(),V(G,{ref:"el",height:"40%",title:t.$t("Vote.text11"),disabled:!A(n),classText:"stake-btn"},{content:y((()=>[x("div",Gt,[x("div",Wt,[zt,x("span",null,h(t.$t("Vote.text12",{value:A(i)})),1)]),"0"===e.proposalInfo.status?(w(),P("div",Xt,[qt,x("span",null,h(t.$t("Vote.text13",{value:A(b)})),1)])):C("",!0)]),m(Rt,{type:1,label:t.$t("Dao.agree"),value:A(u),color:"#1dc872"},{content:y((()=>[k(" ("+h(A(r))+") ",1)])),_:1},8,["label","value"]),m(Rt,{type:1,label:t.$t("Dao.disapprove"),value:A(d),color:"#1263F1"},{content:y((()=>[k(" ("+h(A(v))+") ",1)])),_:1},8,["label","value"]),m(Rt,{type:1,label:t.$t("Dao.ballot"),value:A(f),color:"#767676"},{content:y((()=>[k(" ("+h(A(I))+") ",1)])),_:1},8,["label","value"])])),default:y((()=>[x("div",{class:N(["btn-view",{"btn-active":A(n)}])},h(t.$t("Vote.text9")),3)])),_:1},8,["title","disabled"]))}}),[["__scopeId","data-v-5a476dbb"]]),Kt=e=>(T("data-v-492d5fe7"),e=e(),j(),e),Qt={class:"main"},Zt={class:"main-content"},el={class:"cell"},tl={class:"label"},ll={class:"cell"},al={class:"label"},ol={class:"cell"},nl={class:"label"},sl={class:"cell"},il={class:"label"},cl={key:0,class:"cell"},ul={class:"label"},rl={class:"flex"},dl={class:"btns1"},vl={key:1,class:"btn btn-voted"},pl=Kt((()=>x("i",{class:"icon icon-dao-18"},null,-1))),ml={key:2,class:"btn"},fl=["onClick"],bl={class:"title"},gl={class:"b-l content-text"},Il={class:"b-l input-addvote"},wl={class:"cell1"},Vl={class:"cell1-label"},yl={class:"cell"},xl={class:"cell1"},hl={class:"cell1-label"},Al={class:"cell"},kl={key:0,class:"cell1"},$l={class:"cell1-label"},Sl={class:"cell"},Pl={class:"select input"},_l={class:"select-title"},Dl={class:"tabs-items"},Cl={class:"circle"},Nl={key:0,class:"circle-inner"},Tl={class:"text-desc"},jl={class:"btns"},Ul={key:2,class:"vote-text"},Yl=Kt((()=>x("i",{class:"icon"},null,-1))),Bl=U(v({__name:"VoteDetailDialog",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e,{isVote:l,isExec:a,isFinish:o,noVote:n,isVoted:s,isAllVoted:i,status:c,ID:u,subject:r,content:v}=at(),{copy:I}=oe(),$=Z(),{finishProposal:S,CancelProposal:T}=ee();new b;const j=p((()=>new q(t.voteInfo.agreeAmount).plus(new q(t.voteInfo.disagreeAmount)).toString(10))),U=p((()=>{const{deadline:e,status:l}=t.proposalInfo;t.voteInfo;const{totalVote:a}=$.accountInfo;return"0"===l&&a!==j.value})),Y=p((()=>"3"===c.value||"2"===c.value)),B=p((()=>$.daoSystemInfo)),F=p((()=>{const{totalVote:e}=B.value,l="0"===c.value?e:t.proposalInfo.totalCount,{agreeCount:a}=t.proposalInfo;return new q(a).times(new q(100)).div(new q(l)).decimalPlaces(2).toString(10)})),L=p((()=>{const{totalVote:e}=B.value,l="0"===c.value?e:t.proposalInfo.totalCount,{disagreeCount:a}=t.proposalInfo;return new q(a).times(new q(100)).div(new q(l)).decimalPlaces(2).toString(10)})),O=p((()=>{const{totalVote:e}=B.value;return"0"===c.value||t.proposalInfo.totalCount,t.proposalInfo,new q(100).minus(new q(F.value)).minus(new q(L.value)).decimalPlaces(2).toString(10)})),R=p((()=>{const e=Number(c.value);return 0===e?1:1===e?2:3})),E=p((()=>{const{deadline:e,duration:l}=t.proposalInfo;return(e-l).toString()})),W=f(""),z=f("0");g((()=>{const{totalVote:e}=$.daoSystemInfo;z.value=new q(j.value).plus(new q(J.value)).div(new q(e)).times(100).decimalPlaces(0).toString(10)}));const X=p((()=>{const e=t.proposalInfo.status;$.accountInfo;const l="0"===e?$.daoSystemInfo.totalVote:t.proposalInfo.totalCount;return new q(j.value).div(new q(l)).times(100).decimalPlaces(0).toString(10)})),J=p((()=>{const{totalVote:e}=$.accountInfo;return new q(e).times(new q(W.value)).div(new q(100)).decimalPlaces(0).toString(10)}));p((()=>"0"===c.value?$.daoSystemInfo.totalVote:t.proposalInfo.totalCount));const K=p((()=>{const{agreeAmount:e,disagreeAmount:l}=t.voteInfo,{totalVote:a}=$.accountInfo;return new q(a).minus(new q(e).plus(new q(l))).div(new q(1e18)).decimalPlaces(0).toString(10)}));function te(){}async function le(){"1"===c.value&&(await S(t.proposalInfo.id),$.getSystemInfo(),$.getList(-1,!0))}return(t,s)=>{const p=Ke,f=qe,b=d;return w(),V(G,{ref:"el",height:"90%",classText:"stake-btn",title:"UIP "+A(u)+" "+t.$t("AddVote.text6"),disabled:!1},{content:y((()=>[A(Y)?(w(),V(f,{key:1,type:1,num:3,active:2})):(w(),V(p,{key:0,type:1,num:4,active:A(R)},null,8,["active"])),x("h4",bl,[x("span",null,h(A(r)),1)]),x("div",gl,[m(b,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",disabled:!0,placeholder:t.$t("AddVote.text2"),rows:"6",modelValue:A(v),"onUpdate:modelValue":s[1]||(s[1]=e=>M(v)?v.value=e:null)},null,8,["placeholder","modelValue"])]),x("div",Il,[x("div",wl,[x("div",Vl,h(t.$t("AddVote.text8"))+":",1),x("div",yl,h(A(Q)(A(E),"YYYY-MM-DD HH:mm:ss")),1)]),x("div",xl,[x("div",hl,h(t.$t("AddVote.text9"))+":",1),x("div",Al,h(A(Q)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),"4"===A(c)?(w(),P("div",kl,[x("div",$l,h(t.$t("Administer.text6"))+":",1),x("div",Sl,h(A(Q)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss")),1)])):C("",!0)]),x("div",Pl,[x("h4",_l,h(t.$t("AddVote.text7")),1),x("div",Dl,[(w(),P(D,null,_(3,((l,a)=>x("div",{class:"tabs-item",key:l},[x("div",Cl,[e.proposalInfo.operatorType==a?(w(),P("span",Nl)):C("",!0)]),k(" "+h(t.$t("AddVote.type"+l)),1)]))),64))])]),m(Rt,{label:t.$t("Dao.agree"),value:A(F),color:"#1dc872"},null,8,["label","value"]),m(Rt,{label:t.$t("Dao.disapprove"),value:A(L),color:"#1263F1"},null,8,["label","value"]),m(Rt,{label:t.$t("Dao.ballot"),value:A(O),color:"#767676"},null,8,["label","value"]),x("div",Tl,h(t.$t("AddVote.text10")),1),x("div",jl,[A(U)?(w(),V(Lt,{key:0,disabled:!A(l),id:e.proposalInfo.id,title:t.$t("Vote.title"),min:A(X),agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount,voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},{button:y((()=>[A(U)?(w(),P("div",{key:0,class:N(["btn-confirm",{"btn-active":A(l)}]),isButton:!0,onClick:te},h(t.$t("Vote.title")),3)):C("",!0)])),_:1},8,["disabled","id","title","min","agree","disagree","voteInfo","proposalInfo"])):C("",!0),m(Jt,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])]),A(U)?(w(),P("div",Ul,[Yl,x("span",null,h(t.$t("Vote.text10",{value:A(K)})),1)])):C("",!0)])),default:y((()=>[x("div",Qt,[x("div",Zt,[x("div",el,[x("span",tl,h(t.$t("Administer.text1"))+": ",1),x("span",null,h(A(r)),1)]),x("div",ll,[x("span",al,h(t.$t("Administer.text3"))+": ",1),x("span",null,h(A(Q)(A(E),"YYYY-MM-DD HH:mm:ss")),1)]),x("div",ol,[x("span",nl,h(t.$t("Administer.text4"))+": ",1),x("span",null,h(A(Q)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),x("div",sl,[x("span",il,h(t.$t("Administer.text6"))+": ",1),x("span",null,h("4"===A(c)?A(Q)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss"):"-"),1)]),A($).isDaoAdmin?(w(),P("div",cl,[x("span",ul,h(t.$t("Administer.text8"))+": ",1),x("span",rl,[k(h(e.proposalInfo.submiter.slice(0,4))+"... "+h(e.proposalInfo.submiter.slice(-4))+" ",1),x("i",{class:"icon copy icon-copy1",onClick:s[0]||(s[0]=H((t=>A(I)(e.proposalInfo.submiter)),["stop"]))})])])):C("",!0)]),x("div",dl,[A(U)?(w(),V(Lt,{key:0,class:"btn",isButton:!0,id:e.proposalInfo.id,title:t.$t("Vote.title"),min:A(X),agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount},null,8,["id","title","min","agree","disagree"])):C("",!0),A(i)?(w(),P("div",vl,[pl,k(" "+h(t.$t("Administer.btn2")),1)])):C("",!0),A(n)?(w(),P("div",ml,h(t.$t("Administer.btn4")),1)):C("",!0),A(a)&&A(o)?(w(),P("div",{key:3,class:N(["btn btn-succ",{"btn-succ-active":A(o)}]),onClick:H(le,["stop"])},h(t.$t("Administer.btn3")),11,fl)):C("",!0)])])])),_:1},8,["title"])}}}),[["__scopeId","data-v-492d5fe7"]]),Fl={class:"pool-content"},Ml={class:"header"},Hl={class:"title"},Ll={key:0,style:{color:"#ffcd1c"}},Ol={key:0,class:"cell"},Rl={class:"text"},El=U(v({__name:"PoolItem",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e;L("poolItem",t);const l=Z(),{CancelProposal:a,RecoveryHideProposal:o}=ee(),{eth:{abi:s},utils:i}=new b,c=p((()=>{Math.ceil((new Date).getTime()/1e3);const{deadline:e,status:l}=t.proposalInfo;return l})),u=p((()=>"3"===c.value||"2"===c.value)),r=p((()=>{const e=Number(c.value);return 0===e?1:1===e?2:3})),d=p((()=>{const e=t.proposalInfo.status;return"0"===e||"1"===e?8:"4"===e?9:"2"===e||"3"==e?10:void 0})),v=p((()=>{const{status:e,flag:a}=t.proposalInfo;return l.isDaoAdmin&&"0"===a&&"2"!==e}));function f(e){const t=s.encodeParameter("string","test");return s.decodeParameter("string",t),s.decodeParameter("uint256",e)}async function g(){await o(t.proposalInfo.id),l.getSystemInfo(),l.getList(-1,!0)}async function I(){await a(t.proposalInfo.id),l.getSystemInfo(),l.getList(-1,!0)}return(t,a)=>{const o=n,s=Ke,i=qe;return w(),P("div",Fl,[x("div",Ml,[x("div",{class:N(["icon","icon-dao-"+A(d)])},null,2),x("h4",Hl,"UIP "+h(f(e.proposalInfo.id)),1),"2"===A(c)?(w(),P("span",Ll,h(t.$t("Vote.text17")),1)):C("",!0),A(v)?(w(),V(o,{key:1,name:"cross",class:"close",color:"#ffcd1c",onClick:I})):C("",!0)]),"1"===e.proposalInfo.flag&&A(l).isDaoAdmin?(w(),P("div",Ol,[x("span",Rl,h(t.$t("Vote.text18")),1),m(o,{name:"revoke",onClick:g})])):C("",!0),A(u)?(w(),V(i,{key:2,num:3,active:2})):(w(),V(s,{key:1,num:4,active:A(r)},null,8,["active"])),m(Bl,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])])}}}),[["__scopeId","data-v-de31ea46"]]),Gl={class:"content"},Wl={class:"flex mx-22px align-center","justify-between":""},zl={class:"search-box1"},Xl={class:"tab select"},ql={class:"select-label"},Jl=(e=>(T("data-v-50e6b174"),e=e(),j(),e))((()=>x("i",{class:"icon triangle-down"},null,-1))),Kl={key:0,class:"select-items"},Ql=["onClick"],Zl=U(v({__name:"Index",setup(e){const{eth:{abi:t},utils:l}=new b,a=Z(),o=p((()=>{const e=a.proposalList;let t=[];for(let l=0;l<e.length;l++){const{subject:a,content:o,id:n}=e[l].proposalInfo,s=v(n);(""===i.value||u(a).indexOf(i.value)>-1||u(o).indexOf(i.value)>-1||s.indexOf(i.value)>-1)&&t.push(e[l])}return t})),n=f(0);f(0);const s=f(!1),i=f("");g((async()=>{a.getList(0,!0)}));const c=p((()=>a.isDaoAdmin?7:6)),r=p((()=>-1===n.value?"12":R.global.t("Administer.tab"+n.value)));function v(e){const l=t.encodeParameter("string","test");return t.decodeParameter("string",l),t.decodeParameter("uint256",e)}function I(){a.getList(n.value)}return(e,t)=>{const l=d;return w(),P("div",Gl,[m(ze),x("div",Wl,[x("div",zl,[m(l,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:e.$t("Administer.search"),"suffix-icon":A(O),class:"search"},null,8,["modelValue","placeholder","suffix-icon"])]),x("div",Xl,[x("div",{class:"flex",style:{width:"100%"},onClick:t[1]||(t[1]=e=>s.value=!s.value)},[x("span",ql,h(A(r)),1),Jl]),s.value?(w(),P("div",Kl,[(w(!0),P(D,null,_(A(c),((t,l)=>(w(),P("div",{class:"select-item",onClick:e=>function(e){n.value=e,a.getList(n.value,!0),s.value=!1}(l)}," - "+h(e.$t("Administer.tab"+l)),9,Ql)))),256))])):C("",!0)])]),(w(!0),P(D,null,_(A(o),(e=>(w(),V(El,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])))),256)),A(a).isHasRemain?(w(),P("div",{key:0,class:"more",onClick:I},h(e.$t("Administer.text7")),1)):C("",!0)])}}}),[["__scopeId","data-v-50e6b174"]]),ea={class:"box"},ta=(e=>(T("data-v-26a3b820"),e=e(),j(),e))((()=>x("div",{class:"img"},null,-1))),la={class:"tip"},aa={class:"tip-title"},oa={class:"tip-info"},na={class:"btn btn1"},sa=U(v({__name:"Home",setup(e){const t=E(),l=r();function a(){l.goNft(1),t.replace({path:"/nft"})}return(e,t)=>{const o=s;return w(),P(D,null,[m(Zl),m(o,{show:A(l).showNftTipV1,"onUpdate:show":t[1]||(t[1]=e=>A(l).showNftTipV1=e),round:"",teleport:"body","close-on-click-overlay":!1,"close-on-popstate":!0,"overlay-class":"a"},{default:y((()=>[x("div",ea,[ta,x("div",la,[x("h4",aa,h(A(l).nftTipTitleV1),1),x("div",oa,h(A(l).nftTipTextV1),1),x("div",{class:"btns",onClick:t[0]||(t[0]=e=>A(l).close(1))},[x("div",na,h(e.$t("NftTip.btn1")),1),x("div",{class:"btn btn2",onClick:a},h(e.$t("NftTip.btn2")),1)])])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-26a3b820"]]);export{sa as default};
