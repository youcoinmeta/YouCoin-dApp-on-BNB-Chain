import{h as e,t,g as l,D as a,w as o,B as n,c as s,ad as i,I as c}from"./index.6204fe79.js";import{P as u}from"./index.d406cf39.js";import{u as r,d,f as v,c as p}from"./system.fe641dc6.js";import{E as m}from"./el-popper.02527126.js";import{E as f}from"./el-input.743923bb.js";import{d as b,c as g,b as I,r as w,W as V,i as y,A as x,o as h,g as A,w as k,e as $,t as S,u as P,j as _,n as D,v as C,a as N,s as T,F as U,y as Y,x as j,p as B,f as F,_ as M,a4 as H,H as L,a3 as O,U as E,q as R,E as G,ak as W,X as q,z}from"./index.97766ee1.js";import{D as X,_ as J}from"./DaoPopup.bb67e30d.js";import{S as K}from"./index.f7c4e858.js";import{u as Q,a as Z,b as ee}from"./dao.8b644bb1.js";import{D as te}from"./contract.cfb15a02.js";import{a as le}from"./utils.90251d5d.js";import{u as ae}from"./useCopy.4ad1d3ed.js";import{g as oe}from"./contract.5f52e03d.js";import"./index.264cccf6.js";import"./index.c34cdca4.js";import"./tip.7fe2b846.js";const[ne,se]=e("progress");const ie=o(b({name:ne,props:{color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:t,pivotColor:String,trackColor:String,strokeWidth:l,percentage:{type:l,default:0,validator:e=>e>=0&&e<=100}},setup(e){const t=g((()=>e.inactive?void 0:e.color)),l=()=>{const{textColor:l,pivotText:a,pivotColor:o,percentage:n}=e,s=null!=a?a:`${n}%`;if(e.showPivot&&s){const a={color:l,left:+n+"%",transform:`translate(-${+n}%,-50%)`,background:o||t.value};return I("span",{style:a,class:se("pivot",{inactive:e.inactive})},[s])}};return()=>{const{trackColor:o,percentage:n,strokeWidth:s}=e,i={background:o,height:a(s)},c={width:`${n}%`,background:t.value};return I("div",{class:se(),style:i},[I("span",{class:se("portion",{inactive:e.inactive}),style:c},null),l()])}}})),ce=e=>(B("data-v-a835f277"),e=e(),F(),e),ue={class:"popover-info"},re={class:"popover-text"},de={class:"popover-text",style:{"margin-top":"4px"}},ve={class:"popover-time border"},pe=ce((()=>$("i",{class:"icon icon-dao-26"},null,-1))),me={class:"border1"},fe=ce((()=>$("i",{class:"icon icon-dao-26"},null,-1))),be={class:"input item1 input-addvote"},ge={class:"input-label"},Ie={class:"input input-addvote"},we=ce((()=>$("span",{class:"input-label"},null,-1))),Ve=ce((()=>$("div",null,null,-1))),ye={class:"title1"},xe={class:"slider"},he={class:"item item-top"},Ae=ce((()=>$("p",null,S(0),-1))),ke={class:"custom-button"},$e={class:"top"},Se=ce((()=>$("div",{class:"circle"},[$("span",{class:"circle-inner"})],-1))),Pe={class:"bottom"},_e={class:"item item-bottom"},De=ce((()=>$("p",null,"0%",-1))),Ce=ce((()=>$("span",null,S(100)+"%",-1))),Ne={class:"input-box"},Te={class:"input",style:{"margin-right":"12px"}},Ue={class:"input-label",style:{"margin-right":"12px"}},Ye=ce((()=>$("i",{class:"icon triangle-down"},null,-1))),je={class:"select-items"},Be=["onClick"],Fe={class:"input sb"},Me={class:"input-label",style:{"margin-right":"12px"}},He=ce((()=>$("i",{class:"icon triangle-down"},null,-1))),Le={key:0,class:"select-items"},Oe=["onClick"],Ee={class:"text"},Re={class:"text"},Ge={class:"text"},We={class:"text"},qe=M(b({__name:"AddProposalDialog",setup(e){const t=n.clone();t.config({ROUNDING_MODE:1});const l=r(),a=Q(),o=d(),{submitProposal:i}=Z(),c=w(null),{eth:{abi:u}}=new V,p=w("100"),b=w(""),B=w(""),F=w(""),M=w(-1),H=w(-1),L=w(!1),O=w(!1),E=[2,3,5,7,10];y((()=>{}));const R=v({time:1e4,onFinish:()=>{setTimeout((()=>{a.getSystemInfo()}),6e4)}}),G=x({cur:R.current});R.start();const W=g((()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:t}=a.accountInfo;return Number(t)>e})),q=g((()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:o}=a.accountInfo,{stakeUCON:n}=a.accountInfo,{minStakeUcon:s}=a.daoSystemInfo,i=-1===new t(n).comparedTo(new t(s));return Number(o)>e&&(R.reset(1e3*Number(Number(o)-e)),R.start()),"0"===a.accountInfo.blockFlag&&a.isStake&&l.stakeList.length>0&&!W.value&&!i})),z=g((()=>-1!==M.value&&-1!==H.value&&""!==B.value&&""!==F.value&&"0"!==ee.value)),ee=g((()=>{if(!p.value)return"0";const{totalVote:e}=a.accountInfo;if("100"==p.value)return e;const l=new t(e).times(new t(p.value)).div(new t(1e20)).decimalPlaces(0).toString(10);return new t(l).times(1e18).decimalPlaces(0).toString(10)})),ae=g((()=>{const{totalVote:e}=a.daoSystemInfo,l=a.accountInfo.totalVote;if("0"===e)return"0";return new t(l).div(new t(1e18)).decimalPlaces(0).toString(10)})),oe=g((()=>{const{totalVote:e}=a.accountInfo;return new t(e).div(new t(1e18)).decimalPlaces(0).toString(10)})),ne=g((()=>new t(a.daoSystemInfo.commitProposalBurnUcon).times(new t("1e18")).idiv(o.uconPrice).idiv(t("1000000")).toString(10)));async function se(){var e;if(-1===M.value||""===B.value||""===F.value||-1===H.value||"0"===ee.value||""===b.value)return;await i("1",u.encodeParameter("string",B.value),u.encodeParameter("string",F.value),(H.value*te).toString(),M.value.toString(),a.daoSystemInfo.commitProposalBurnUcon,"100"==p.value?a.accountInfo.totalVote:new t(b.value).times(1e18).decimalPlaces(0).toString(10)),a.getSystemInfo(),a.getList(-1,!0),B.value="",F.value="",M.value=-1,H.value=-1,p.value="100",null==(e=c.value)||e.handleClose()}g((()=>"0"));const ie=g((()=>a.accountInfo.totalVote));function ce(e){const l=e.target.value;if(Number(l)<0)return b.value=oe.value,void(p.value="100");const{totalVote:o}=a.accountInfo;if(1===new t(l).times(1e18).comparedTo(new t(ie.value)))return b.value=oe.value,void(p.value="100");if(b.value=l,""===l)return void(p.value="0");const n=new t(o).div(1e18).decimalPlaces(0).times(1e18),s=new t(l).times(1e18).dividedBy(n).times(100).decimalPlaces(0).toString(10);p.value=s}function qe(e){b.value=new t(e).times(new t(oe.value)).div(100).decimalPlaces(0).toString(10)}function ze(e){p.value="100",b.value=oe.value}return(e,t)=>{const l=m,o=f,n=K,i=J;return h(),A(X,{ref_key:"el",ref:c,classText:"add",title:e.$t("AddVote.title"),disabled:!P(q),onClose:ze},{content:k((()=>[$("div",be,[$("span",ge,S(e.$t("AddVote.text1")),1),I(o,{class:"value",placeholder:e.$t("AddVote.text2"),maxlength:"30",modelValue:B.value,"onUpdate:modelValue":t[0]||(t[0]=e=>B.value=e)},null,8,["placeholder","modelValue"])]),$("div",Ie,[we,I(o,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",placeholder:e.$t("AddVote.text2"),rows:"6",modelValue:F.value,"onUpdate:modelValue":t[1]||(t[1]=e=>F.value=e),onInput:e.handleChangeContent},null,8,["placeholder","modelValue","onInput"])]),Ve,$("h4",ye,[$("span",null,S(e.$t("AddVote.text14")),1),I(o,{class:"number",type:"number",modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=e=>b.value=e),placeholder:"0",onBlur:ce},null,8,["modelValue"])]),$("div",xe,[$("div",he,[$("div",null,[$("span",null,S(e.$t("Vote.text2")),1),Ae]),$("span",null,S(P(ae)),1)]),I(n,{modelValue:p.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>p.value=e),qe],"bar-height":"4","active-color":"#FFCD1C"},{button:k((()=>[$("div",ke,[$("div",$e,S(b.value),1),Se,$("div",Pe,S(p.value)+"%",1)])])),_:1},8,["modelValue"]),$("div",_e,[$("div",null,[De,$("span",null,S(e.$t("Vote.text3")),1)]),Ce])]),$("div",Ne,[$("div",Te,[$("span",Ue,S(e.$t("AddVote.text3")),1),$("div",{class:"select",onClick:t[4]||(t[4]=e=>L.value=!L.value)},[_(S(-1===M.value?e.$t("AddVote.text5"):e.$t("AddVote.type"+(M.value+1)))+" ",1),Ye]),D($("div",je,[(h(),N(U,null,T(3,((t,l)=>$("div",{class:"select-item",onClick:e=>{return t=l,M.value=t,void(L.value=!1);var t}},S(e.$t("AddVote.type"+t)),9,Be))),64))],512),[[C,L.value]])]),$("div",Fe,[$("span",Me,S(e.$t("AddVote.text4")),1),$("div",{class:"select",onClick:t[5]||(t[5]=e=>O.value=!O.value)},[_(S(-1===H.value?e.$t("AddVote.text5"):e.$t("AddVote.day",{day:H.value}))+" ",1),He]),O.value?(h(),N("div",Le,[(h(),N(U,null,T(E,(t=>$("div",{class:"select-item",onClick:e=>{return l=t,H.value=l,void(O.value=!1);var l}},S(e.$t("AddVote.day",{day:t})),9,Oe))),64))])):Y("",!0)])]),$("div",Ee,S(e.$t("AddVote.text11",{value:P(s)(P(ne)),value2:P(s)(P(a).daoSystemInfo.finishProposalReward),rate:P(le)(P(a).daoSystemInfo.proposalIncreaseRate)})),1),$("div",Re,S(e.$t("AddVote.text12")),1),$("div",Ge,S(e.$t("AddVote.text13")),1),$("div",We,S(e.$t("AddVote.text15")),1),I(i,{fee:P(a).daoSystemInfo.commitProposalBurnUcon},null,8,["fee"]),$("div",{class:j(["btn-confirm",{"btn-active":P(z)}]),onClick:se},S(e.$t("Confirm")),3)])),default:k((()=>[P(W)?(h(),N("div",{key:0,class:j(["btn",{"btn-active":P(q)}])},[I(l,{"popper-class":"popover-model",placement:"top",width:"328px",trigger:"hover","propper-style":"{background: blue}"},{reference:k((()=>[$("div",ve,[pe,$("span",me,S(e.$t("Administer.add")),1)])])),default:k((()=>[$("div",ue,[$("div",re,S(e.$t("AddVote.text16")),1),$("div",de,S(e.$t("AddVote.text17",{day:G.cur.days,hour:G.cur.hours,s:G.cur.minutes})),1)])])),_:1})],2)):(h(),N("div",{key:1,class:j(["btn",{"btn-active":P(q)}])},[fe,$("span",null,S(e.$t("Administer.add")),1)],2))])),_:1},8,["title","disabled"])}}}),[["__scopeId","data-v-a835f277"]]),ze={class:"steps"},Xe=M(b({__name:"DaoStepsFail",props:{num:null,active:null,type:null},setup(e){const t=e,l=g((()=>new n(100).div(new n(t.num-1)).decimalPlaces(2).toString(10)));function a(e){return parseFloat(l.value)*e+"%"}return(t,l)=>(h(),N("div",ze,[(h(!0),N(U,null,T(e.num-1,(t=>(h(),N("span",{class:j(["step-line",{"step-line-active":e.active>=t}])},null,2)))),256)),(h(!0),N(U,null,T(e.num,((l,o)=>(h(),N("div",{class:"step",style:H({left:a(o)})},[$("span",{class:j(["step-circle",{"step-circle-active":e.active>=o}])},null,2),$("p",{class:j(["step-text",{text1:e.type}])},S(t.$t("Administer.statusFail"+l)),3)],4)))),256))]))}}),[["__scopeId","data-v-5cfae7d6"]]),Je={class:"steps"},Ke=M(b({__name:"DaoSteps",props:{num:null,active:null,type:null},setup(e){const t=e,l=g((()=>new n(100).div(new n(t.num-1)).decimalPlaces(2).toString(10)));function a(e){return parseFloat(l.value)*e+"%"}return(t,l)=>(h(),N("div",Je,[(h(!0),N(U,null,T(e.num-1,(t=>(h(),N("span",{class:j(["step-line",{"step-line-active":e.active>=t}])},null,2)))),256)),(h(!0),N(U,null,T(e.num,((l,o)=>(h(),N("div",{class:"step",style:H({left:a(o)})},[$("span",{class:j(["step-circle",{"step-circle-active":e.active>=o}])},null,2),$("p",{class:j(["step-text",{text1:e.type}])},S(t.$t("Administer.status"+l)),3)],4)))),256))]))}}),[["__scopeId","data-v-ca85644d"]]),Qe=n.clone();Qe.config({ROUNDING_MODE:1});const{eth:{abi:Ze},utils:et}=new V,tt=Q();ee("0x84EF0D09F9Ba4239976CC68cD6e549b5c8729dc1");const lt=d();function at(){r();const e=L("poolItem")||{},t=g((()=>e.proposalInfo)),l=g((()=>e.voteInfo)),a=g((()=>"0"!==tt.accountInfo.blockFlag)),o=g((()=>{const e=lt.account,{operatorType:l,submiter:a}=t.value;return"1"!==l&&a.toLocaleLowerCase()===e.toLocaleLowerCase()||tt.isDaoAdmin})),n=g((()=>"1"===t.value.status)),s=g((()=>{const e=Math.ceil((new Date).getTime()/1e3);return!a.value&&e<Number(t.value.deadline)})),i=g((()=>{t.value;const{agreeAmount:e,disagreeAmount:a}=l.value;return"0"!==e||"0"!==a})),c=g((()=>{const{status:e}=t.value,{agreeAmount:a,disagreeAmount:o}=l.value;return"0"===e?new Qe(a).plus(new Qe(o)).toString(10)===tt.accountInfo.totalVote&&"0"!==tt.accountInfo.totalVote:"0"!==a||"0"!==o})),u=g((()=>"0"!==t.value.status&&"0"===l.value.agreeAmount&&"0"===l.value.disagreeAmount)),d=g((()=>Ze.decodeParameter("uint256",e.proposalInfo.id))),v=g((()=>Ze.decodeParameter("string",e.proposalInfo.subject))),p=g((()=>Ze.decodeParameter("string",e.proposalInfo.content))),m=g((()=>{const{agreeAmount:t="0",disagreeAmount:l="0"}=e.voteInfo;return new Qe(t).plus(new Qe(l)).toString(10)})),f=g((()=>tt.accountInfo.totalVote)),b=g((()=>{const{totalVote:e}=tt.accountInfo;return"0"===e||"0"===m.value?"0":new Qe(m.value).div(new Qe(e)).times(100).decimalPlaces(0).toString(10)})),I=g((()=>{const{status:t}=e.proposalInfo;return t})),w=g((()=>{const{totalVote:e}=tt.accountInfo;return new Qe(e).div(new Qe(1e18)).decimalPlaces(0).toString(10)}));return{poolItem:e,proposalInfo:t,isBlock:a,isVote:s,isExec:o,isFinish:n,noVote:u,isVoted:i,isAllVoted:c,ID:d,subject:v,content:p,userTotal:m,curRate:b,status:I,totalUserVote:w,userTotalVote:f}}const ot=e=>(B("data-v-4ba86e2a"),e=e(),F(),e),nt={class:"title1"},st={class:"flex total"},it={class:"title1"},ct={class:"total-item"},ut={class:"total-number disabled number"},rt={class:"title1"},dt={class:"total-item"},vt={class:"title1"},pt={class:"total-item"},mt={class:"total-number disabled number"},ft={class:"slider"},bt={class:"item item-top"},gt=ot((()=>$("p",null,S(0)+"%",-1))),It={class:"custom-button"},wt={class:"top bg"},Vt=ot((()=>$("div",{class:"circle1"},[$("span",{class:"circle1-inner"})],-1))),yt={class:"bottom button-b"},xt={class:"custom-button"},ht={class:"top bg button-t-r"},At=ot((()=>$("div",{class:"circle"},[$("span",{class:"circle-inner"})],-1))),kt={class:"bottom button-b-r"},$t={class:"custom-button"},St={class:"top"},Pt=ot((()=>$("div",{class:"circle"},[$("span",{class:"circle-inner"})],-1))),_t={class:"bottom"},Dt={class:"item item-bottom"},Ct=ot((()=>$("p",null,"0%",-1))),Nt=ot((()=>$("span",null,S(100)+"%",-1))),Tt={class:"select"},Ut={class:"select-title"},Yt={class:"tabs-items"},jt=["onClick"],Bt={class:"circle"},Ft={key:0,class:"circle-inner"},Mt={class:"text"},Ht={class:"text"},Lt=M(b({__name:"VoteDialog",props:{id:null,agree:null,disagree:null,isButton:{type:Boolean}},setup(e){const t=e,l=n.clone();l.config({ROUNDING_MODE:1});const a=Q(),{voteProposal:o,flushProcessProposal:s,finishProposal:i}=Z(),{isVote:c,ID:u,curRate:r,userTotal:d,totalUserVote:v,userTotalVote:p}=at(),m=w(),b=w(),V=w(),x=w(""),D=w(""),C=w("0"),B=w(1),F=w([0,40]);function M(e){const t=e[0];e[1];F.value[0]=Number(V.value),F.value[1],t>Number(V.value)&&t<F.value[1]&&(F.value[1]=t),W(F.value[1])}function H(e){}g((()=>{const e=Number(x.value)-Number(C.value);return e<=0?0:e}));const L=g((()=>Number(D.value)+Number(C.value)));function E(){"0"===d.value?b.value=100:(b.value=100,F.value[0]=Number(r.value),F.value[1]=100,C.value=new l(d.value).div(new l(1e18)).decimalPlaces(0).toString(10)),x.value=new l(a.accountInfo.totalVote).div(new l(1e18)).decimalPlaces(0).toString(10),D.value=new l(a.accountInfo.totalVote).div(new l(1e18)).minus(C.value).decimalPlaces(0).toString(10),V.value=r.value}y((()=>{setTimeout((()=>{E()}),1e3)}));const R=g((()=>Number(D.value)>0));function G(e){const t=e.target.value;if("0"===d.value?F.value[1]=0:b.value=0,t<0||!t)return D.value="0",F.value[1]=F.value[0],b.value=0,void(x.value=C.value);const o=new l(t).plus(C.value).times(1e18);if(1===new l(o).comparedTo(new l(p.value)))return x.value=v.value,D.value=new l(a.accountInfo.totalVote).div(new l(1e18)).minus(C.value).decimalPlaces(0).toString(10),F.value[1]=100,void(b.value=100);if(Number(o)<0||-1===new l(o).comparedTo(new l(d.value)))return void(x.value=new l(d.value).div(new l(1e18)).decimalPlaces(0).toString(10));if(x.value=(Number(t)+Number(C.value)).toString(),""===t)return;const{totalVote:n}=a.accountInfo,s=new l(n).div(1e18).decimalPlaces(0).times(1e18),i=new l(x.value).times(1e18).dividedBy(s).times(100).decimalPlaces(0).toString(10);b.value=i,F.value[1]=Number(i)}function W(e){if("0"===d.value?F.value[1]=0:b.value=0,e<=Number(r.value)){b.value=r.value;const{totalVote:e}=a.accountInfo;return D.value="0",x.value=C.value,void new l(d.value).times(100).div(new l(e)).decimalPlaces(20).toString(10)}x.value=new l(e).times(new l(v.value)).div(100).decimalPlaces(0).toString(10),D.value=(Number(x.value)-Number(C.value)).toString(10),Number(x.value)<Number(C.value)&&(x.value=C.value)}function q(e){E(),F.value[1]=100}async function z(){var e;if(!R.value)return;let n="";n=100==b.value||100==F.value[1]?new l(a.accountInfo.totalVote).minus(new l(d.value)).decimalPlaces(0).toString(10):new l(D.value).times(1e18).toString(10),await o(t.id,n,1===B.value),null==(e=m.value)||e.handleClose(),a.getSystemInfo(),a.getList(-1,!0)}return(t,l)=>{const o=f,n=K,s=J;return h(),A(X,{disabled:!P(c),ref_key:"el",ref:m,title:t.$t("DaoRedeem.title1")+" 1/2",classText:"stake-btn",onClose:q},{content:k((()=>[$("h4",nt,[$("span",null,S(t.$t("Vote.text1",{value:P(u)})),1)]),$("div",st,[$("div",it,[$("p",ct,S(t.$t("Vote.text14")),1),$("p",ut,S(C.value),1)]),$("div",rt,[$("p",dt,S(t.$t("Vote.text15")),1),I(o,{class:"number total-number",type:"number",modelValue:D.value,"onUpdate:modelValue":l[0]||(l[0]=e=>D.value=e),placeholder:"0",onBlur:G},null,8,["modelValue"])]),$("div",vt,[$("p",pt,S(t.$t("Vote.text16")),1),$("p",mt,S(P(L)),1)])]),$("div",ft,[$("div",bt,[$("div",null,[$("span",null,S(t.$t("Vote.text2")),1),gt]),$("span",null,S(P(v)),1)]),"0"!==P(d)?(h(),A(n,{key:0,modelValue:F.value,"onUpdate:modelValue":[l[1]||(l[1]=e=>F.value=e),M],range:"","bar-height":"4","inactive-color":"#BABBBC","active-color":"#FFCD1C",onDragEnd:H},{"left-button":k((()=>[$("div",It,[$("div",wt,S(C.value),1),Vt,$("div",yt,S(F.value[0])+"%",1)])])),"right-button":k((()=>[$("div",xt,[$("div",ht,S(x.value),1),At,$("div",kt,S(F.value[1])+"%",1)])])),_:1},8,["modelValue"])):(h(),A(n,{key:1,class:"slider1",modelValue:b.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>b.value=e),W],"bar-height":"4",max:100,"active-color":"#FFCD1C"},{button:k((()=>[$("div",$t,[$("div",St,S(x.value),1),Pt,$("div",_t,S(b.value)+"%",1)])])),_:1},8,["modelValue"])),$("div",Dt,[$("div",null,[Ct,$("span",null,S(t.$t("Vote.text3")),1)]),Nt])]),$("div",Tt,[$("h4",Ut,S(t.$t("Vote.text4")),1),$("div",Yt,[(h(),N(U,null,T(2,(e=>$("div",{class:"tabs-item",key:e,onClick:t=>{return l=e,void(B.value=l);var l}},[$("div",Bt,[B.value===e?(h(),N("span",Ft)):Y("",!0)]),_(" "+S(t.$t("Vote.text"+(e+4))),1)],8,jt))),64))])]),$("div",Mt,S(t.$t("Vote.text7")),1),$("div",Ht,S(t.$t("Vote.text8")),1),I(s,{fee:P(a).daoSystemInfo.voteProposalBurnUcon},null,8,["fee"]),$("div",{class:j(["btn-confirm",{"btn-active":P(R)}]),onClick:z},S(t.$t("Confirm")),3)])),default:k((()=>[e.isButton?(h(),N("div",{key:0,class:j(["btn",{"btn-active":P(c)}])},S(t.$t("Vote.title1")),3)):Y("",!0),O(t.$slots,"button",{},void 0,!0)])),_:3},8,["disabled","title"])}}}),[["__scopeId","data-v-4ba86e2a"]]),Ot={class:"label"},Et=M(b({__name:"Daoprogress",props:{value:null,label:null,color:null,type:null},setup:e=>(t,l)=>{const a=ie;return h(),N("div",{class:"progress",style:H({color:e.color})},[$("span",Ot,S(e.label),1),I(a,{"show-pivot":!1,color:e.color,"stroke-width":"5",class:"content",percentage:e.value},null,8,["color","percentage"]),$("div",{class:j(["ratetext",{right:1===e.type}])},[$("span",null,S(e.value)+"%",1),O(t.$slots,"content",{},void 0,!0)],2)],4)}}),[["__scopeId","data-v-5c810f1d"]]),Rt=e=>(B("data-v-5a476dbb"),e=e(),F(),e),Gt={class:"items"},Wt={class:"item"},qt=Rt((()=>$("i",{class:"icon"},null,-1))),zt={key:0,class:"item"},Xt=Rt((()=>$("i",{class:"icon"},null,-1))),Jt=M(b({__name:"ViewVoteDetailDialog",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e,l=n.clone();l.config({ROUNDING_MODE:1});const a=Q(),o=g((()=>{const{status:e}=t.proposalInfo;return e})),s=g((()=>{const{agreeAmount:e,disagreeAmount:l}=t.voteInfo;return 0!==a.identity&&("0"!==e||"0"!==l)})),i=g((()=>{const{finishAmount:e}=t.voteInfo;return"3"===o.value||"4"===o.value?e:a.accountInfo.totalVote})),c=g((()=>{const{agreeAmount:e,disagreeAmount:a}=t.voteInfo;return new l(e).plus(new l(a)).div(1e18).decimalPlaces(0).toString(10)})),u=g((()=>a.daoSystemInfo)),r=g((()=>{const{agreeAmount:e}=t.voteInfo;return"0"===i.value?0:new l(e).div(new l(i.value)).times(new l(100)).decimalPlaces(2).toString(10)})),d=g((()=>{const{agreeAmount:e}=t.voteInfo;return new l(e).div(new l(1e18)).decimalPlaces(0).toString(10)})),v=g((()=>{const{disagreeAmount:e}=t.voteInfo;return"0"===a.accountInfo.totalVote?0:new l(e).div(new l(i.value)).times(new l(100)).decimalPlaces(2).toString(10)})),p=g((()=>{const{disagreeAmount:e}=t.voteInfo;return new l(e).div(new l(1e18)).decimalPlaces(0).toString(10)})),m=g((()=>(u.value,new l(100).minus(new l(r.value)).minus(new l(v.value)).decimalPlaces(2).toString(10)))),f=g((()=>{const{status:e}=t.proposalInfo;if("0"!==e)return"0";const{agreeAmount:o,disagreeAmount:n}=t.voteInfo,{totalVote:s}=a.accountInfo;return new l(s).minus(new l(o).plus(new l(n))).div(new l(1e18)).decimalPlaces(0).toString(10)})),b=g((()=>{const{agreeAmount:e,disagreeAmount:a,finishAmount:o}=t.voteInfo;return new l(i.value).minus(new l(e).plus(new l(a))).div(new l(1e18)).decimalPlaces(0).toString(10)}));return y((()=>{})),(t,l)=>(h(),A(X,{ref:"el",height:"40%",title:t.$t("Vote.text11"),disabled:!P(s),classText:"stake-btn"},{content:k((()=>[$("div",Gt,[$("div",Wt,[qt,$("span",null,S(t.$t("Vote.text12",{value:P(c)})),1)]),"0"===e.proposalInfo.status?(h(),N("div",zt,[Xt,$("span",null,S(t.$t("Vote.text13",{value:P(f)})),1)])):Y("",!0)]),I(Et,{type:1,label:t.$t("Dao.agree"),value:P(r),color:"#1dc872"},{content:k((()=>[_(" ("+S(P(d))+") ",1)])),_:1},8,["label","value"]),I(Et,{type:1,label:t.$t("Dao.disapprove"),value:P(v),color:"#1263F1"},{content:k((()=>[_(" ("+S(P(p))+") ",1)])),_:1},8,["label","value"]),I(Et,{type:1,label:t.$t("Dao.ballot"),value:P(m),color:"#767676"},{content:k((()=>[_(" ("+S(P(b))+") ",1)])),_:1},8,["label","value"])])),default:k((()=>[$("div",{class:j(["btn-view",{"btn-active":P(s)}])},S(t.$t("Vote.text9")),3)])),_:1},8,["title","disabled"]))}}),[["__scopeId","data-v-5a476dbb"]]),Kt=e=>(B("data-v-492d5fe7"),e=e(),F(),e),Qt={class:"main"},Zt={class:"main-content"},el={class:"cell"},tl={class:"label"},ll={class:"cell"},al={class:"label"},ol={class:"cell"},nl={class:"label"},sl={class:"cell"},il={class:"label"},cl={key:0,class:"cell"},ul={class:"label"},rl={class:"flex"},dl={class:"btns1"},vl={key:1,class:"btn btn-voted"},pl=Kt((()=>$("i",{class:"icon icon-dao-18"},null,-1))),ml={key:2,class:"btn"},fl=["onClick"],bl={class:"title"},gl={class:"b-l content-text"},Il={class:"b-l input-addvote"},wl={class:"cell1"},Vl={class:"cell1-label"},yl={class:"cell"},xl={class:"cell1"},hl={class:"cell1-label"},Al={class:"cell"},kl={key:0,class:"cell1"},$l={class:"cell1-label"},Sl={class:"cell"},Pl={class:"select input"},_l={class:"select-title"},Dl={class:"tabs-items"},Cl={class:"circle"},Nl={key:0,class:"circle-inner"},Tl={class:"text-desc"},Ul={class:"btns"},Yl={key:2,class:"vote-text"},jl=Kt((()=>$("i",{class:"icon"},null,-1))),Bl=M(b({__name:"VoteDetailDialog",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e,{isVote:l,isExec:a,isFinish:o,noVote:s,isVoted:c,isAllVoted:u,status:r,ID:d,subject:v,content:p}=at(),{copy:m}=ae(),b=Q(),{finishProposal:x,CancelProposal:D}=Z();new V;const C=g((()=>new n(t.voteInfo.agreeAmount).plus(new n(t.voteInfo.disagreeAmount)).toString(10))),B=g((()=>{const{deadline:e,status:l}=t.proposalInfo;t.voteInfo;const{totalVote:a}=b.accountInfo;return"0"===l&&a!==C.value})),F=g((()=>"3"===r.value||"2"===r.value)),M=g((()=>b.daoSystemInfo)),H=g((()=>{const{totalVote:e}=M.value,l="0"===r.value?e:t.proposalInfo.totalCount,{agreeCount:a}=t.proposalInfo;return new n(a).times(new n(100)).div(new n(l)).decimalPlaces(2).toString(10)})),L=g((()=>{const{totalVote:e}=M.value,l="0"===r.value?e:t.proposalInfo.totalCount,{disagreeCount:a}=t.proposalInfo;return new n(a).times(new n(100)).div(new n(l)).decimalPlaces(2).toString(10)})),O=g((()=>{const{totalVote:e}=M.value;return"0"===r.value||t.proposalInfo.totalCount,t.proposalInfo,new n(100).minus(new n(H.value)).minus(new n(L.value)).decimalPlaces(2).toString(10)})),G=g((()=>{const e=Number(r.value);return 0===e?1:1===e?2:3})),W=g((()=>{const{deadline:e,duration:l}=t.proposalInfo;return(e-l).toString()})),q=w(""),z=w("0");y((()=>{const{totalVote:e}=b.daoSystemInfo;z.value=new n(C.value).plus(new n(K.value)).div(new n(e)).times(100).decimalPlaces(0).toString(10)}));const J=g((()=>{const e=t.proposalInfo.status;b.accountInfo;const l="0"===e?b.daoSystemInfo.totalVote:t.proposalInfo.totalCount;return new n(C.value).div(new n(l)).times(100).decimalPlaces(0).toString(10)})),K=g((()=>{const{totalVote:e}=b.accountInfo;return new n(e).times(new n(q.value)).div(new n(100)).decimalPlaces(0).toString(10)}));g((()=>"0"===r.value?b.daoSystemInfo.totalVote:t.proposalInfo.totalCount));const ee=g((()=>{const{agreeAmount:e,disagreeAmount:l}=t.voteInfo,{totalVote:a}=b.accountInfo;return new n(a).minus(new n(e).plus(new n(l))).div(new n(1e18)).decimalPlaces(0).toString(10)}));function te(){}async function le(){"1"===r.value&&(await x(t.proposalInfo.id),b.getSystemInfo(),b.getList(-1,!0))}return(t,n)=>{const c=Ke,g=Xe,w=f;return h(),A(X,{ref:"el",height:"90%",classText:"stake-btn",title:"UIP "+P(d)+" "+t.$t("AddVote.text6"),disabled:!1},{content:k((()=>[P(F)?(h(),A(g,{key:1,type:1,num:3,active:2})):(h(),A(c,{key:0,type:1,num:4,active:P(G)},null,8,["active"])),$("h4",bl,[$("span",null,S(P(v)),1)]),$("div",gl,[I(w,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",disabled:!0,placeholder:t.$t("AddVote.text2"),rows:"6",modelValue:P(p),"onUpdate:modelValue":n[1]||(n[1]=e=>E(p)?p.value=e:null)},null,8,["placeholder","modelValue"])]),$("div",Il,[$("div",wl,[$("div",Vl,S(t.$t("AddVote.text8"))+":",1),$("div",yl,S(P(i)(P(W),"YYYY-MM-DD HH:mm:ss")),1)]),$("div",xl,[$("div",hl,S(t.$t("AddVote.text9"))+":",1),$("div",Al,S(P(i)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),"4"===P(r)?(h(),N("div",kl,[$("div",$l,S(t.$t("Administer.text6"))+":",1),$("div",Sl,S(P(i)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss")),1)])):Y("",!0)]),$("div",Pl,[$("h4",_l,S(t.$t("AddVote.text7")),1),$("div",Dl,[(h(),N(U,null,T(3,((l,a)=>$("div",{class:"tabs-item",key:l},[$("div",Cl,[e.proposalInfo.operatorType==a?(h(),N("span",Nl)):Y("",!0)]),_(" "+S(t.$t("AddVote.type"+l)),1)]))),64))])]),I(Et,{label:t.$t("Dao.agree"),value:P(H),color:"#1dc872"},null,8,["label","value"]),I(Et,{label:t.$t("Dao.disapprove"),value:P(L),color:"#1263F1"},null,8,["label","value"]),I(Et,{label:t.$t("Dao.ballot"),value:P(O),color:"#767676"},null,8,["label","value"]),$("div",Tl,S(t.$t("AddVote.text10")),1),$("div",Ul,[P(B)?(h(),A(Lt,{key:0,disabled:!P(l),id:e.proposalInfo.id,title:t.$t("Vote.title"),min:P(J),agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount,voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},{button:k((()=>[P(B)?(h(),N("div",{key:0,class:j(["btn-confirm",{"btn-active":P(l)}]),isButton:!0,onClick:te},S(t.$t("Vote.title")),3)):Y("",!0)])),_:1},8,["disabled","id","title","min","agree","disagree","voteInfo","proposalInfo"])):Y("",!0),I(Jt,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])]),P(B)?(h(),N("div",Yl,[jl,$("span",null,S(t.$t("Vote.text10",{value:P(ee)})),1)])):Y("",!0)])),default:k((()=>[$("div",Qt,[$("div",Zt,[$("div",el,[$("span",tl,S(t.$t("Administer.text1"))+": ",1),$("span",null,S(P(v)),1)]),$("div",ll,[$("span",al,S(t.$t("Administer.text3"))+": ",1),$("span",null,S(P(i)(P(W),"YYYY-MM-DD HH:mm:ss")),1)]),$("div",ol,[$("span",nl,S(t.$t("Administer.text4"))+": ",1),$("span",null,S(P(i)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),$("div",sl,[$("span",il,S(t.$t("Administer.text6"))+": ",1),$("span",null,S("4"===P(r)?P(i)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss"):"-"),1)]),P(b).isDaoAdmin?(h(),N("div",cl,[$("span",ul,S(t.$t("Administer.text8"))+": ",1),$("span",rl,[_(S(e.proposalInfo.submiter.slice(0,4))+"... "+S(e.proposalInfo.submiter.slice(-4))+" ",1),$("i",{class:"icon copy icon-copy1",onClick:n[0]||(n[0]=R((t=>P(m)(e.proposalInfo.submiter)),["stop"]))})])])):Y("",!0)]),$("div",dl,[P(B)?(h(),A(Lt,{key:0,class:"btn",isButton:!0,id:e.proposalInfo.id,title:t.$t("Vote.title"),min:P(J),agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount},null,8,["id","title","min","agree","disagree"])):Y("",!0),P(u)?(h(),N("div",vl,[pl,_(" "+S(t.$t("Administer.btn2")),1)])):Y("",!0),P(s)?(h(),N("div",ml,S(t.$t("Administer.btn4")),1)):Y("",!0),P(a)&&P(o)?(h(),N("div",{key:3,class:j(["btn btn-succ",{"btn-succ-active":P(o)}]),onClick:R(le,["stop"])},S(t.$t("Administer.btn3")),11,fl)):Y("",!0)])])])),_:1},8,["title"])}}}),[["__scopeId","data-v-492d5fe7"]]),Fl={class:"pool-content"},Ml={class:"header"},Hl={class:"title"},Ll={key:0,style:{color:"#ffcd1c"}},Ol={key:0,class:"cell"},El={class:"text"},Rl=M(b({__name:"PoolItem",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e;G("poolItem",t);const l=Q(),{CancelProposal:a,RecoveryHideProposal:o}=Z(),{eth:{abi:n},utils:s}=new V,i=g((()=>{Math.ceil((new Date).getTime()/1e3);const{deadline:e,status:l}=t.proposalInfo;return l})),u=g((()=>"3"===i.value||"2"===i.value)),r=g((()=>{const e=Number(i.value);return 0===e?1:1===e?2:3})),d=g((()=>{const e=t.proposalInfo.status;return"0"===e||"1"===e?8:"4"===e?9:"2"===e||"3"==e?10:void 0})),v=g((()=>{const{status:e,flag:a}=t.proposalInfo;return l.isDaoAdmin&&"0"===a&&"2"!==e}));function p(e){const t=n.encodeParameter("string","test");return n.decodeParameter("string",t),n.decodeParameter("uint256",e)}async function m(){await o(t.proposalInfo.id),l.getSystemInfo(),l.getList(-1,!0)}async function f(){await a(t.proposalInfo.id),l.getSystemInfo(),l.getList(-1,!0)}return(t,a)=>{const o=c,n=Ke,s=Xe;return h(),N("div",Fl,[$("div",Ml,[$("div",{class:j(["icon","icon-dao-"+P(d)])},null,2),$("h4",Hl,"UIP "+S(p(e.proposalInfo.id)),1),"2"===P(i)?(h(),N("span",Ll,S(t.$t("Vote.text17")),1)):Y("",!0),P(v)?(h(),A(o,{key:1,name:"cross",class:"close",color:"#ffcd1c",onClick:f})):Y("",!0)]),"1"===e.proposalInfo.flag&&P(l).isDaoAdmin?(h(),N("div",Ol,[$("span",El,S(t.$t("Vote.text18")),1),I(o,{name:"revoke",onClick:m})])):Y("",!0),P(u)?(h(),A(s,{key:2,num:3,active:2})):(h(),A(n,{key:1,num:4,active:P(r)},null,8,["active"])),I(Bl,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])])}}}),[["__scopeId","data-v-de31ea46"]]),Gl={class:"content"},Wl={class:"flex m-x align-center"},ql={class:"search-box1"},zl={class:"tab select"},Xl={class:"select-label"},Jl=(e=>(B("data-v-b981f450"),e=e(),F(),e))((()=>$("i",{class:"icon triangle-down"},null,-1))),Kl={key:0,class:"select-items"},Ql=["onClick"],Zl=M(b({__name:"Index",setup(e){const{eth:{abi:t},utils:l}=new V,a=Q(),o=g((()=>{const e=a.proposalList;let t=[];for(let l=0;l<e.length;l++){const{subject:a,content:o,id:n}=e[l].proposalInfo,s=r(n);(""===i.value||oe(a).indexOf(i.value)>-1||oe(o).indexOf(i.value)>-1||s.indexOf(i.value)>-1)&&t.push(e[l])}return t})),n=w(0);w(0);const s=w(!1),i=w("");y((async()=>{a.getList(0,!0)}));const c=g((()=>a.isDaoAdmin?7:6)),u=g((()=>-1===n.value?"12":q.global.t("Administer.tab"+n.value)));function r(e){const l=t.encodeParameter("string","test");return t.decodeParameter("string",l),t.decodeParameter("uint256",e)}function d(){a.getList(n.value)}return(e,t)=>{const l=f;return h(),N("div",Gl,[I(qe),$("div",Wl,[$("div",ql,[I(l,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:e.$t("Administer.search"),"suffix-icon":P(W),class:"search"},null,8,["modelValue","placeholder","suffix-icon"])]),$("div",zl,[$("div",{class:"flex",style:{width:"100%"},onClick:t[1]||(t[1]=e=>s.value=!s.value)},[$("span",Xl,S(P(u)),1),Jl]),s.value?(h(),N("div",Kl,[(h(!0),N(U,null,T(P(c),((t,l)=>(h(),N("div",{class:"select-item",onClick:e=>function(e){n.value=e,a.getList(n.value,!0),s.value=!1}(l)}," - "+S(e.$t("Administer.tab"+l)),9,Ql)))),256))])):Y("",!0)])]),(h(!0),N(U,null,T(P(o),(e=>(h(),A(Rl,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])))),256)),P(a).isHasRemain?(h(),N("div",{key:0,class:"more",onClick:d},S(e.$t("Administer.text7")),1)):Y("",!0)])}}}),[["__scopeId","data-v-b981f450"]]),ea={class:"box"},ta=(e=>(B("data-v-26a3b820"),e=e(),F(),e))((()=>$("div",{class:"img"},null,-1))),la={class:"tip"},aa={class:"tip-title"},oa={class:"tip-info"},na={class:"btn btn1"},sa=M(b({__name:"Home",setup(e){const t=z(),l=p();function a(){l.goNft(1),t.replace({path:"/nft"})}return(e,t)=>{const o=u;return h(),N(U,null,[I(Zl),I(o,{show:P(l).showNftTipV1,"onUpdate:show":t[1]||(t[1]=e=>P(l).showNftTipV1=e),round:"",teleport:"body","close-on-click-overlay":!1,"close-on-popstate":!0,"overlay-class":"a"},{default:k((()=>[$("div",ea,[ta,$("div",la,[$("h4",aa,S(P(l).nftTipTitleV1),1),$("div",oa,S(P(l).nftTipTextV1),1),$("div",{class:"btns",onClick:t[0]||(t[0]=e=>P(l).close(1))},[$("div",na,S(e.$t("NftTip.btn1")),1),$("div",{class:"btn btn2",onClick:a},S(e.$t("NftTip.btn2")),1)])])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-26a3b820"]]);export{sa as default};
