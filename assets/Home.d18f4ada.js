import{c as e,t,n as a,d as l,w as o,I as n}from"./index.77de6298.js";import{P as s}from"./index.903be1c9.js";import{u as i,c,k as u,e as r}from"./contract.d09009c6.js";import"./el-popper.0912e2ce.js";import{E as v}from"./el-input.01be9ab1.js";import{d,f as p,g as m,r as f,W as b,l as g,z as I,o as w,h as V,w as y,b as x,t as h,a as A,q as $,v as k,c as S,s as P,F as D,x as _,u as C,n as N,_ as T,e as U,G as Y,J as j,K as M,i as B,D as F,au as H,a3 as L,y as O}from"./index.2cf58b4a.js";import{D as R,_ as E}from"./DaoPopup.60e578cd.js";import{S as G}from"./index.ee18f3a0.js";import{E as W}from"./el-popover.932f9982.js";import{B as q}from"./contract.8624e4ef.js";import{i as z,c as J,D as K}from"./index.d2c68f4f.js";import{a as Q,b as X,c as Z}from"./dao.1a8c17f7.js";import{D as ee}from"./contract.cfb15a02.js";import{a as te}from"./utils.718d62e4.js";import{u as ae}from"./useCopy.58c957f6.js";import"./event.a5ec15e7.js";import"./icon.671df3d5.js";import"./typescript.bf83b9a7.js";const[le,oe]=e("progress");const ne=o(d({name:le,props:{color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:t,pivotColor:String,trackColor:String,strokeWidth:a,percentage:{type:a,default:0,validator:e=>+e>=0&&+e<=100}},setup(e){const t=p(()=>e.inactive?void 0:e.color),a=e=>Math.min(Math.max(+e,0),100),o=()=>{const{textColor:l,pivotText:o,pivotColor:n,percentage:s}=e,i=a(s),c=null!=o?o:`${s}%`;if(e.showPivot&&c){const a={color:l,left:`${i}%`,transform:`translate(-${i}%,-50%)`,background:n||t.value};return m("span",{style:a,class:oe("pivot",{inactive:e.inactive})},[c])}};return()=>{const{trackColor:n,percentage:s,strokeWidth:i}=e,c=a(s),u={background:n,height:l(i)},r={width:`${c}%`,background:t.value};return m("div",{class:oe(),style:u},[m("span",{class:oe("portion",{inactive:e.inactive}),style:r},null),o()])}}})),se={class:"popover-info"},ie={class:"popover-text"},ce={class:"popover-text",style:{"margin-top":"4px"}},ue={class:"popover-time border"},re={class:"border1"},ve={class:"input item1 input-addvote"},de={class:"input-label"},pe={class:"input input-addvote"},me={class:"title1"},fe={class:"slider"},be={class:"item item-top"},ge={class:"custom-button"},Ie={class:"top"},we={class:"bottom"},Ve={class:"item item-bottom"},ye={class:"input-box"},xe={class:"input",style:{"margin-right":"12px"}},he={class:"input-label",style:{"margin-right":"12px"}},Ae={class:"select-items"},$e=["onClick"],ke={class:"input sb"},Se={class:"input-label",style:{"margin-right":"12px"}},Pe={key:0,class:"select-items"},De=["onClick"],_e={class:"text"},Ce={class:"text"},Ne={class:"text"},Te={class:"text"},Ue=T(d({__name:"AddProposalDialog",setup(e){const t=q.clone();t.config({ROUNDING_MODE:1});const a=i(),l=Q(),o=c(),{submitProposal:n}=X(),s=f(null),{eth:{abi:u}}=new b,r=f("100"),d=f(""),T=f(""),U=f(""),Y=f(-1),j=f(-1),M=f(!1),B=f(!1),F=[2,3,5,7,10];g(()=>{});const H=z({time:1e4,onFinish:()=>{setTimeout(()=>{l.getSystemInfo()},6e4)}}),L=I({cur:H.current});H.start();const O=p(()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:t}=l.accountInfo;return Number(t)>e}),K=p(()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:o}=l.accountInfo,{stakeUCON:n}=l.accountInfo,{minStakeUcon:s}=l.daoSystemInfo,i=-1===new t(n).comparedTo(new t(s));return Number(o)>e&&(H.reset(1e3*Number(Number(o)-e)),H.start()),"0"===l.accountInfo.blockFlag&&l.isStake&&a.stakeList.length>0&&!O.value&&!i}),Z=p(()=>-1!==Y.value&&-1!==j.value&&""!==T.value&&""!==U.value&&"0"!==ae.value),ae=p(()=>{if(!r.value)return"0";const{totalVote:e}=l.accountInfo;if("100"==r.value)return e;const a=new t(e).times(new t(r.value)).div(new t(1e20)).decimalPlaces(0).toString(10);return new t(a).times(1e18).decimalPlaces(0).toString(10)}),le=p(()=>{const{totalVote:e}=l.daoSystemInfo,a=l.accountInfo.totalVote;if("0"===e)return"0";return new t(a).div(new t(1e18)).decimalPlaces(0).toString(10)}),oe=p(()=>{const{totalVote:e}=l.accountInfo;return new t(e).div(new t(1e18)).decimalPlaces(0).toString(10)}),ne=p(()=>new t(l.daoSystemInfo.commitProposalBurnUcon).times(new t("1e18")).idiv(o.uconPrice).idiv(t("1000000")).toString(10));async function Ue(){if(-1===Y.value||""===T.value||""===U.value||-1===j.value||"0"===ae.value||""===d.value)return;await n("1",u.encodeParameter("string",T.value),u.encodeParameter("string",U.value),(j.value*ee).toString(),Y.value.toString(),l.daoSystemInfo.commitProposalBurnUcon,"100"==r.value?l.accountInfo.totalVote:new t(d.value).times(1e18).decimalPlaces(0).toString(10)),l.getSystemInfo(),l.getList(-1,!0),T.value="",U.value="",Y.value=-1,j.value=-1,r.value="100",s.value?.handleClose()}p(()=>"0");const Ye=p(()=>l.accountInfo.totalVote);function je(e){const a=e.target.value;if(Number(a)<0)return d.value=oe.value,void(r.value="100");const{totalVote:o}=l.accountInfo;if(1===new t(a).times(1e18).comparedTo(new t(Ye.value)))return d.value=oe.value,void(r.value="100");if(d.value=a,""===a)return void(r.value="0");const n=new t(o).div(1e18).decimalPlaces(0).times(1e18),s=new t(a).times(1e18).dividedBy(n).times(100).decimalPlaces(0).toString(10);r.value=s}function Me(e){d.value=new t(e).times(new t(oe.value)).div(100).decimalPlaces(0).toString(10)}function Be(e){r.value="100",d.value=oe.value}return(e,t)=>{const a=W,o=v,n=G,i=E;return w(),V(R,{ref_key:"el",ref:s,classText:"add",title:e.$t("AddVote.title"),disabled:!K.value,onClose:Be},{content:y(()=>[x("div",ve,[x("span",de,h(e.$t("AddVote.text1")),1),m(o,{class:"value",placeholder:e.$t("AddVote.text2"),maxlength:"30",modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e)},null,8,["placeholder","modelValue"])]),x("div",pe,[t[8]||(t[8]=x("span",{class:"input-label"},null,-1)),m(o,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",placeholder:e.$t("AddVote.text2"),rows:"6",modelValue:U.value,"onUpdate:modelValue":t[1]||(t[1]=e=>U.value=e),onInput:e.handleChangeContent},null,8,["placeholder","modelValue","onInput"])]),t[15]||(t[15]=x("div",null,null,-1)),x("h4",me,[x("span",null,h(e.$t("AddVote.text14")),1),m(o,{class:"number",type:"number",modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),placeholder:"0",onBlur:je},null,8,["modelValue"])]),x("div",fe,[x("div",be,[x("div",null,[x("span",null,h(e.$t("Vote.text2")),1),t[9]||(t[9]=x("p",null,h(0),-1))]),x("span",null,h(le.value),1)]),m(n,{modelValue:r.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>r.value=e),Me],"bar-height":"4","active-color":"#FFCD1C"},{button:y(()=>[x("div",ge,[x("div",Ie,h(d.value),1),t[10]||(t[10]=x("div",{class:"circle"},[x("span",{class:"circle-inner"})],-1)),x("div",we,h(r.value)+"%",1)])]),_:1},8,["modelValue"]),x("div",Ve,[x("div",null,[t[11]||(t[11]=x("p",null,"0%",-1)),x("span",null,h(e.$t("Vote.text3")),1)]),t[12]||(t[12]=x("span",null,h(100)+"%",-1))])]),x("div",ye,[x("div",xe,[x("span",he,h(e.$t("AddVote.text3")),1),x("div",{class:"select",onClick:t[4]||(t[4]=e=>M.value=!M.value)},[A(h(-1===Y.value?e.$t("AddVote.text5"):e.$t("AddVote.type"+(Y.value+1)))+" ",1),t[13]||(t[13]=x("i",{class:"icon triangle-down"},null,-1))]),$(x("div",Ae,[(w(),S(D,null,P(3,(t,a)=>x("div",{class:"select-item",onClick:e=>{return t=a,Y.value=t,void(M.value=!1);var t}},h(e.$t("AddVote.type"+t)),9,$e)),64))],512),[[k,M.value]])]),x("div",ke,[x("span",Se,h(e.$t("AddVote.text4")),1),x("div",{class:"select",onClick:t[5]||(t[5]=e=>B.value=!B.value)},[A(h(-1===j.value?e.$t("AddVote.text5"):e.$t("AddVote.day",{day:j.value}))+" ",1),t[14]||(t[14]=x("i",{class:"icon triangle-down"},null,-1))]),B.value?(w(),S("div",Pe,[(w(),S(D,null,P(F,t=>x("div",{class:"select-item",onClick:e=>{return a=t,j.value=a,void(B.value=!1);var a}},h(e.$t("AddVote.day",{day:t})),9,De)),64))])):_("",!0)])]),x("div",_e,h(e.$t("AddVote.text11",{value:C(J)(ne.value),value2:C(J)(C(l).daoSystemInfo.finishProposalReward),rate:C(te)(C(l).daoSystemInfo.proposalIncreaseRate)})),1),x("div",Ce,h(e.$t("AddVote.text12")),1),x("div",Ne,h(e.$t("AddVote.text13")),1),x("div",Te,h(e.$t("AddVote.text15")),1),m(i,{fee:C(l).daoSystemInfo.commitProposalBurnUcon},null,8,["fee"]),x("div",{class:N(["btn-confirm",{"btn-active":Z.value}]),onClick:Ue},h(e.$t("Confirm")),3)]),default:y(()=>[O.value?(w(),S("div",{key:0,class:N(["btn",{"btn-active":K.value}])},[m(a,{"popper-class":"popover-model",placement:"top",width:"328px",trigger:"hover","propper-style":"{background: blue}"},{reference:y(()=>[x("div",ue,[t[6]||(t[6]=x("i",{class:"icon icon-dao-26"},null,-1)),x("span",re,h(e.$t("Administer.add")),1)])]),default:y(()=>[x("div",se,[x("div",ie,h(e.$t("AddVote.text16")),1),x("div",ce,h(e.$t("AddVote.text17",{day:C(L).cur.days,hour:C(L).cur.hours,s:C(L).cur.minutes})),1)])]),_:1})],2)):(w(),S("div",{key:1,class:N(["btn",{"btn-active":K.value}])},[t[7]||(t[7]=x("i",{class:"icon icon-dao-26"},null,-1)),x("span",null,h(e.$t("Administer.add")),1)],2))]),_:1},8,["title","disabled"])}}}),[["__scopeId","data-v-a835f277"]]),Ye={class:"steps"},je=T(d({__name:"DaoStepsFail",props:{num:{},active:{},type:{}},setup(e){const t=e,a=p(()=>new q(100).div(new q(t.num-1)).decimalPlaces(2).toString(10));function l(e){return parseFloat(a.value)*e+"%"}return(t,a)=>(w(),S("div",Ye,[(w(!0),S(D,null,P(e.num-1,t=>(w(),S("span",{class:N(["step-line",{"step-line-active":e.active>=t}])},null,2))),256)),(w(!0),S(D,null,P(e.num,(a,o)=>(w(),S("div",{class:"step",style:U({left:l(o)})},[x("span",{class:N(["step-circle",{"step-circle-active":e.active>=o}])},null,2),x("p",{class:N(["step-text",{text1:e.type}])},h(t.$t("Administer.statusFail"+a)),3)],4))),256))]))}}),[["__scopeId","data-v-5cfae7d6"]]),Me={class:"steps"},Be=T(d({__name:"DaoSteps",props:{num:{},active:{},type:{}},setup(e){const t=e,a=p(()=>new q(100).div(new q(t.num-1)).decimalPlaces(2).toString(10));function l(e){return parseFloat(a.value)*e+"%"}return(t,a)=>(w(),S("div",Me,[(w(!0),S(D,null,P(e.num-1,t=>(w(),S("span",{class:N(["step-line",{"step-line-active":e.active>=t}])},null,2))),256)),(w(!0),S(D,null,P(e.num,(a,o)=>(w(),S("div",{class:"step",style:U({left:l(o)})},[x("span",{class:N(["step-circle",{"step-circle-active":e.active>=o}])},null,2),x("p",{class:N(["step-text",{text1:e.type}])},h(t.$t("Administer.status"+a)),3)],4))),256))]))}}),[["__scopeId","data-v-ca85644d"]]),Fe=q.clone();Fe.config({ROUNDING_MODE:1});const{eth:{abi:He},utils:Le}=new b,Oe=Q();Z("0x84EF0D09F9Ba4239976CC68cD6e549b5c8729dc1");const Re=c();function Ee(){i();const e=Y("poolItem")||{},t=p(()=>e.proposalInfo),a=p(()=>e.voteInfo),l=p(()=>"0"!==Oe.accountInfo.blockFlag),o=p(()=>{const e=Re.account,{operatorType:a,submiter:l}=t.value;return"1"!==a&&l.toLocaleLowerCase()===e.toLocaleLowerCase()||Oe.isDaoAdmin}),n=p(()=>"1"===t.value.status),s=p(()=>{const e=Math.ceil((new Date).getTime()/1e3);return!l.value&&e<Number(t.value.deadline)}),c=p(()=>{t.value;const{agreeAmount:e,disagreeAmount:l}=a.value;return"0"!==e||"0"!==l}),u=p(()=>{const{status:e}=t.value,{agreeAmount:l,disagreeAmount:o}=a.value;return"0"===e?new Fe(l).plus(new Fe(o)).toString(10)===Oe.accountInfo.totalVote&&"0"!==Oe.accountInfo.totalVote:"0"!==l||"0"!==o}),r=p(()=>"0"!==t.value.status&&"0"===a.value.agreeAmount&&"0"===a.value.disagreeAmount),v=p(()=>He.decodeParameter("uint256",e.proposalInfo.id)),d=p(()=>He.decodeParameter("string",e.proposalInfo.subject)),m=p(()=>He.decodeParameter("string",e.proposalInfo.content)),f=p(()=>{const{agreeAmount:t="0",disagreeAmount:a="0"}=e.voteInfo;return new Fe(t).plus(new Fe(a)).toString(10)}),b=p(()=>Oe.accountInfo.totalVote),g=p(()=>{const{totalVote:e}=Oe.accountInfo;return"0"===e||"0"===f.value?"0":new Fe(f.value).div(new Fe(e)).times(100).decimalPlaces(0).toString(10)}),I=p(()=>{const{status:t}=e.proposalInfo;return t}),w=p(()=>{const{totalVote:e}=Oe.accountInfo;return new Fe(e).div(new Fe(1e18)).decimalPlaces(0).toString(10)});return{poolItem:e,proposalInfo:t,isBlock:l,isVote:s,isExec:o,isFinish:n,noVote:r,isVoted:c,isAllVoted:u,ID:v,subject:d,content:m,userTotal:f,curRate:g,status:I,totalUserVote:w,userTotalVote:b}}const Ge={class:"title1"},We={class:"flex total"},qe={class:"title1"},ze={class:"total-item"},Je={class:"total-number disabled number"},Ke={class:"title1"},Qe={class:"total-item"},Xe={class:"title1"},Ze={class:"total-item"},et={class:"total-number disabled number"},tt={class:"slider"},at={class:"item item-top"},lt={class:"custom-button"},ot={class:"top bg"},nt={class:"bottom button-b"},st={class:"custom-button"},it={class:"top bg button-t-r"},ct={class:"bottom button-b-r"},ut={class:"custom-button"},rt={class:"top"},vt={class:"bottom"},dt={class:"item item-bottom"},pt={class:"select"},mt={class:"select-title"},ft={class:"tabs-items"},bt=["onClick"],gt={class:"circle"},It={key:0,class:"circle-inner"},wt={class:"text"},Vt={class:"text"},yt=T(d({__name:"VoteDialog",props:{id:{},agree:{},disagree:{},isButton:{type:Boolean}},setup(e){const t=q.clone();t.config({ROUNDING_MODE:1});const a=Q(),l=e,{voteProposal:o,flushProcessProposal:n,finishProposal:s}=X(),{isVote:i,ID:c,curRate:u,userTotal:r,totalUserVote:d,userTotalVote:b}=Ee(),I=f(),$=f(),k=f(),T=f(""),U=f(""),Y=f("0"),M=f(1),B=f([0,40]);function F(e){const t=e[0];e[1];B.value[0]=Number(k.value),B.value[1],t>Number(k.value)&&t<B.value[1]&&(B.value[1]=t),J(B.value[1])}function H(e){}p(()=>{const e=Number(T.value)-Number(Y.value);return e<=0?0:e});const L=p(()=>Number(U.value)+Number(Y.value));function O(){"0"===r.value?$.value=100:($.value=100,B.value[0]=Number(u.value),B.value[1]=100,Y.value=new t(r.value).div(new t(1e18)).decimalPlaces(0).toString(10)),T.value=new t(a.accountInfo.totalVote).div(new t(1e18)).decimalPlaces(0).toString(10),U.value=new t(a.accountInfo.totalVote).div(new t(1e18)).minus(Y.value).decimalPlaces(0).toString(10),k.value=u.value}g(()=>{setTimeout(()=>{O()},1e3)});const W=p(()=>Number(U.value)>0);function z(e){const l=e.target.value;if("0"===r.value?B.value[1]=0:$.value=0,l<0||!l)return U.value="0",B.value[1]=B.value[0],$.value=0,void(T.value=Y.value);const o=new t(l).plus(Y.value).times(1e18);if(1===new t(o).comparedTo(new t(b.value)))return T.value=d.value,U.value=new t(a.accountInfo.totalVote).div(new t(1e18)).minus(Y.value).decimalPlaces(0).toString(10),B.value[1]=100,void($.value=100);if(Number(o)<0||-1===new t(o).comparedTo(new t(r.value)))return void(T.value=new t(r.value).div(new t(1e18)).decimalPlaces(0).toString(10));if(T.value=(Number(l)+Number(Y.value)).toString(),""===l)return;const{totalVote:n}=a.accountInfo,s=new t(n).div(1e18).decimalPlaces(0).times(1e18),i=new t(T.value).times(1e18).dividedBy(s).times(100).decimalPlaces(0).toString(10);$.value=i,B.value[1]=Number(i)}function J(e){if("0"===r.value?B.value[1]=0:$.value=0,e<=Number(u.value)){$.value=u.value;const{totalVote:e}=a.accountInfo;return U.value="0",T.value=Y.value,void new t(r.value).times(100).div(new t(e)).decimalPlaces(20).toString(10)}T.value=new t(e).times(new t(d.value)).div(100).decimalPlaces(0).toString(10),U.value=(Number(T.value)-Number(Y.value)).toString(10),Number(T.value)<Number(Y.value)&&(T.value=Y.value)}function K(e){O(),B.value[1]=100}async function Z(){if(!W.value)return;let e="";e=100==$.value||100==B.value[1]?new t(a.accountInfo.totalVote).minus(new t(r.value)).decimalPlaces(0).toString(10):new t(U.value).times(1e18).toString(10),await o(l.id,e,1===M.value),I.value?.handleClose(),a.getSystemInfo(),a.getList(-1,!0)}return(t,l)=>{const o=v,n=G,s=E;return w(),V(R,{disabled:!C(i),ref_key:"el",ref:I,title:t.$t("DaoRedeem.title1")+" 1/2",classText:"stake-btn",onClose:K},{content:y(()=>[x("h4",Ge,[x("span",null,h(t.$t("Vote.text1",{value:C(c)})),1)]),x("div",We,[x("div",qe,[x("p",ze,h(t.$t("Vote.text14")),1),x("p",Je,h(Y.value),1)]),x("div",Ke,[x("p",Qe,h(t.$t("Vote.text15")),1),m(o,{class:"number total-number",type:"number",modelValue:U.value,"onUpdate:modelValue":l[0]||(l[0]=e=>U.value=e),placeholder:"0",onBlur:z},null,8,["modelValue"])]),x("div",Xe,[x("p",Ze,h(t.$t("Vote.text16")),1),x("p",et,h(L.value),1)])]),x("div",tt,[x("div",at,[x("div",null,[x("span",null,h(t.$t("Vote.text2")),1),l[3]||(l[3]=x("p",null,h(0)+"%",-1))]),x("span",null,h(C(d)),1)]),"0"!==C(r)?(w(),V(n,{key:0,modelValue:B.value,"onUpdate:modelValue":[l[1]||(l[1]=e=>B.value=e),F],range:"","bar-height":"4","inactive-color":"#BABBBC","active-color":"#FFCD1C",onDragEnd:H},{"left-button":y(()=>[x("div",lt,[x("div",ot,h(Y.value),1),l[4]||(l[4]=x("div",{class:"circle1"},[x("span",{class:"circle1-inner"})],-1)),x("div",nt,h(B.value[0])+"%",1)])]),"right-button":y(()=>[x("div",st,[x("div",it,h(T.value),1),l[5]||(l[5]=x("div",{class:"circle"},[x("span",{class:"circle-inner"})],-1)),x("div",ct,h(B.value[1])+"%",1)])]),_:1},8,["modelValue"])):(w(),V(n,{key:1,class:"slider1",modelValue:$.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>$.value=e),J],"bar-height":"4",max:100,"active-color":"#FFCD1C"},{button:y(()=>[x("div",ut,[x("div",rt,h(T.value),1),l[6]||(l[6]=x("div",{class:"circle"},[x("span",{class:"circle-inner"})],-1)),x("div",vt,h($.value)+"%",1)])]),_:1},8,["modelValue"])),x("div",dt,[x("div",null,[l[7]||(l[7]=x("p",null,"0%",-1)),x("span",null,h(t.$t("Vote.text3")),1)]),l[8]||(l[8]=x("span",null,h(100)+"%",-1))])]),x("div",pt,[x("h4",mt,h(t.$t("Vote.text4")),1),x("div",ft,[(w(),S(D,null,P(2,e=>x("div",{class:"tabs-item",key:e,onClick:t=>{return a=e,void(M.value=a);var a}},[x("div",gt,[M.value===e?(w(),S("span",It)):_("",!0)]),A(" "+h(t.$t("Vote.text"+(e+4))),1)],8,bt)),64))])]),x("div",wt,h(t.$t("Vote.text7")),1),x("div",Vt,h(t.$t("Vote.text8")),1),m(s,{fee:C(a).daoSystemInfo.voteProposalBurnUcon},null,8,["fee"]),x("div",{class:N(["btn-confirm",{"btn-active":W.value}]),onClick:Z},h(t.$t("Confirm")),3)]),default:y(()=>[e.isButton?(w(),S("div",{key:0,class:N(["btn",{"btn-active":C(i)}])},h(t.$t("Vote.title1")),3)):_("",!0),j(t.$slots,"button",{},void 0,!0)]),_:3},8,["disabled","title"])}}}),[["__scopeId","data-v-e583ffcc"]]),xt={class:"label"},ht=T(d({__name:"Daoprogress",props:{value:{},label:{},color:{},type:{}},setup:e=>(t,a)=>{const l=ne;return w(),S("div",{class:"progress",style:U({color:e.color})},[x("span",xt,h(e.label),1),m(l,{"show-pivot":!1,color:e.color,"stroke-width":"5",class:"content",percentage:e.value},null,8,["color","percentage"]),x("div",{class:N(["ratetext",{right:1===e.type}])},[x("span",null,h(e.value)+"%",1),j(t.$slots,"content",{},void 0,!0)],2)],4)}}),[["__scopeId","data-v-5c810f1d"]]),At={class:"items"},$t={class:"item"},kt={key:0,class:"item"},St=T(d({__name:"ViewVoteDetailDialog",props:{voteInfo:{},proposalInfo:{}},setup(e){const t=q.clone();t.config({ROUNDING_MODE:1});const a=Q(),l=e,o=p(()=>{const{status:e}=l.proposalInfo;return e}),n=p(()=>{const{agreeAmount:e,disagreeAmount:t}=l.voteInfo;return 0!==a.identity&&("0"!==e||"0"!==t)}),s=p(()=>{const{finishAmount:e}=l.voteInfo;return"3"===o.value||"4"===o.value?e:a.accountInfo.totalVote}),i=p(()=>{const{agreeAmount:e,disagreeAmount:a}=l.voteInfo;return new t(e).plus(new t(a)).div(1e18).decimalPlaces(0).toString(10)}),c=p(()=>a.daoSystemInfo),u=p(()=>{const{agreeAmount:e}=l.voteInfo;return"0"===s.value?0:new t(e).div(new t(s.value)).times(new t(100)).decimalPlaces(2).toString(10)}),r=p(()=>{const{agreeAmount:e}=l.voteInfo;return new t(e).div(new t(1e18)).decimalPlaces(0).toString(10)}),v=p(()=>{const{disagreeAmount:e}=l.voteInfo;return"0"===a.accountInfo.totalVote?0:new t(e).div(new t(s.value)).times(new t(100)).decimalPlaces(2).toString(10)}),d=p(()=>{const{disagreeAmount:e}=l.voteInfo;return new t(e).div(new t(1e18)).decimalPlaces(0).toString(10)}),f=p(()=>(c.value,new t(100).minus(new t(u.value)).minus(new t(v.value)).decimalPlaces(2).toString(10))),b=p(()=>{const{status:e}=l.proposalInfo;if("0"!==e)return"0";const{agreeAmount:o,disagreeAmount:n}=l.voteInfo,{totalVote:s}=a.accountInfo;return new t(s).minus(new t(o).plus(new t(n))).div(new t(1e18)).decimalPlaces(0).toString(10)}),I=p(()=>{const{agreeAmount:e,disagreeAmount:a,finishAmount:o}=l.voteInfo;return new t(s.value).minus(new t(e).plus(new t(a))).div(new t(1e18)).decimalPlaces(0).toString(10)});return g(()=>{}),(t,a)=>(w(),V(R,{ref:"el",height:"40%",title:t.$t("Vote.text11"),disabled:!n.value,classText:"stake-btn"},{content:y(()=>[x("div",At,[x("div",$t,[a[0]||(a[0]=x("i",{class:"icon"},null,-1)),x("span",null,h(t.$t("Vote.text12",{value:i.value})),1)]),"0"===e.proposalInfo.status?(w(),S("div",kt,[a[1]||(a[1]=x("i",{class:"icon"},null,-1)),x("span",null,h(t.$t("Vote.text13",{value:b.value})),1)])):_("",!0)]),m(ht,{type:1,label:t.$t("Dao.agree"),value:u.value,color:"#1dc872"},{content:y(()=>[A(" ("+h(r.value)+") ",1)]),_:1},8,["label","value"]),m(ht,{type:1,label:t.$t("Dao.disapprove"),value:v.value,color:"#1263F1"},{content:y(()=>[A(" ("+h(d.value)+") ",1)]),_:1},8,["label","value"]),m(ht,{type:1,label:t.$t("Dao.ballot"),value:f.value,color:"#767676"},{content:y(()=>[A(" ("+h(I.value)+") ",1)]),_:1},8,["label","value"])]),default:y(()=>[x("div",{class:N(["btn-view",{"btn-active":n.value}])},h(t.$t("Vote.text9")),3)]),_:1},8,["title","disabled"]))}}),[["__scopeId","data-v-5a476dbb"]]),Pt={class:"main"},Dt={class:"main-content"},_t={class:"cell"},Ct={class:"label"},Nt={class:"cell"},Tt={class:"label"},Ut={class:"cell"},Yt={class:"label"},jt={class:"cell"},Mt={class:"label"},Bt={key:0,class:"cell"},Ft={class:"label"},Ht={class:"flex"},Lt={class:"btns1"},Ot={key:1,class:"btn btn-voted"},Rt={key:2,class:"btn"},Et={class:"title"},Gt={class:"b-l content-text"},Wt={class:"b-l input-addvote"},qt={class:"cell1"},zt={class:"cell1-label"},Jt={class:"cell"},Kt={class:"cell1"},Qt={class:"cell1-label"},Xt={class:"cell"},Zt={key:0,class:"cell1"},ea={class:"cell1-label"},ta={class:"cell"},aa={class:"select input"},la={class:"select-title"},oa={class:"tabs-items"},na={class:"circle"},sa={key:0,class:"circle-inner"},ia={class:"text-desc"},ca={class:"btns"},ua={key:2,class:"vote-text"},ra=T(d({__name:"VoteDetailDialog",props:{voteInfo:{},proposalInfo:{}},setup(e){const{isVote:t,isExec:a,isFinish:l,noVote:o,isVoted:n,isAllVoted:s,status:i,ID:c,subject:u,content:r}=Ee(),{copy:d}=ae(),I=Q(),$=e,{finishProposal:k,CancelProposal:T}=X();new b;const U=p(()=>new q($.voteInfo.agreeAmount).plus(new q($.voteInfo.disagreeAmount)).toString(10)),Y=p(()=>{const{deadline:e,status:t}=$.proposalInfo;$.voteInfo;const{totalVote:a}=I.accountInfo;return"0"===t&&a!==U.value}),j=p(()=>"3"===i.value||"2"===i.value),F=p(()=>I.daoSystemInfo),H=p(()=>{const{totalVote:e}=F.value,t="0"===i.value?e:$.proposalInfo.totalCount,{agreeCount:a}=$.proposalInfo;return new q(a).times(new q(100)).div(new q(t)).decimalPlaces(2).toString(10)}),L=p(()=>{const{totalVote:e}=F.value,t="0"===i.value?e:$.proposalInfo.totalCount,{disagreeCount:a}=$.proposalInfo;return new q(a).times(new q(100)).div(new q(t)).decimalPlaces(2).toString(10)}),O=p(()=>{const{totalVote:e}=F.value;return"0"===i.value||$.proposalInfo.totalCount,$.proposalInfo,new q(100).minus(new q(H.value)).minus(new q(L.value)).decimalPlaces(2).toString(10)}),E=p(()=>{const e=Number(i.value);return 0===e?1:1===e?2:3}),G=p(()=>{const{deadline:e,duration:t}=$.proposalInfo;return(e-t).toString()}),W=f(""),z=f("0");g(()=>{const{totalVote:e}=I.daoSystemInfo;z.value=new q(U.value).plus(new q(Z.value)).div(new q(e)).times(100).decimalPlaces(0).toString(10)});const J=p(()=>{const e=$.proposalInfo.status;I.accountInfo;const t="0"===e?I.daoSystemInfo.totalVote:$.proposalInfo.totalCount;return new q(U.value).div(new q(t)).times(100).decimalPlaces(0).toString(10)}),Z=p(()=>{const{totalVote:e}=I.accountInfo;return new q(e).times(new q(W.value)).div(new q(100)).decimalPlaces(0).toString(10)});p(()=>"0"===i.value?I.daoSystemInfo.totalVote:$.proposalInfo.totalCount);const ee=p(()=>{const{agreeAmount:e,disagreeAmount:t}=$.voteInfo,{totalVote:a}=I.accountInfo;return new q(a).minus(new q(e).plus(new q(t))).div(new q(1e18)).decimalPlaces(0).toString(10)});function te(){}async function le(){"1"===i.value&&(await k($.proposalInfo.id),I.getSystemInfo(),I.getList(-1,!0))}return(n,p)=>{const f=Be,b=je,g=v;return w(),V(R,{ref:"el",height:"90%",classText:"stake-btn",title:"UIP "+C(c)+" "+n.$t("AddVote.text6"),disabled:!1},{content:y(()=>[j.value?(w(),V(b,{key:1,type:1,num:3,active:2})):(w(),V(f,{key:0,type:1,num:4,active:E.value},null,8,["active"])),x("h4",Et,[x("span",null,h(C(u)),1)]),x("div",Gt,[m(g,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",disabled:!0,placeholder:n.$t("AddVote.text2"),rows:"6",modelValue:C(r),"onUpdate:modelValue":p[1]||(p[1]=e=>M(r)?r.value=e:null)},null,8,["placeholder","modelValue"])]),x("div",Wt,[x("div",qt,[x("div",zt,h(n.$t("AddVote.text8"))+":",1),x("div",Jt,h(C(K)(G.value,"YYYY-MM-DD HH:mm:ss")),1)]),x("div",Kt,[x("div",Qt,h(n.$t("AddVote.text9"))+":",1),x("div",Xt,h(C(K)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),"4"===C(i)?(w(),S("div",Zt,[x("div",ea,h(n.$t("Administer.text6"))+":",1),x("div",ta,h(C(K)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss")),1)])):_("",!0)]),x("div",aa,[x("h4",la,h(n.$t("AddVote.text7")),1),x("div",oa,[(w(),S(D,null,P(3,(t,a)=>x("div",{class:"tabs-item",key:t},[x("div",na,[e.proposalInfo.operatorType==a?(w(),S("span",sa)):_("",!0)]),A(" "+h(n.$t("AddVote.type"+t)),1)])),64))])]),m(ht,{label:n.$t("Dao.agree"),value:H.value,color:"#1dc872"},null,8,["label","value"]),m(ht,{label:n.$t("Dao.disapprove"),value:L.value,color:"#1263F1"},null,8,["label","value"]),m(ht,{label:n.$t("Dao.ballot"),value:O.value,color:"#767676"},null,8,["label","value"]),x("div",ia,h(n.$t("AddVote.text10")),1),x("div",ca,[Y.value?(w(),V(yt,{key:0,disabled:!C(t),id:e.proposalInfo.id,title:n.$t("Vote.title"),min:J.value,agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount,voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},{button:y(()=>[Y.value?(w(),S("div",{key:0,class:N(["btn-confirm",{"btn-active":C(t)}]),isButton:!0,onClick:te},h(n.$t("Vote.title")),3)):_("",!0)]),_:1},8,["disabled","id","title","min","agree","disagree","voteInfo","proposalInfo"])):_("",!0),m(St,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])]),Y.value?(w(),S("div",ua,[p[3]||(p[3]=x("i",{class:"icon"},null,-1)),x("span",null,h(n.$t("Vote.text10",{value:ee.value})),1)])):_("",!0)]),default:y(()=>[x("div",Pt,[x("div",Dt,[x("div",_t,[x("span",Ct,h(n.$t("Administer.text1"))+": ",1),x("span",null,h(C(u)),1)]),x("div",Nt,[x("span",Tt,h(n.$t("Administer.text3"))+": ",1),x("span",null,h(C(K)(G.value,"YYYY-MM-DD HH:mm:ss")),1)]),x("div",Ut,[x("span",Yt,h(n.$t("Administer.text4"))+": ",1),x("span",null,h(C(K)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),x("div",jt,[x("span",Mt,h(n.$t("Administer.text6"))+": ",1),x("span",null,h("4"===C(i)?C(K)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss"):"-"),1)]),C(I).isDaoAdmin?(w(),S("div",Bt,[x("span",Ft,h(n.$t("Administer.text8"))+": ",1),x("span",Ht,[A(h(e.proposalInfo.submiter.slice(0,4))+"... "+h(e.proposalInfo.submiter.slice(-4))+" ",1),x("i",{class:"icon copy icon-copy1",onClick:p[0]||(p[0]=B(t=>C(d)(e.proposalInfo.submiter),["stop"]))})])])):_("",!0)]),x("div",Lt,[Y.value?(w(),V(yt,{key:0,class:"btn",isButton:!0,id:e.proposalInfo.id,title:n.$t("Vote.title"),min:J.value,agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount},null,8,["id","title","min","agree","disagree"])):_("",!0),C(s)?(w(),S("div",Ot,[p[2]||(p[2]=x("i",{class:"icon icon-dao-18"},null,-1)),A(" "+h(n.$t("Administer.btn2")),1)])):_("",!0),C(o)?(w(),S("div",Rt,h(n.$t("Administer.btn4")),1)):_("",!0),C(a)&&C(l)?(w(),S("div",{key:3,class:N(["btn btn-succ",{"btn-succ-active":C(l)}]),onClick:B(le,["stop"])},h(n.$t("Administer.btn3")),3)):_("",!0)])])]),_:1},8,["title"])}}}),[["__scopeId","data-v-492d5fe7"]]),va={class:"pool-content"},da={class:"header"},pa={class:"title"},ma={key:0,style:{color:"#ffcd1c"}},fa={key:0,class:"cell"},ba={class:"text"},ga=T(d({__name:"PoolItem",props:{voteInfo:{},proposalInfo:{}},setup(e){const t=e;F("poolItem",t);const a=Q(),{CancelProposal:l,RecoveryHideProposal:o}=X(),{eth:{abi:s},utils:i}=new b,c=p(()=>{Math.ceil((new Date).getTime()/1e3);const{deadline:e,status:a}=t.proposalInfo;return a}),u=p(()=>"3"===c.value||"2"===c.value),r=p(()=>{const e=Number(c.value);return 0===e?1:1===e?2:3}),v=p(()=>{const e=t.proposalInfo.status;return"0"===e||"1"===e?8:"4"===e?9:"2"===e||"3"==e?10:void 0}),d=p(()=>{const{status:e,flag:l}=t.proposalInfo;return a.isDaoAdmin&&"0"===l&&"2"!==e});function f(e){const t=s.encodeParameter("string","test");return s.decodeParameter("string",t),s.decodeParameter("uint256",e)}async function g(){await o(t.proposalInfo.id),a.getSystemInfo(),a.getList(-1,!0)}async function I(){await l(t.proposalInfo.id),a.getSystemInfo(),a.getList(-1,!0)}return(t,l)=>{const o=n,s=Be,i=je;return w(),S("div",va,[x("div",da,[x("div",{class:N(["icon","icon-dao-"+v.value])},null,2),x("h4",pa,"UIP "+h(f(e.proposalInfo.id)),1),"2"===c.value?(w(),S("span",ma,h(t.$t("Vote.text17")),1)):_("",!0),d.value?(w(),V(o,{key:1,name:"cross",class:"close",color:"#ffcd1c",onClick:I})):_("",!0)]),"1"===e.proposalInfo.flag&&C(a).isDaoAdmin?(w(),S("div",fa,[x("span",ba,h(t.$t("Vote.text18")),1),m(o,{name:"revoke",onClick:g})])):_("",!0),u.value?(w(),V(i,{key:2,num:3,active:2})):(w(),V(s,{key:1,num:4,active:r.value},null,8,["active"])),m(ra,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])])}}}),[["__scopeId","data-v-de31ea46"]]),Ia={class:"content"},wa={class:"flex mx-22px align-center","justify-between":""},Va={class:"search-box1"},ya={class:"tab select"},xa={class:"select-label"},ha={key:0,class:"select-items"},Aa=["onClick"],$a=T(d({__name:"Index",setup(e){const{eth:{abi:t},utils:a}=new b,l=Q(),o=p(()=>{const e=l.proposalList;let t=[];for(let a=0;a<e.length;a++){const{subject:l,content:o,id:n}=e[a].proposalInfo,s=d(n);(""===i.value||u(l).indexOf(i.value)>-1||u(o).indexOf(i.value)>-1||s.indexOf(i.value)>-1)&&t.push(e[a])}return t}),n=f(0);f(0);const s=f(!1),i=f("");g(async()=>{});const c=p(()=>l.isDaoAdmin?7:6),r=p(()=>-1===n.value?"12":L.global.t("Administer.tab"+n.value));function d(e){const a=t.encodeParameter("string","test");return t.decodeParameter("string",a),t.decodeParameter("uint256",e)}function I(){l.getList(n.value)}return(e,t)=>{const a=v;return w(),S("div",Ia,[m(Ue),x("div",wa,[x("div",Va,[m(a,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:e.$t("Administer.search"),"suffix-icon":C(H),class:"search"},null,8,["modelValue","placeholder","suffix-icon"])]),x("div",ya,[x("div",{class:"flex",style:{width:"100%"},onClick:t[1]||(t[1]=e=>s.value=!s.value)},[x("span",xa,h(r.value),1),t[2]||(t[2]=x("i",{class:"icon triangle-down"},null,-1))]),s.value?(w(),S("div",ha,[(w(!0),S(D,null,P(c.value,(t,a)=>(w(),S("div",{class:"select-item",onClick:e=>function(e){n.value=e,l.getList(n.value,!0),s.value=!1}(a)}," - "+h(e.$t("Administer.tab"+a)),9,Aa))),256))])):_("",!0)])]),(w(!0),S(D,null,P(o.value,e=>(w(),V(ga,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"]))),256)),C(l).isHasRemain?(w(),S("div",{key:0,class:"more",onClick:I},h(e.$t("Administer.text7")),1)):_("",!0)])}}}),[["__scopeId","data-v-925b95ae"]]),ka={class:"box"},Sa={class:"tip"},Pa={class:"tip-title"},Da={class:"tip-info"},_a={class:"btn btn1"},Ca=T(d({__name:"Home",setup(e){const t=O(),a=r();function l(){a.goNft(1),t.replace({path:"/nft"})}return(e,t)=>{const o=s;return w(),S(D,null,[m($a),m(o,{show:C(a).showNftTipV1,"onUpdate:show":t[1]||(t[1]=e=>C(a).showNftTipV1=e),round:"",teleport:"body","close-on-click-overlay":!1,"close-on-popstate":!0,"overlay-class":"a"},{default:y(()=>[x("div",ka,[t[2]||(t[2]=x("div",{class:"img"},null,-1)),x("div",Sa,[x("h4",Pa,h(C(a).nftTipTitleV1),1),x("div",Da,h(C(a).nftTipTextV1),1),x("div",{class:"btns",onClick:t[0]||(t[0]=e=>C(a).close(1))},[x("div",_a,h(e.$t("NftTip.btn1")),1),x("div",{class:"btn btn2",onClick:l},h(e.$t("NftTip.btn2")),1)])])])]),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-26a3b820"]]);export{Ca as default};
