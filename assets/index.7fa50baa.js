import{H as e,Z as n,c as t,r as o,A as a,C as s,U as l,h as i,u as r,L as c,E as u,i as d,M as v,B as p,$ as f,D as h,d as m,b as y,T as w,n as b,v as g,a0 as x,F as k,I as O}from"./index.f862c6d0.js";import{i as C,d as I,n as S,e as T,g as z,t as B,u as L,h as A,j as E,k as P,w as Y,m as j,l as H,I as R}from"./index.8e6de02e.js";var X="undefined"!=typeof window;function D(e){return X?requestAnimationFrame(e):-1}function N(e){D((()=>D(e)))}var V=(e,n)=>({top:0,left:0,right:e,bottom:n,width:e,height:n}),F=e=>{const n=r(e);if(n===window){const e=n.innerWidth,t=n.innerHeight;return V(e,t)}return(null==n?void 0:n.getBoundingClientRect)?n.getBoundingClientRect():V(0,0)};function M(a){const s=e(a,null);if(s){const e=c(),{link:o,unlink:a,internalChildren:l}=s;o(e),n((()=>a(e)));return{parent:s,index:t((()=>l.indexOf(e)))}}return{parent:null,index:o(-1)}}var $,W,q=(e,n)=>{const t=e.indexOf(n);return-1===t?e.findIndex((e=>void 0!==n.key&&null!==n.key&&e.type===n.type&&e.key===n.key)):t};function K(e,n,t){const o=function(e){const n=[],t=e=>{Array.isArray(e)&&e.forEach((e=>{var o;f(e)&&(n.push(e),(null==(o=e.component)?void 0:o.subTree)&&(n.push(e.component.subTree),t(e.component.subTree.children)),e.children&&t(e.children))}))};return t(e),n}(e.subTree.children);t.sort(((e,n)=>q(o,e.vnode)-q(o,n.vnode)));const a=t.map((e=>e.proxy));n.sort(((e,n)=>a.indexOf(e)-a.indexOf(n)))}function U(e){const n=a([]),t=a([]),o=c();return{children:n,linkChildren:a=>{u(e,Object.assign({link:e=>{e.proxy&&(t.push(e),n.push(e.proxy),K(o,n,t))},unlink:e=>{const o=t.indexOf(e);n.splice(o,1),t.splice(o,1)},children:n,internalChildren:t},a))}}}function Z(e){let n;d((()=>{e(),v((()=>{n=!0}))})),p((()=>{n&&e()}))}function G(e,t,o={}){if(!X)return;const{target:a=window,passive:c=!1,capture:u=!1}=o;let d,v=!1;const p=n=>{if(v)return;const o=r(n);o&&!d&&(o.addEventListener(e,t,{capture:u,passive:c}),d=!0)},f=n=>{if(v)return;const o=r(n);o&&d&&(o.removeEventListener(e,t,u),d=!1)};let h;return n((()=>f(a))),s((()=>f(a))),Z((()=>p(a))),l(a)&&(h=i(a,((e,n)=>{f(n),p(e)}))),()=>{null==h||h(),f(a),v=!0}}var J,Q=/scroll|auto|overlay/i,_=X?window:void 0;function ee(e){return"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType}function ne(){if(!J&&(J=o("visible"),X)){const e=()=>{J.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return J}var te=Symbol("van-field");function oe(n){const t=e(te,null);t&&!t.customValue.value&&(t.customValue.value=n,i(n,(()=>{t.resetValidation(),t.validateWithTrigger("onChange")})))}function ae(e,n){"scrollTop"in e?e.scrollTop=n:e.scrollTo(e.scrollX,n)}function se(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function le(e){ae(window,e),ae(document.body,e)}const ie=C();function re(){ie&&le(se())}const ce=e=>e.stopPropagation();function ue(e,n){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),n&&ce(e)}function de(e){const n=r(e);if(!n)return!1;const t=window.getComputedStyle(n),o="none"===t.display,a=null===n.offsetParent&&"fixed"!==t.position;return o||a}const{width:ve,height:pe}=function(){if(!$&&($=o(0),W=o(0),X)){const e=()=>{$.value=window.innerWidth,W.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:$,height:W}}(),fe="van-hairline--top-bottom",he=Symbol("van-form");const me=Symbol();function ye(n){const t=e(me,null);t&&i(t,(e=>{e&&n()}))}function we(e){const n=c();n&&T(n.proxy,e)}const be={show:Boolean,zIndex:z,overlay:B,duration:z,teleport:[String,Object],lockScroll:B,lazyRender:B,beforeClose:Function,overlayStyle:Object,overlayClass:L,transitionAppear:Boolean,closeOnClickOverlay:B};function ge(){const e=o(0),n=o(0),t=o(0),a=o(0),s=o(0),l=o(0),i=o(""),r=()=>{t.value=0,a.value=0,s.value=0,l.value=0,i.value=""};return{move:o=>{const r=o.touches[0];t.value=(r.clientX<0?0:r.clientX)-e.value,a.value=r.clientY-n.value,s.value=Math.abs(t.value),l.value=Math.abs(a.value);var c,u;(!i.value||s.value<10&&l.value<10)&&(i.value=(c=s.value,u=l.value,c>u?"horizontal":u>c?"vertical":""))},start:t=>{r(),e.value=t.touches[0].clientX,n.value=t.touches[0].clientY},reset:r,startX:e,startY:n,deltaX:t,deltaY:a,offsetX:s,offsetY:l,direction:i,isVertical:()=>"vertical"===i.value,isHorizontal:()=>"horizontal"===i.value}}let xe=0;const ke="van-overflow-hidden";function Oe(e,n){const t=ge(),o=n=>{t.move(n);const o=t.deltaY.value>0?"10":"01",a=function(e,n=_){let t=e;for(;t&&t!==n&&ee(t);){const{overflowY:e}=window.getComputedStyle(t);if(Q.test(e))return t;t=t.parentNode}return n}(n.target,e.value),{scrollHeight:s,offsetHeight:l,scrollTop:i}=a;let r="11";0===i?r=l>=s?"00":"01":i+l>=s&&(r="10"),"11"===r||!t.isVertical()||parseInt(r,2)&parseInt(o,2)||ue(n,!0)},a=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",o,{passive:!1}),xe||document.body.classList.add(ke),xe++},l=()=>{xe&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",o),xe--,xe||document.body.classList.remove(ke))},r=()=>n()&&l();Z((()=>n()&&a())),s(r),h(r),i(n,(e=>{e?a():l()}))}function Ce(e){const n=o(!1);return i(e,(e=>{e&&(n.value=e)}),{immediate:!0}),e=>()=>n.value?e():null}const[Ie,Se]=A("overlay");const Te=Y(m({name:Ie,props:{show:Boolean,zIndex:z,duration:z,className:L,lockScroll:B,lazyRender:B,customStyle:Object},setup(e,{slots:n}){const t=o(),a=Ce((()=>e.show||!e.lazyRender))((()=>{var o;const a=T(E(e.zIndex),e.customStyle);return P(e.duration)&&(a.animationDuration=`${e.duration}s`),b(y("div",{ref:t,style:a,class:[Se(),e.className]},[null==(o=n.default)?void 0:o.call(n)]),[[g,e.show]])}));return G("touchmove",(n=>{e.lockScroll&&ue(n,!0)}),{target:t}),()=>y(w,{name:"van-fade",appear:!0},{default:a})}})),ze=T({},be,{round:Boolean,position:j("center"),closeIcon:j("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:j("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Be,Le]=A("popup");const Ae=Y(m({name:Be,inheritAttrs:!1,props:ze,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:a,slots:l}){let r,c;const f=o(),h=o(),m=Ce((()=>e.show||!e.lazyRender)),C=t((()=>{const n={zIndex:f.value};if(P(e.duration)){n["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`}return n})),T=()=>{r||(r=!0,f.value=void 0!==e.zIndex?+e.zIndex:H(),n("open"))},z=()=>{r&&function(e,{args:n=[],done:t,canceled:o}){if(e){const a=e.apply(null,n);I(a)?a.then((e=>{e?t():o&&o()})).catch(S):a?t():o&&o()}else t()}(e.beforeClose,{done(){r=!1,n("close"),n("update:show",!1)}})},B=t=>{n("clickOverlay",t),e.closeOnClickOverlay&&z()},L=()=>{if(e.overlay)return y(Te,{show:e.show,class:e.overlayClass,zIndex:f.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:B},{default:l["overlay-content"]})},A=e=>{n("clickCloseIcon",e),z()},E=()=>{if(e.closeable)return y(R,{role:"button",tabindex:0,name:e.closeIcon,class:[Le("close-icon",e.closeIconPosition),"van-haptics-feedback"],classPrefix:e.iconPrefix,onClick:A},null)},Y=()=>n("opened"),j=()=>n("closed"),X=e=>n("keydown",e),D=m((()=>{var n;const{round:t,position:o,safeAreaInsetTop:s,safeAreaInsetBottom:i}=e;return b(y("div",O({ref:h,style:C.value,role:"dialog",tabindex:0,class:[Le({round:t,[o]:o}),{"van-safe-area-top":s,"van-safe-area-bottom":i}],onKeydown:X},a),[null==(n=l.default)?void 0:n.call(l),E()]),[[g,e.show]])})),N=()=>{const{position:n,transition:t,transitionAppear:o}=e;return y(w,{name:t||("center"===n?"van-fade":`van-popup-slide-${n}`),appear:o,onAfterEnter:Y,onAfterLeave:j},{default:D})};return i((()=>e.show),(e=>{e&&!r&&(T(),0===a.tabindex&&v((()=>{var e;null==(e=h.value)||e.focus()}))),!e&&r&&(r=!1,n("close"))})),we({popupRef:h}),Oe(h,(()=>e.show&&e.lockScroll)),G("popstate",(()=>{e.closeOnPopstate&&(z(),c=!1)})),d((()=>{e.show&&T()})),p((()=>{c&&(n("update:show",!0),c=!1)})),s((()=>{e.show&&e.teleport&&(z(),c=!0)})),u(me,(()=>e.show)),()=>e.teleport?y(x,{to:e.teleport},{default:()=>[L(),N()]}):y(k,null,[L(),N()])}}));export{fe as B,te as C,he as F,Ae as P,we as a,G as b,ge as c,U as d,pe as e,ne as f,se as g,N as h,de as i,oe as j,F as k,ce as l,Ce as m,D as n,ye as o,ue as p,re as r,le as s,M as u,ve as w};
