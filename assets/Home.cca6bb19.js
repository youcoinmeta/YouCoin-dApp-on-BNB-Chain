import{h as e,t,g as a,D as l,w as o,B as n,c as s,ad as i,I as c}from"./index.6399d1e7.js";import{P as u}from"./index.d6a79570.js";import{u as r,d,f as v,c as p}from"./system.baf15b3c.js";import{E as m}from"./el-popper.e0d3ba65.js";import{E as f}from"./el-input.41afcbdb.js";import{d as b,c as g,b as I,r as w,W as V,i as y,A as x,o as h,g as A,w as k,e as $,t as S,u as P,j as _,n as D,v as C,a as N,s as T,F as U,y as Y,x as j,p as B,f as F,_ as M,a4 as H,H as L,a3 as O,U as E,q as R,E as G,ak as W,X as q,z}from"./index.a4b4b41e.js";import{D as X,_ as J}from"./DaoPopup.327b50a4.js";import{S as K}from"./index.192cc04e.js";import{u as Q,a as Z,b as ee}from"./dao.daa30387.js";import{D as te}from"./contract.ad5dde8a.js";import{a as ae}from"./utils.4cf69ac7.js";import{u as le}from"./useCopy.50ec08ec.js";import{g as oe}from"./contract.6eb045b0.js";import"./index.c35f81a9.js";import"./index.aff0cb41.js";import"./tip.9f3691cb.js";const[ne,se]=e("progress");const ie=o(b({name:ne,props:{color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:t,pivotColor:String,trackColor:String,strokeWidth:a,percentage:{type:a,default:0,validator:e=>e>=0&&e<=100}},setup(e){const t=g((()=>e.inactive?void 0:e.color)),a=()=>{const{textColor:a,pivotText:l,pivotColor:o,percentage:n}=e,s=null!=l?l:`${n}%`;if(e.showPivot&&s){const l={color:a,left:+n+"%",transform:`translate(-${+n}%,-50%)`,background:o||t.value};return I("span",{style:l,class:se("pivot",{inactive:e.inactive})},[s])}};return()=>{const{trackColor:o,percentage:n,strokeWidth:s}=e,i={background:o,height:l(s)},c={width:`${n}%`,background:t.value};return I("div",{class:se(),style:i},[I("span",{class:se("portion",{inactive:e.inactive}),style:c},null),a()])}}})),ce=e=>(B("data-v-e83a2644"),e=e(),F(),e),ue={class:"popover-info"},re={class:"popover-text"},de={class:"popover-text",style:{"margin-top":"4px"}},ve={class:"popover-time border"},pe=ce((()=>$("i",{class:"icon icon-dao-26"},null,-1))),me={class:"border1"},fe=ce((()=>$("i",{class:"icon icon-dao-26"},null,-1))),be={class:"input item1 input-addvote"},ge={class:"input-label"},Ie={class:"input input-addvote"},we=ce((()=>$("span",{class:"input-label"},null,-1))),Ve=ce((()=>$("div",null,null,-1))),ye={class:"title1"},xe={class:"slider"},he={class:"item item-top"},Ae=ce((()=>$("p",null,S(0),-1))),ke={class:"custom-button"},$e={class:"top"},Se=ce((()=>$("div",{class:"circle"},[$("span",{class:"circle-inner"})],-1))),Pe={class:"bottom"},_e={class:"item item-bottom"},De=ce((()=>$("p",null,"0%",-1))),Ce=ce((()=>$("span",null,S(100)+"%",-1))),Ne={class:"input-box"},Te={class:"input",style:{"margin-right":"12px"}},Ue={class:"input-label",style:{"margin-right":"12px"}},Ye=ce((()=>$("i",{class:"icon triangle-down"},null,-1))),je={class:"select-items"},Be=["onClick"],Fe={class:"input sb"},Me={class:"input-label",style:{"margin-right":"12px"}},He=ce((()=>$("i",{class:"icon triangle-down"},null,-1))),Le={key:0,class:"select-items"},Oe=["onClick"],Ee={class:"text"},Re={class:"text"},Ge={class:"text"},We={class:"text"},qe=M(b({__name:"AddProposalDialog",setup(e){const t=n.clone();t.config({ROUNDING_MODE:1});const a=r(),l=Q(),o=d(),{submitProposal:i}=Z(),c=w(null),{eth:{abi:u}}=new V,p=w("100"),b=w(""),B=w(""),F=w(""),M=w(-1),H=w(-1),L=w(!1),O=w(!1),E=[2,3,5,7,10];y((()=>{}));const R=v({time:1e4,onFinish:()=>{setTimeout((()=>{l.getSystemInfo()}),6e4)}}),G=x({cur:R.current});R.start();const W=g((()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:t}=l.accountInfo;return Number(t)>e})),q=g((()=>{const e=Math.ceil((new Date).getTime()/1e3),{blockSubmitDeadline:o}=l.accountInfo,{stakeUCON:n}=l.accountInfo,{minStakeUcon:s}=l.daoSystemInfo,i=-1===new t(n).comparedTo(new t(s));return Number(o)>e&&(R.reset(1e3*Number(Number(o)-e)),R.start()),"0"===l.accountInfo.blockFlag&&l.isStake&&a.stakeList.length>0&&!W.value&&!i})),z=g((()=>-1!==M.value&&-1!==H.value&&""!==B.value&&""!==F.value&&"0"!==ee.value)),ee=g((()=>{if(!p.value)return"0";const{totalVote:e}=l.accountInfo;if("100"==p.value)return e;const a=new t(e).times(new t(p.value)).div(new t(1e20)).decimalPlaces(0).toString(10);return new t(a).times(1e18).decimalPlaces(0).toString(10)})),le=g((()=>{const{totalVote:e}=l.daoSystemInfo,a=l.accountInfo.totalVote;if("0"===e)return"0";return new t(a).div(new t(1e18)).decimalPlaces(0).toString(10)})),oe=g((()=>{const{totalVote:e}=l.accountInfo;return new t(e).div(new t(1e18)).decimalPlaces(0).toString(10)})),ne=g((()=>new t(l.daoSystemInfo.commitProposalBurnUcon).times(new t("1e18")).idiv(o.uconPrice).idiv(t("1000000")).toString(10)));async function se(){var e;if(-1===M.value||""===B.value||""===F.value||-1===H.value||"0"===ee.value||""===b.value)return;await i("1",u.encodeParameter("string",B.value),u.encodeParameter("string",F.value),(H.value*te).toString(),M.value.toString(),l.daoSystemInfo.commitProposalBurnUcon,"100"==p.value?l.accountInfo.totalVote:new t(b.value).times(1e18).decimalPlaces(0).toString(10)),l.getSystemInfo(),l.getList(-1,!0),B.value="",F.value="",M.value=-1,H.value=-1,p.value="100",null==(e=c.value)||e.handleClose()}g((()=>"0"));const ie=g((()=>l.accountInfo.totalVote));function ce(e){const a=e.target.value;if(Number(a)<0)return b.value=oe.value,void(p.value="100");const{totalVote:o}=l.accountInfo;if(1===new t(a).times(1e18).comparedTo(new t(ie.value)))return b.value=oe.value,void(p.value="100");if(b.value=a,""===a)return void(p.value="0");const n=new t(o).div(1e18).decimalPlaces(0).times(1e18),s=new t(a).times(1e18).dividedBy(n).times(100).decimalPlaces(0).toString(10);p.value=s}function qe(e){b.value=new t(e).times(new t(oe.value)).div(100).decimalPlaces(0).toString(10)}function ze(e){p.value="100",b.value=oe.value}return(e,t)=>{const a=m,o=f,n=K,i=J;return h(),A(X,{ref_key:"el",ref:c,classText:"add",title:e.$t("AddVote.title"),disabled:!P(q),onClose:ze},{content:k((()=>[$("div",be,[$("span",ge,S(e.$t("AddVote.text1")),1),I(o,{class:"value",placeholder:e.$t("AddVote.text2"),maxlength:"30",modelValue:B.value,"onUpdate:modelValue":t[0]||(t[0]=e=>B.value=e)},null,8,["placeholder","modelValue"])]),$("div",Ie,[we,I(o,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",placeholder:e.$t("AddVote.text2"),rows:"6",modelValue:F.value,"onUpdate:modelValue":t[1]||(t[1]=e=>F.value=e),onInput:e.handleChangeContent},null,8,["placeholder","modelValue","onInput"])]),Ve,$("h4",ye,[$("span",null,S(e.$t("AddVote.text14")),1),I(o,{class:"number",type:"number",modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=e=>b.value=e),placeholder:"0",onBlur:ce},null,8,["modelValue"])]),$("div",xe,[$("div",he,[$("div",null,[$("span",null,S(e.$t("Vote.text2")),1),Ae]),$("span",null,S(P(le)),1)]),I(n,{modelValue:p.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>p.value=e),qe],"bar-height":"4","active-color":"#FFCD1C"},{button:k((()=>[$("div",ke,[$("div",$e,S(b.value),1),Se,$("div",Pe,S(p.value)+"%",1)])])),_:1},8,["modelValue"]),$("div",_e,[$("div",null,[De,$("span",null,S(e.$t("Vote.text3")),1)]),Ce])]),$("div",Ne,[$("div",Te,[$("span",Ue,S(e.$t("AddVote.text3")),1),$("div",{class:"select",onClick:t[4]||(t[4]=e=>L.value=!L.value)},[_(S(-1===M.value?e.$t("AddVote.text5"):e.$t("AddVote.type"+(M.value+1)))+" ",1),Ye]),D($("div",je,[(h(),N(U,null,T(3,((t,a)=>$("div",{class:"select-item",onClick:e=>{return t=a,M.value=t,void(L.value=!1);var t}},S(e.$t("AddVote.type"+t)),9,Be))),64))],512),[[C,L.value]])]),$("div",Fe,[$("span",Me,S(e.$t("AddVote.text4")),1),$("div",{class:"select",onClick:t[5]||(t[5]=e=>O.value=!O.value)},[_(S(-1===H.value?e.$t("AddVote.text5"):e.$t("AddVote.day",{day:H.value}))+" ",1),He]),O.value?(h(),N("div",Le,[(h(),N(U,null,T(E,(t=>$("div",{class:"select-item",onClick:e=>{return a=t,H.value=a,void(O.value=!1);var a}},S(e.$t("AddVote.day",{day:t})),9,Oe))),64))])):Y("",!0)])]),$("div",Ee,S(e.$t("AddVote.text11",{value:P(s)(P(ne)),value2:P(s)(P(l).daoSystemInfo.finishProposalReward),rate:P(ae)(P(l).daoSystemInfo.fullProposalIncreaseRate)})),1),$("div",Re,S(e.$t("AddVote.text12")),1),$("div",Ge,S(e.$t("AddVote.text13")),1),$("div",We,S(e.$t("AddVote.text15")),1),I(i,{fee:P(l).daoSystemInfo.commitProposalBurnUcon},null,8,["fee"]),$("div",{class:j(["btn-confirm",{"btn-active":P(z)}]),onClick:se},S(e.$t("Confirm")),3)])),default:k((()=>[P(W)?(h(),N("div",{key:0,class:j(["btn",{"btn-active":P(q)}])},[I(a,{"popper-class":"popover-model",placement:"top",width:"328px",trigger:"hover","propper-style":"{background: blue}"},{reference:k((()=>[$("div",ve,[pe,$("span",me,S(e.$t("Administer.add")),1)])])),default:k((()=>[$("div",ue,[$("div",re,S(e.$t("AddVote.text16")),1),$("div",de,S(e.$t("AddVote.text17",{day:G.cur.days,hour:G.cur.hours,s:G.cur.minutes})),1)])])),_:1})],2)):(h(),N("div",{key:1,class:j(["btn",{"btn-active":P(q)}])},[fe,$("span",null,S(e.$t("Administer.add")),1)],2))])),_:1},8,["title","disabled"])}}}),[["__scopeId","data-v-e83a2644"]]),ze={class:"steps"},Xe=M(b({__name:"DaoStepsFail",props:{num:null,active:null,type:null},setup(e){const t=e,a=g((()=>new n(100).div(new n(t.num-1)).decimalPlaces(2).toString(10)));function l(e){return parseFloat(a.value)*e+"%"}return(t,a)=>(h(),N("div",ze,[(h(!0),N(U,null,T(e.num-1,(t=>(h(),N("span",{class:j(["step-line",{"step-line-active":e.active>=t}])},null,2)))),256)),(h(!0),N(U,null,T(e.num,((a,o)=>(h(),N("div",{class:"step",style:H({left:l(o)})},[$("span",{class:j(["step-circle",{"step-circle-active":e.active>=o}])},null,2),$("p",{class:j(["step-text",{text1:e.type}])},S(t.$t("Administer.statusFail"+a)),3)],4)))),256))]))}}),[["__scopeId","data-v-5cfae7d6"]]),Je={class:"steps"},Ke=M(b({__name:"DaoSteps",props:{num:null,active:null,type:null},setup(e){const t=e,a=g((()=>new n(100).div(new n(t.num-1)).decimalPlaces(2).toString(10)));function l(e){return parseFloat(a.value)*e+"%"}return(t,a)=>(h(),N("div",Je,[(h(!0),N(U,null,T(e.num-1,(t=>(h(),N("span",{class:j(["step-line",{"step-line-active":e.active>=t}])},null,2)))),256)),(h(!0),N(U,null,T(e.num,((a,o)=>(h(),N("div",{class:"step",style:H({left:l(o)})},[$("span",{class:j(["step-circle",{"step-circle-active":e.active>=o}])},null,2),$("p",{class:j(["step-text",{text1:e.type}])},S(t.$t("Administer.status"+a)),3)],4)))),256))]))}}),[["__scopeId","data-v-ca85644d"]]),Qe=n.clone();Qe.config({ROUNDING_MODE:1});const{eth:{abi:Ze},utils:et}=new V,tt=Q();ee("0x84EF0D09F9Ba4239976CC68cD6e549b5c8729dc1");const at=d();function lt(){r();const e=L("poolItem")||{},t=g((()=>e.proposalInfo)),a=g((()=>e.voteInfo)),l=g((()=>"0"!==tt.accountInfo.blockFlag)),o=g((()=>{const e=at.account,{operatorType:a,submiter:l}=t.value;return"1"!==a&&l.toLocaleLowerCase()===e.toLocaleLowerCase()||tt.isDaoAdmin})),n=g((()=>"1"===t.value.status)),s=g((()=>{const e=Math.ceil((new Date).getTime()/1e3);return!l.value&&e<Number(t.value.deadline)})),i=g((()=>{t.value;const{agreeAmount:e,disagreeAmount:l}=a.value;return"0"!==e||"0"!==l})),c=g((()=>{const{status:e}=t.value,{agreeAmount:l,disagreeAmount:o}=a.value;return"0"===e?new Qe(l).plus(new Qe(o)).toString(10)===tt.accountInfo.totalVote&&"0"!==tt.accountInfo.totalVote:"0"!==l||"0"!==o})),u=g((()=>"0"!==t.value.status&&"0"===a.value.agreeAmount&&"0"===a.value.disagreeAmount)),d=g((()=>Ze.decodeParameter("uint256",e.proposalInfo.id))),v=g((()=>Ze.decodeParameter("string",e.proposalInfo.subject))),p=g((()=>Ze.decodeParameter("string",e.proposalInfo.content))),m=g((()=>{const{agreeAmount:t="0",disagreeAmount:a="0"}=e.voteInfo;return new Qe(t).plus(new Qe(a)).toString(10)})),f=g((()=>tt.accountInfo.totalVote)),b=g((()=>{const{totalVote:e}=tt.accountInfo;return"0"===e||"0"===m.value?"0":new Qe(m.value).div(new Qe(e)).times(100).decimalPlaces(0).toString(10)})),I=g((()=>{const{status:t}=e.proposalInfo;return t})),w=g((()=>{const{totalVote:e}=tt.accountInfo;return new Qe(e).div(new Qe(1e18)).decimalPlaces(0).toString(10)}));return{poolItem:e,proposalInfo:t,isBlock:l,isVote:s,isExec:o,isFinish:n,noVote:u,isVoted:i,isAllVoted:c,ID:d,subject:v,content:p,userTotal:m,curRate:b,status:I,totalUserVote:w,userTotalVote:f}}const ot=e=>(B("data-v-4ba86e2a"),e=e(),F(),e),nt={class:"title1"},st={class:"flex total"},it={class:"title1"},ct={class:"total-item"},ut={class:"total-number disabled number"},rt={class:"title1"},dt={class:"total-item"},vt={class:"title1"},pt={class:"total-item"},mt={class:"total-number disabled number"},ft={class:"slider"},bt={class:"item item-top"},gt=ot((()=>$("p",null,S(0)+"%",-1))),It={class:"custom-button"},wt={class:"top bg"},Vt=ot((()=>$("div",{class:"circle1"},[$("span",{class:"circle1-inner"})],-1))),yt={class:"bottom button-b"},xt={class:"custom-button"},ht={class:"top bg button-t-r"},At=ot((()=>$("div",{class:"circle"},[$("span",{class:"circle-inner"})],-1))),kt={class:"bottom button-b-r"},$t={class:"custom-button"},St={class:"top"},Pt=ot((()=>$("div",{class:"circle"},[$("span",{class:"circle-inner"})],-1))),_t={class:"bottom"},Dt={class:"item item-bottom"},Ct=ot((()=>$("p",null,"0%",-1))),Nt=ot((()=>$("span",null,S(100)+"%",-1))),Tt={class:"select"},Ut={class:"select-title"},Yt={class:"tabs-items"},jt=["onClick"],Bt={class:"circle"},Ft={key:0,class:"circle-inner"},Mt={class:"text"},Ht={class:"text"},Lt=M(b({__name:"VoteDialog",props:{id:null,agree:null,disagree:null,isButton:{type:Boolean}},setup(e){const t=e,a=n.clone();a.config({ROUNDING_MODE:1});const l=Q(),{voteProposal:o,flushProcessProposal:s,finishProposal:i}=Z(),{isVote:c,ID:u,curRate:r,userTotal:d,totalUserVote:v,userTotalVote:p}=lt(),m=w(),b=w(),V=w(),x=w(""),D=w(""),C=w("0"),B=w(1),F=w([0,40]);function M(e){const t=e[0];e[1];F.value[0]=Number(V.value),F.value[1],t>Number(V.value)&&t<F.value[1]&&(F.value[1]=t),W(F.value[1])}function H(e){}g((()=>{const e=Number(x.value)-Number(C.value);return e<=0?0:e}));const L=g((()=>Number(D.value)+Number(C.value)));function E(){"0"===d.value?b.value=100:(b.value=100,F.value[0]=Number(r.value),F.value[1]=100,C.value=new a(d.value).div(new a(1e18)).decimalPlaces(0).toString(10)),x.value=new a(l.accountInfo.totalVote).div(new a(1e18)).decimalPlaces(0).toString(10),D.value=new a(l.accountInfo.totalVote).div(new a(1e18)).minus(C.value).decimalPlaces(0).toString(10),V.value=r.value}y((()=>{setTimeout((()=>{E()}),1e3)}));const R=g((()=>Number(D.value)>0));function G(e){const t=e.target.value;if("0"===d.value?F.value[1]=0:b.value=0,t<0||!t)return D.value="0",F.value[1]=F.value[0],b.value=0,void(x.value=C.value);const o=new a(t).plus(C.value).times(1e18);if(1===new a(o).comparedTo(new a(p.value)))return x.value=v.value,D.value=new a(l.accountInfo.totalVote).div(new a(1e18)).minus(C.value).decimalPlaces(0).toString(10),F.value[1]=100,void(b.value=100);if(Number(o)<0||-1===new a(o).comparedTo(new a(d.value)))return void(x.value=new a(d.value).div(new a(1e18)).decimalPlaces(0).toString(10));if(x.value=(Number(t)+Number(C.value)).toString(),""===t)return;const{totalVote:n}=l.accountInfo,s=new a(n).div(1e18).decimalPlaces(0).times(1e18),i=new a(x.value).times(1e18).dividedBy(s).times(100).decimalPlaces(0).toString(10);b.value=i,F.value[1]=Number(i)}function W(e){if("0"===d.value?F.value[1]=0:b.value=0,e<=Number(r.value)){b.value=r.value;const{totalVote:e}=l.accountInfo;return D.value="0",x.value=C.value,void new a(d.value).times(100).div(new a(e)).decimalPlaces(20).toString(10)}x.value=new a(e).times(new a(v.value)).div(100).decimalPlaces(0).toString(10),D.value=(Number(x.value)-Number(C.value)).toString(10),Number(x.value)<Number(C.value)&&(x.value=C.value)}function q(e){E(),F.value[1]=100}async function z(){var e;if(!R.value)return;let n="";n=100==b.value||100==F.value[1]?new a(l.accountInfo.totalVote).minus(new a(d.value)).decimalPlaces(0).toString(10):new a(D.value).times(1e18).toString(10),await o(t.id,n,1===B.value),null==(e=m.value)||e.handleClose(),l.getSystemInfo(),l.getList(-1,!0)}return(t,a)=>{const o=f,n=K,s=J;return h(),A(X,{disabled:!P(c),ref_key:"el",ref:m,title:t.$t("DaoRedeem.title1")+" 1/2",classText:"stake-btn",onClose:q},{content:k((()=>[$("h4",nt,[$("span",null,S(t.$t("Vote.text1",{value:P(u)})),1)]),$("div",st,[$("div",it,[$("p",ct,S(t.$t("Vote.text14")),1),$("p",ut,S(C.value),1)]),$("div",rt,[$("p",dt,S(t.$t("Vote.text15")),1),I(o,{class:"number total-number",type:"number",modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),placeholder:"0",onBlur:G},null,8,["modelValue"])]),$("div",vt,[$("p",pt,S(t.$t("Vote.text16")),1),$("p",mt,S(P(L)),1)])]),$("div",ft,[$("div",bt,[$("div",null,[$("span",null,S(t.$t("Vote.text2")),1),gt]),$("span",null,S(P(v)),1)]),"0"!==P(d)?(h(),A(n,{key:0,modelValue:F.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>F.value=e),M],range:"","bar-height":"4","inactive-color":"#BABBBC","active-color":"#FFCD1C",onDragEnd:H},{"left-button":k((()=>[$("div",It,[$("div",wt,S(C.value),1),Vt,$("div",yt,S(F.value[0])+"%",1)])])),"right-button":k((()=>[$("div",xt,[$("div",ht,S(x.value),1),At,$("div",kt,S(F.value[1])+"%",1)])])),_:1},8,["modelValue"])):(h(),A(n,{key:1,class:"slider1",modelValue:b.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>b.value=e),W],"bar-height":"4",max:100,"active-color":"#FFCD1C"},{button:k((()=>[$("div",$t,[$("div",St,S(x.value),1),Pt,$("div",_t,S(b.value)+"%",1)])])),_:1},8,["modelValue"])),$("div",Dt,[$("div",null,[Ct,$("span",null,S(t.$t("Vote.text3")),1)]),Nt])]),$("div",Tt,[$("h4",Ut,S(t.$t("Vote.text4")),1),$("div",Yt,[(h(),N(U,null,T(2,(e=>$("div",{class:"tabs-item",key:e,onClick:t=>{return a=e,void(B.value=a);var a}},[$("div",Bt,[B.value===e?(h(),N("span",Ft)):Y("",!0)]),_(" "+S(t.$t("Vote.text"+(e+4))),1)],8,jt))),64))])]),$("div",Mt,S(t.$t("Vote.text7")),1),$("div",Ht,S(t.$t("Vote.text8")),1),I(s,{fee:P(l).daoSystemInfo.voteProposalBurnUcon},null,8,["fee"]),$("div",{class:j(["btn-confirm",{"btn-active":P(R)}]),onClick:z},S(t.$t("Confirm")),3)])),default:k((()=>[e.isButton?(h(),N("div",{key:0,class:j(["btn",{"btn-active":P(c)}])},S(t.$t("Vote.title1")),3)):Y("",!0),O(t.$slots,"button",{},void 0,!0)])),_:3},8,["disabled","title"])}}}),[["__scopeId","data-v-4ba86e2a"]]),Ot={class:"label"},Et=M(b({__name:"Daoprogress",props:{value:null,label:null,color:null,type:null},setup:e=>(t,a)=>{const l=ie;return h(),N("div",{class:"progress",style:H({color:e.color})},[$("span",Ot,S(e.label),1),I(l,{"show-pivot":!1,color:e.color,"stroke-width":"5",class:"content",percentage:e.value},null,8,["color","percentage"]),$("div",{class:j(["ratetext",{right:1===e.type}])},[$("span",null,S(e.value)+"%",1),O(t.$slots,"content",{},void 0,!0)],2)],4)}}),[["__scopeId","data-v-5c810f1d"]]),Rt=e=>(B("data-v-5a476dbb"),e=e(),F(),e),Gt={class:"items"},Wt={class:"item"},qt=Rt((()=>$("i",{class:"icon"},null,-1))),zt={key:0,class:"item"},Xt=Rt((()=>$("i",{class:"icon"},null,-1))),Jt=M(b({__name:"ViewVoteDetailDialog",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e,a=n.clone();a.config({ROUNDING_MODE:1});const l=Q(),o=g((()=>{const{status:e}=t.proposalInfo;return e})),s=g((()=>{const{agreeAmount:e,disagreeAmount:a}=t.voteInfo;return 0!==l.identity&&("0"!==e||"0"!==a)})),i=g((()=>{const{finishAmount:e}=t.voteInfo;return"3"===o.value||"4"===o.value?e:l.accountInfo.totalVote})),c=g((()=>{const{agreeAmount:e,disagreeAmount:l}=t.voteInfo;return new a(e).plus(new a(l)).div(1e18).decimalPlaces(0).toString(10)})),u=g((()=>l.daoSystemInfo)),r=g((()=>{const{agreeAmount:e}=t.voteInfo;return"0"===i.value?0:new a(e).div(new a(i.value)).times(new a(100)).decimalPlaces(2).toString(10)})),d=g((()=>{const{agreeAmount:e}=t.voteInfo;return new a(e).div(new a(1e18)).decimalPlaces(0).toString(10)})),v=g((()=>{const{disagreeAmount:e}=t.voteInfo;return"0"===l.accountInfo.totalVote?0:new a(e).div(new a(i.value)).times(new a(100)).decimalPlaces(2).toString(10)})),p=g((()=>{const{disagreeAmount:e}=t.voteInfo;return new a(e).div(new a(1e18)).decimalPlaces(0).toString(10)})),m=g((()=>(u.value,new a(100).minus(new a(r.value)).minus(new a(v.value)).decimalPlaces(2).toString(10)))),f=g((()=>{const{status:e}=t.proposalInfo;if("0"!==e)return"0";const{agreeAmount:o,disagreeAmount:n}=t.voteInfo,{totalVote:s}=l.accountInfo;return new a(s).minus(new a(o).plus(new a(n))).div(new a(1e18)).decimalPlaces(0).toString(10)})),b=g((()=>{const{agreeAmount:e,disagreeAmount:l,finishAmount:o}=t.voteInfo;return new a(i.value).minus(new a(e).plus(new a(l))).div(new a(1e18)).decimalPlaces(0).toString(10)}));return y((()=>{})),(t,a)=>(h(),A(X,{ref:"el",height:"40%",title:t.$t("Vote.text11"),disabled:!P(s),classText:"stake-btn"},{content:k((()=>[$("div",Gt,[$("div",Wt,[qt,$("span",null,S(t.$t("Vote.text12",{value:P(c)})),1)]),"0"===e.proposalInfo.status?(h(),N("div",zt,[Xt,$("span",null,S(t.$t("Vote.text13",{value:P(f)})),1)])):Y("",!0)]),I(Et,{type:1,label:t.$t("Dao.agree"),value:P(r),color:"#1dc872"},{content:k((()=>[_(" ("+S(P(d))+") ",1)])),_:1},8,["label","value"]),I(Et,{type:1,label:t.$t("Dao.disapprove"),value:P(v),color:"#1263F1"},{content:k((()=>[_(" ("+S(P(p))+") ",1)])),_:1},8,["label","value"]),I(Et,{type:1,label:t.$t("Dao.ballot"),value:P(m),color:"#767676"},{content:k((()=>[_(" ("+S(P(b))+") ",1)])),_:1},8,["label","value"])])),default:k((()=>[$("div",{class:j(["btn-view",{"btn-active":P(s)}])},S(t.$t("Vote.text9")),3)])),_:1},8,["title","disabled"]))}}),[["__scopeId","data-v-5a476dbb"]]),Kt=e=>(B("data-v-492d5fe7"),e=e(),F(),e),Qt={class:"main"},Zt={class:"main-content"},ea={class:"cell"},ta={class:"label"},aa={class:"cell"},la={class:"label"},oa={class:"cell"},na={class:"label"},sa={class:"cell"},ia={class:"label"},ca={key:0,class:"cell"},ua={class:"label"},ra={class:"flex"},da={class:"btns1"},va={key:1,class:"btn btn-voted"},pa=Kt((()=>$("i",{class:"icon icon-dao-18"},null,-1))),ma={key:2,class:"btn"},fa=["onClick"],ba={class:"title"},ga={class:"b-l content-text"},Ia={class:"b-l input-addvote"},wa={class:"cell1"},Va={class:"cell1-label"},ya={class:"cell"},xa={class:"cell1"},ha={class:"cell1-label"},Aa={class:"cell"},ka={key:0,class:"cell1"},$a={class:"cell1-label"},Sa={class:"cell"},Pa={class:"select input"},_a={class:"select-title"},Da={class:"tabs-items"},Ca={class:"circle"},Na={key:0,class:"circle-inner"},Ta={class:"text-desc"},Ua={class:"btns"},Ya={key:2,class:"vote-text"},ja=Kt((()=>$("i",{class:"icon"},null,-1))),Ba=M(b({__name:"VoteDetailDialog",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e,{isVote:a,isExec:l,isFinish:o,noVote:s,isVoted:c,isAllVoted:u,status:r,ID:d,subject:v,content:p}=lt(),{copy:m}=le(),b=Q(),{finishProposal:x,CancelProposal:D}=Z();new V;const C=g((()=>new n(t.voteInfo.agreeAmount).plus(new n(t.voteInfo.disagreeAmount)).toString(10))),B=g((()=>{const{deadline:e,status:a}=t.proposalInfo;t.voteInfo;const{totalVote:l}=b.accountInfo;return"0"===a&&l!==C.value})),F=g((()=>"3"===r.value||"2"===r.value)),M=g((()=>b.daoSystemInfo)),H=g((()=>{const{totalVote:e}=M.value,a="0"===r.value?e:t.proposalInfo.totalCount,{agreeCount:l}=t.proposalInfo;return new n(l).times(new n(100)).div(new n(a)).decimalPlaces(2).toString(10)})),L=g((()=>{const{totalVote:e}=M.value,a="0"===r.value?e:t.proposalInfo.totalCount,{disagreeCount:l}=t.proposalInfo;return new n(l).times(new n(100)).div(new n(a)).decimalPlaces(2).toString(10)})),O=g((()=>{const{totalVote:e}=M.value;return"0"===r.value||t.proposalInfo.totalCount,t.proposalInfo,new n(100).minus(new n(H.value)).minus(new n(L.value)).decimalPlaces(2).toString(10)})),G=g((()=>{const e=Number(r.value);return 0===e?1:1===e?2:3})),W=g((()=>{const{deadline:e,duration:a}=t.proposalInfo;return(e-a).toString()})),q=w(""),z=w("0");y((()=>{const{totalVote:e}=b.daoSystemInfo;z.value=new n(C.value).plus(new n(K.value)).div(new n(e)).times(100).decimalPlaces(0).toString(10)}));const J=g((()=>{const e=t.proposalInfo.status;b.accountInfo;const a="0"===e?b.daoSystemInfo.totalVote:t.proposalInfo.totalCount;return new n(C.value).div(new n(a)).times(100).decimalPlaces(0).toString(10)})),K=g((()=>{const{totalVote:e}=b.accountInfo;return new n(e).times(new n(q.value)).div(new n(100)).decimalPlaces(0).toString(10)}));g((()=>"0"===r.value?b.daoSystemInfo.totalVote:t.proposalInfo.totalCount));const ee=g((()=>{const{agreeAmount:e,disagreeAmount:a}=t.voteInfo,{totalVote:l}=b.accountInfo;return new n(l).minus(new n(e).plus(new n(a))).div(new n(1e18)).decimalPlaces(0).toString(10)}));function te(){}async function ae(){"1"===r.value&&(await x(t.proposalInfo.id),b.getSystemInfo(),b.getList(-1,!0))}return(t,n)=>{const c=Ke,g=Xe,w=f;return h(),A(X,{ref:"el",height:"90%",classText:"stake-btn",title:"UIP "+P(d)+" "+t.$t("AddVote.text6"),disabled:!1},{content:k((()=>[P(F)?(h(),A(g,{key:1,type:1,num:3,active:2})):(h(),A(c,{key:0,type:1,num:4,active:P(G)},null,8,["active"])),$("h4",ba,[$("span",null,S(P(v)),1)]),$("div",ga,[I(w,{style:{"white-space":"pre-wrap","word-break":"break-all"},class:"value",type:"textarea",disabled:!0,placeholder:t.$t("AddVote.text2"),rows:"6",modelValue:P(p),"onUpdate:modelValue":n[1]||(n[1]=e=>E(p)?p.value=e:null)},null,8,["placeholder","modelValue"])]),$("div",Ia,[$("div",wa,[$("div",Va,S(t.$t("AddVote.text8"))+":",1),$("div",ya,S(P(i)(P(W),"YYYY-MM-DD HH:mm:ss")),1)]),$("div",xa,[$("div",ha,S(t.$t("AddVote.text9"))+":",1),$("div",Aa,S(P(i)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),"4"===P(r)?(h(),N("div",ka,[$("div",$a,S(t.$t("Administer.text6"))+":",1),$("div",Sa,S(P(i)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss")),1)])):Y("",!0)]),$("div",Pa,[$("h4",_a,S(t.$t("AddVote.text7")),1),$("div",Da,[(h(),N(U,null,T(3,((a,l)=>$("div",{class:"tabs-item",key:a},[$("div",Ca,[e.proposalInfo.operatorType==l?(h(),N("span",Na)):Y("",!0)]),_(" "+S(t.$t("AddVote.type"+a)),1)]))),64))])]),I(Et,{label:t.$t("Dao.agree"),value:P(H),color:"#1dc872"},null,8,["label","value"]),I(Et,{label:t.$t("Dao.disapprove"),value:P(L),color:"#1263F1"},null,8,["label","value"]),I(Et,{label:t.$t("Dao.ballot"),value:P(O),color:"#767676"},null,8,["label","value"]),$("div",Ta,S(t.$t("AddVote.text10")),1),$("div",Ua,[P(B)?(h(),A(Lt,{key:0,disabled:!P(a),id:e.proposalInfo.id,title:t.$t("Vote.title"),min:P(J),agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount,voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},{button:k((()=>[P(B)?(h(),N("div",{key:0,class:j(["btn-confirm",{"btn-active":P(a)}]),isButton:!0,onClick:te},S(t.$t("Vote.title")),3)):Y("",!0)])),_:1},8,["disabled","id","title","min","agree","disagree","voteInfo","proposalInfo"])):Y("",!0),I(Jt,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])]),P(B)?(h(),N("div",Ya,[ja,$("span",null,S(t.$t("Vote.text10",{value:P(ee)})),1)])):Y("",!0)])),default:k((()=>[$("div",Qt,[$("div",Zt,[$("div",ea,[$("span",ta,S(t.$t("Administer.text1"))+": ",1),$("span",null,S(P(v)),1)]),$("div",aa,[$("span",la,S(t.$t("Administer.text3"))+": ",1),$("span",null,S(P(i)(P(W),"YYYY-MM-DD HH:mm:ss")),1)]),$("div",oa,[$("span",na,S(t.$t("Administer.text4"))+": ",1),$("span",null,S(P(i)(e.proposalInfo.deadline,"YYYY-MM-DD HH:mm:ss")),1)]),$("div",sa,[$("span",ia,S(t.$t("Administer.text6"))+": ",1),$("span",null,S("4"===P(r)?P(i)(e.proposalInfo.executedTime,"YYYY-MM-DD HH:mm:ss"):"-"),1)]),P(b).isDaoAdmin?(h(),N("div",ca,[$("span",ua,S(t.$t("Administer.text8"))+": ",1),$("span",ra,[_(S(e.proposalInfo.submiter.slice(0,4))+"... "+S(e.proposalInfo.submiter.slice(-4))+" ",1),$("i",{class:"icon copy icon-copy1",onClick:n[0]||(n[0]=R((t=>P(m)(e.proposalInfo.submiter)),["stop"]))})])])):Y("",!0)]),$("div",da,[P(B)?(h(),A(Lt,{key:0,class:"btn",isButton:!0,id:e.proposalInfo.id,title:t.$t("Vote.title"),min:P(J),agree:e.voteInfo.agreeAmount,disagree:e.voteInfo.disagreeAmount},null,8,["id","title","min","agree","disagree"])):Y("",!0),P(u)?(h(),N("div",va,[pa,_(" "+S(t.$t("Administer.btn2")),1)])):Y("",!0),P(s)?(h(),N("div",ma,S(t.$t("Administer.btn4")),1)):Y("",!0),P(l)&&P(o)?(h(),N("div",{key:3,class:j(["btn btn-succ",{"btn-succ-active":P(o)}]),onClick:R(ae,["stop"])},S(t.$t("Administer.btn3")),11,fa)):Y("",!0)])])])),_:1},8,["title"])}}}),[["__scopeId","data-v-492d5fe7"]]),Fa={class:"pool-content"},Ma={class:"header"},Ha={class:"title"},La={key:0,style:{color:"#ffcd1c"}},Oa={key:0,class:"cell"},Ea={class:"text"},Ra=M(b({__name:"PoolItem",props:{voteInfo:null,proposalInfo:null},setup(e){const t=e;G("poolItem",t);const a=Q(),{CancelProposal:l,RecoveryHideProposal:o}=Z(),{eth:{abi:n},utils:s}=new V,i=g((()=>{Math.ceil((new Date).getTime()/1e3);const{deadline:e,status:a}=t.proposalInfo;return a})),u=g((()=>"3"===i.value||"2"===i.value)),r=g((()=>{const e=Number(i.value);return 0===e?1:1===e?2:3})),d=g((()=>{const e=t.proposalInfo.status;return"0"===e||"1"===e?8:"4"===e?9:"2"===e||"3"==e?10:void 0})),v=g((()=>{const{status:e,flag:l}=t.proposalInfo;return a.isDaoAdmin&&"0"===l&&"2"!==e}));function p(e){const t=n.encodeParameter("string","test");return n.decodeParameter("string",t),n.decodeParameter("uint256",e)}async function m(){await o(t.proposalInfo.id),a.getSystemInfo(),a.getList(-1,!0)}async function f(){await l(t.proposalInfo.id),a.getSystemInfo(),a.getList(-1,!0)}return(t,l)=>{const o=c,n=Ke,s=Xe;return h(),N("div",Fa,[$("div",Ma,[$("div",{class:j(["icon","icon-dao-"+P(d)])},null,2),$("h4",Ha,"UIP "+S(p(e.proposalInfo.id)),1),"2"===P(i)?(h(),N("span",La,S(t.$t("Vote.text17")),1)):Y("",!0),P(v)?(h(),A(o,{key:1,name:"cross",class:"close",color:"#ffcd1c",onClick:f})):Y("",!0)]),"1"===e.proposalInfo.flag&&P(a).isDaoAdmin?(h(),N("div",Oa,[$("span",Ea,S(t.$t("Vote.text18")),1),I(o,{name:"revoke",onClick:m})])):Y("",!0),P(u)?(h(),A(s,{key:2,num:3,active:2})):(h(),A(n,{key:1,num:4,active:P(r)},null,8,["active"])),I(Ba,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])])}}}),[["__scopeId","data-v-de31ea46"]]),Ga={class:"content"},Wa={class:"flex m-x align-center"},qa={class:"search-box1"},za={class:"tab select"},Xa={class:"select-label"},Ja=(e=>(B("data-v-b981f450"),e=e(),F(),e))((()=>$("i",{class:"icon triangle-down"},null,-1))),Ka={key:0,class:"select-items"},Qa=["onClick"],Za=M(b({__name:"Index",setup(e){const{eth:{abi:t},utils:a}=new V,l=Q(),o=g((()=>{const e=l.proposalList;let t=[];for(let a=0;a<e.length;a++){const{subject:l,content:o,id:n}=e[a].proposalInfo,s=r(n);(""===i.value||oe(l).indexOf(i.value)>-1||oe(o).indexOf(i.value)>-1||s.indexOf(i.value)>-1)&&t.push(e[a])}return t})),n=w(0);w(0);const s=w(!1),i=w("");y((async()=>{l.getList(0,!0)}));const c=g((()=>l.isDaoAdmin?7:6)),u=g((()=>-1===n.value?"12":q.global.t("Administer.tab"+n.value)));function r(e){const a=t.encodeParameter("string","test");return t.decodeParameter("string",a),t.decodeParameter("uint256",e)}function d(){l.getList(n.value)}return(e,t)=>{const a=f;return h(),N("div",Ga,[I(qe),$("div",Wa,[$("div",qa,[I(a,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:e.$t("Administer.search"),"suffix-icon":P(W),class:"search"},null,8,["modelValue","placeholder","suffix-icon"])]),$("div",za,[$("div",{class:"flex",style:{width:"100%"},onClick:t[1]||(t[1]=e=>s.value=!s.value)},[$("span",Xa,S(P(u)),1),Ja]),s.value?(h(),N("div",Ka,[(h(!0),N(U,null,T(P(c),((t,a)=>(h(),N("div",{class:"select-item",onClick:e=>function(e){n.value=e,l.getList(n.value,!0),s.value=!1}(a)}," - "+S(e.$t("Administer.tab"+a)),9,Qa)))),256))])):Y("",!0)])]),(h(!0),N(U,null,T(P(o),(e=>(h(),A(Ra,{voteInfo:e.voteInfo,proposalInfo:e.proposalInfo},null,8,["voteInfo","proposalInfo"])))),256)),P(l).isHasRemain?(h(),N("div",{key:0,class:"more",onClick:d},S(e.$t("Administer.text7")),1)):Y("",!0)])}}}),[["__scopeId","data-v-b981f450"]]),el={class:"box"},tl=(e=>(B("data-v-26a3b820"),e=e(),F(),e))((()=>$("div",{class:"img"},null,-1))),al={class:"tip"},ll={class:"tip-title"},ol={class:"tip-info"},nl={class:"btn btn1"},sl=M(b({__name:"Home",setup(e){const t=z(),a=p();function l(){a.goNft(1),t.replace({path:"/nft"})}return(e,t)=>{const o=u;return h(),N(U,null,[I(Za),I(o,{show:P(a).showNftTipV1,"onUpdate:show":t[1]||(t[1]=e=>P(a).showNftTipV1=e),round:"",teleport:"body","close-on-click-overlay":!1,"close-on-popstate":!0,"overlay-class":"a"},{default:k((()=>[$("div",el,[tl,$("div",al,[$("h4",ll,S(P(a).nftTipTitleV1),1),$("div",ol,S(P(a).nftTipTextV1),1),$("div",{class:"btns",onClick:t[0]||(t[0]=e=>P(a).close(1))},[$("div",nl,S(e.$t("NftTip.btn1")),1),$("div",{class:"btn btn2",onClick:l},S(e.$t("NftTip.btn2")),1)])])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-26a3b820"]]);export{sl as default};
