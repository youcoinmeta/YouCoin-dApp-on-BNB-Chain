import{f as e,O as t,I as a,r as o,l as n,k as l,at as s,a6 as i,R as r,d as u,ax as p,ay as d,az as c,aA as v,aB as f,P as m,v as y,x,o as b,c as g,z as h,F as w,n as I,u as S,L as k,b as z,i as $,w as C,a9 as E,J as j,g as F,ah as P,j as V,ao as B,t as M,e as _,X as A}from"./index.0681fd30.js";import{l as N,f as R,g as O,b as H,d as L,a as T,_ as K,w as W}from"./plugin-vue_export-helper.ddb3bcc2.js";import{i as D,V as G,E as J}from"./index.100248e3.js";import{i as U,u as X,j as Z}from"./contract.486685f1.js";import{u as q,m as Q,a as Y,b as ee}from"./index.5d882754.js";import{b as te,i as ae}from"./el-popper.6c4b1744.js";class oe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function ne(e,t){throw new oe(`[${e}] ${t}`)}function le(e,t){}const se="update:modelValue",ie="change",re="input",ue=["class","style"],pe=/^on[A-Z]/,de=()=>({form:a(R,void 0),formItem:a(O,void 0)}),ce=(t,{formItemContext:a,disableIdGeneration:r,disableIdManagement:u})=>{r||(r=o(!1)),u||(u=o(!1));const p=o();let d;const c=e((()=>{var e;return!!(!t.label&&a&&a.inputIds&&(null==(e=a.inputIds)?void 0:e.length)<=1)}));return n((()=>{d=l([s(t,"id"),r],(([e,t])=>{const o=null!=e?e:t?void 0:te().value;o!==p.value&&((null==a?void 0:a.removeInputId)&&(p.value&&a.removeInputId(p.value),(null==u?void 0:u.value)||t||!o||a.addInputId(o)),p.value=o)}),{immediate:!0})})),i((()=>{d&&d(),(null==a?void 0:a.removeInputId)&&p.value&&a.removeInputId(p.value)})),{isLabeledByFormItem:c,inputId:p}};let ve;const fe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function me(e,t=1,a){var o;ve||(ve=document.createElement("textarea"),document.body.appendChild(ve));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:fe.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);ve.setAttribute("style",`${i};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ve.value=e.value||e.placeholder||"";let r=ve.scrollHeight;const u={};"border-box"===s?r+=l:"content-box"===s&&(r-=n),ve.value="";const p=ve.scrollHeight-n;if(U(t)){let e=p*t;"border-box"===s&&(e=e+n+l),r=Math.max(e,r),u.minHeight=`${e}px`}if(U(a)){let e=p*a;"border-box"===s&&(e=e+n+l),r=Math.min(e,r)}return u.height=`${r}px`,null==(o=ve.parentNode)||o.removeChild(ve),ve=void 0,u}const ye=H({id:{type:String,default:void 0},size:q,disabled:Boolean,modelValue:{type:L([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:L([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:D},prefixIcon:{type:D},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:L([Object,Array,String]),default:()=>Q({})}}),xe={[se]:e=>r(e),input:e=>r(e),change:e=>r(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},be=["role"],ge=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],he=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],we=u({name:"ElInput",inheritAttrs:!1});const Ie=W(K(u({...we,props:ye,emits:xe,setup(a,{expose:i,emit:r}){const u=a,R=p(),O=d(),H=e((()=>{const e={};return"combobox"===u.containerRole&&(e["aria-haspopup"]=R["aria-haspopup"],e["aria-owns"]=R["aria-owns"],e["aria-expanded"]=R["aria-expanded"]),e})),L=((a={})=>{const{excludeListeners:o=!1,excludeKeys:n}=a,l=e((()=>((null==n?void 0:n.value)||[]).concat(ue))),s=t();return e(s?()=>{var e;return N(Object.entries(null==(e=s.proxy)?void 0:e.$attrs).filter((([e])=>!(l.value.includes(e)||o&&pe.test(e)))))}:()=>({}))})({excludeKeys:e((()=>Object.keys(H.value)))}),{form:K,formItem:W}=de(),{inputId:D}=ce(u,{formItemContext:W}),U=Y(),q=ee(),Q=X("input"),te=X("textarea"),oe=c(),ne=c(),le=o(!1),ie=o(!1),re=o(!1),ve=o(!1),fe=o(),ye=c(u.inputStyle),xe=e((()=>oe.value||ne.value)),we=e((()=>{var e;return null!=(e=null==K?void 0:K.statusIcon)&&e})),Ie=e((()=>(null==W?void 0:W.validateState)||"")),Se=e((()=>Ie.value&&G[Ie.value])),ke=e((()=>ve.value?v:f)),ze=e((()=>[R.style,u.inputStyle])),$e=e((()=>[u.inputStyle,ye.value,{resize:u.resize}])),Ce=e((()=>ae(u.modelValue)?"":String(u.modelValue))),Ee=e((()=>u.clearable&&!q.value&&!u.readonly&&!!Ce.value&&(le.value||ie.value))),je=e((()=>u.showPassword&&!q.value&&!u.readonly&&!!Ce.value&&(!!Ce.value||le.value))),Fe=e((()=>u.showWordLimit&&!!L.value.maxlength&&("text"===u.type||"textarea"===u.type)&&!q.value&&!u.readonly&&!u.showPassword)),Pe=e((()=>Array.from(Ce.value).length)),Ve=e((()=>!!Fe.value&&Pe.value>Number(L.value.maxlength))),Be=e((()=>!!O.suffix||!!u.suffixIcon||Ee.value||u.showPassword||Fe.value||!!Ie.value&&we.value)),[Me,_e]=function(e){const t=o();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(oe);T(ne,(e=>{if(!Fe.value||"both"!==u.resize)return;const t=e[0],{width:a}=t.contentRect;fe.value={right:`calc(100% - ${a+15+6}px)`}}));const Ae=()=>{const{type:e,autosize:t}=u;if(Z&&"textarea"===e)if(t){const e=A(t)?t.minRows:void 0,a=A(t)?t.maxRows:void 0;ye.value={...me(ne.value,e,a)}}else ye.value={minHeight:me(ne.value).minHeight}},Ne=()=>{const e=xe.value;e&&e.value!==Ce.value&&(e.value=Ce.value)},Re=async e=>{Me();let{value:t}=e.target;u.formatter&&(t=u.parser?u.parser(t):t,t=u.formatter(t)),re.value||(t!==Ce.value?(r(se,t),r("input",t),await m(),Ne(),_e()):Ne())},Oe=e=>{r("change",e.target.value)},He=e=>{r("compositionstart",e),re.value=!0},Le=e=>{var t;r("compositionupdate",e);const a=null==(t=e.target)?void 0:t.value,o=a[a.length-1]||"";re.value=!(e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e))(o)},Te=e=>{r("compositionend",e),re.value&&(re.value=!1,Re(e))},Ke=()=>{ve.value=!ve.value,We()},We=async()=>{var e;await m(),null==(e=xe.value)||e.focus()},De=e=>{le.value=!0,r("focus",e)},Ge=e=>{var t;le.value=!1,r("blur",e),u.validateEvent&&(null==(t=null==W?void 0:W.validate)||t.call(W,"blur").catch((e=>{})))},Je=e=>{ie.value=!1,r("mouseleave",e)},Ue=e=>{ie.value=!0,r("mouseenter",e)},Xe=e=>{r("keydown",e)},Ze=()=>{r(se,""),r("change",""),r("clear"),r("input","")};return l((()=>u.modelValue),(()=>{var e;m((()=>Ae())),u.validateEvent&&(null==(e=null==W?void 0:W.validate)||e.call(W,"change").catch((e=>{})))})),l(Ce,(()=>Ne())),l((()=>u.type),(async()=>{await m(),Ne(),Ae()})),n((()=>{!u.formatter&&u.parser,Ne(),m(Ae)})),i({input:oe,textarea:ne,ref:xe,textareaStyle:$e,autosize:s(u,"autosize"),focus:We,blur:()=>{var e;return null==(e=xe.value)?void 0:e.blur()},select:()=>{var e;null==(e=xe.value)||e.select()},clear:Ze,resizeTextarea:Ae}),(e,t)=>y((b(),g("div",j(S(H),{class:["textarea"===e.type?S(te).b():S(Q).b(),S(Q).m(S(U)),S(Q).is("disabled",S(q)),S(Q).is("exceed",S(Ve)),{[S(Q).b("group")]:e.$slots.prepend||e.$slots.append,[S(Q).bm("group","append")]:e.$slots.append,[S(Q).bm("group","prepend")]:e.$slots.prepend,[S(Q).m("prefix")]:e.$slots.prefix||e.prefixIcon,[S(Q).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[S(Q).bm("suffix","password-clear")]:S(Ee)&&S(je)},e.$attrs.class],style:S(ze),role:e.containerRole,onMouseenter:Ue,onMouseleave:Je}),[h(" input "),"textarea"!==e.type?(b(),g(w,{key:0},[h(" prepend slot "),e.$slots.prepend?(b(),g("div",{key:0,class:I(S(Q).be("group","prepend"))},[k(e.$slots,"prepend")],2)):h("v-if",!0),z("div",{class:I([S(Q).e("wrapper"),S(Q).is("focus",le.value)])},[h(" prefix slot "),e.$slots.prefix||e.prefixIcon?(b(),g("span",{key:0,class:I(S(Q).e("prefix"))},[z("span",{class:I(S(Q).e("prefix-inner"))},[k(e.$slots,"prefix"),e.prefixIcon?(b(),$(S(J),{key:0,class:I(S(Q).e("icon"))},{default:C((()=>[(b(),$(E(e.prefixIcon)))])),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),z("input",j({id:S(D),ref_key:"input",ref:oe,class:S(Q).e("inner")},S(L),{type:e.showPassword?ve.value?"text":"password":e.type,disabled:S(q),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:u.form,onCompositionstart:He,onCompositionupdate:Le,onCompositionend:Te,onInput:Re,onFocus:De,onBlur:Ge,onChange:Oe,onKeydown:Xe}),null,16,ge),h(" suffix slot "),S(Be)?(b(),g("span",{key:1,class:I(S(Q).e("suffix"))},[z("span",{class:I(S(Q).e("suffix-inner"))},[S(Ee)&&S(je)&&S(Fe)?h("v-if",!0):(b(),g(w,{key:0},[k(e.$slots,"suffix"),e.suffixIcon?(b(),$(S(J),{key:0,class:I(S(Q).e("icon"))},{default:C((()=>[(b(),$(E(e.suffixIcon)))])),_:1},8,["class"])):h("v-if",!0)],64)),S(Ee)?(b(),$(S(J),{key:1,class:I([S(Q).e("icon"),S(Q).e("clear")]),onMousedown:V(S(B),["prevent"]),onClick:Ze},{default:C((()=>[F(S(P))])),_:1},8,["class","onMousedown"])):h("v-if",!0),S(je)?(b(),$(S(J),{key:2,class:I([S(Q).e("icon"),S(Q).e("password")]),onClick:Ke},{default:C((()=>[(b(),$(E(S(ke))))])),_:1},8,["class"])):h("v-if",!0),S(Fe)?(b(),g("span",{key:3,class:I(S(Q).e("count"))},[z("span",{class:I(S(Q).e("count-inner"))},M(S(Pe))+" / "+M(S(L).maxlength),3)],2)):h("v-if",!0),S(Ie)&&S(Se)&&S(we)?(b(),$(S(J),{key:4,class:I([S(Q).e("icon"),S(Q).e("validateIcon"),S(Q).is("loading","validating"===S(Ie))])},{default:C((()=>[(b(),$(E(S(Se))))])),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),e.$slots.append?(b(),g("div",{key:1,class:I(S(Q).be("group","append"))},[k(e.$slots,"append")],2)):h("v-if",!0)],64)):(b(),g(w,{key:1},[h(" textarea "),z("textarea",j({id:S(D),ref_key:"textarea",ref:ne,class:S(te).e("inner")},S(L),{tabindex:e.tabindex,disabled:S(q),readonly:e.readonly,autocomplete:e.autocomplete,style:S($e),"aria-label":e.label,placeholder:e.placeholder,form:u.form,onCompositionstart:He,onCompositionupdate:Le,onCompositionend:Te,onInput:Re,onFocus:De,onBlur:Ge,onChange:Oe,onKeydown:Xe}),null,16,he),S(Fe)?(b(),g("span",{key:0,style:_(fe.value),class:I(S(Q).e("count"))},M(S(Pe))+" / "+M(S(L).maxlength),7)):h("v-if",!0)],64))],16,be)),[[x,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{ie as C,Ie as E,re as I,se as U,ce as a,le as d,ne as t,de as u};
